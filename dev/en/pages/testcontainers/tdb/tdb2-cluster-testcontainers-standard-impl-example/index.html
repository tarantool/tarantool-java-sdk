
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://tarantool.github.io/tarantool-java-sdk/dev/en/pages/testcontainers/tdb/tdb2-cluster-testcontainers-standard-impl-example/">
      
      
        <link rel="prev" href="../tdb2-cluster-testcontainers-standard-impl/">
      
      
        <link rel="next" href="../../tqe/">
      
      
        
          <link rel="alternate" href="../../../../../pages/testcontainers/tdb/tdb2-cluster-testcontainers-standard-impl-example/" hreflang="ru">
        
          <link rel="alternate" href="./" hreflang="en">
        
      
      
      <link rel="icon" href="../../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Examples - Tarantool Java SDK</title>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../../../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      
  
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
  
  <style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M1%207.775V2.75C1%201.784%201.784%201%202.75%201h5.025c.464%200%20.91.184%201.238.513l6.25%206.25a1.75%201.75%200%200%201%200%202.474l-5.026%205.026a1.75%201.75%200%200%201-2.474%200l-6.25-6.25A1.75%201.75%200%200%201%201%207.775m1.5%200c0%20.066.026.13.073.177l6.25%206.25a.25.25%200%200%200%20.354%200l5.025-5.025a.25.25%200%200%200%200-.354l-6.25-6.25a.25.25%200%200%200-.177-.073H2.75a.25.25%200%200%200-.25.25ZM6%205a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E');--md-admonition-icon--abstract:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2.5%201.75v11.5c0%20.138.112.25.25.25h3.17a.75.75%200%200%201%200%201.5H2.75A1.75%201.75%200%200%201%201%2013.25V1.75C1%20.784%201.784%200%202.75%200h8.5C12.216%200%2013%20.784%2013%201.75v7.736a.75.75%200%200%201-1.5%200V1.75a.25.25%200%200%200-.25-.25h-8.5a.25.25%200%200%200-.25.25m13.274%209.537zl-4.557%204.45a.75.75%200%200%201-1.055-.008l-1.943-1.95a.75.75%200%200%201%201.062-1.058l1.419%201.425%204.026-3.932a.75.75%200%201%201%201.048%201.074M4.75%204h4.5a.75.75%200%200%201%200%201.5h-4.5a.75.75%200%200%201%200-1.5M4%207.75A.75.75%200%200%201%204.75%207h2a.75.75%200%200%201%200%201.5h-2A.75.75%200%200%201%204%207.75%22/%3E%3C/svg%3E');--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M0%208a8%208%200%201%201%2016%200A8%208%200%200%201%200%208m8-6.5a6.5%206.5%200%201%200%200%2013%206.5%206.5%200%200%200%200-13M6.5%207.75A.75.75%200%200%201%207.25%207h1a.75.75%200%200%201%20.75.75v2.75h.25a.75.75%200%200%201%200%201.5h-2a.75.75%200%200%201%200-1.5h.25v-2h-.25a.75.75%200%200%201-.75-.75M8%206a1%201%200%201%201%200-2%201%201%200%200%201%200%202%22/%3E%3C/svg%3E');--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M3.499.75a.75.75%200%200%201%201.5%200v.996C5.9%202.903%206.793%203.65%207.662%204.376l.24.202c-.036-.694.055-1.422.426-2.163C9.1.873%2010.794-.045%2012.622.26%2014.408.558%2016%201.94%2016%204.25c0%201.278-.954%202.575-2.44%202.734l.146.508.065.22c.203.701.412%201.455.476%202.226.142%201.707-.4%203.03-1.487%203.898C11.714%2014.671%2010.27%2015%208.75%2015h-6a.75.75%200%200%201%200-1.5h1.376a4.5%204.5%200%200%201-.563-1.191%203.84%203.84%200%200%201-.05-2.063%204.65%204.65%200%200%201-2.025-.293.75.75%200%200%201%20.525-1.406c1.357.507%202.376-.006%202.698-.318l.009-.01a.747.747%200%200%201%201.06%200%20.75.75%200%200%201-.012%201.074c-.912.92-.992%201.835-.768%202.586.221.74.745%201.337%201.196%201.621H8.75c1.343%200%202.398-.296%203.074-.836.635-.507%201.036-1.31.928-2.602-.05-.603-.216-1.224-.422-1.93l-.064-.221c-.12-.407-.246-.84-.353-1.29a2.4%202.4%200%200%201-.507-.441%203.1%203.1%200%200%201-.633-1.248.75.75%200%200%201%201.455-.364c.046.185.144.436.31.627.146.168.353.305.712.305.738%200%201.25-.615%201.25-1.25%200-1.47-.95-2.315-2.123-2.51-1.172-.196-2.227.387-2.706%201.345-.46.92-.27%201.774.019%203.062l.042.19.01.05c.348.443.666.949.94%201.553a.75.75%200%201%201-1.365.62c-.553-1.217-1.32-1.94-2.3-2.768L6.7%205.527c-.814-.68-1.75-1.462-2.692-2.619a3.7%203.7%200%200%200-1.023.88c-.406.495-.663%201.036-.722%201.508.116.122.306.21.591.239.388.038.797-.06%201.032-.19a.75.75%200%200%201%20.728%201.31c-.515.287-1.23.439-1.906.373-.682-.067-1.473-.38-1.879-1.193L.75%205.677V5.5c0-.984.48-1.94%201.077-2.664.46-.559%201.05-1.055%201.673-1.353z%22/%3E%3C/svg%3E');--md-admonition-icon--success:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M13.78%204.22a.75.75%200%200%201%200%201.06l-7.25%207.25a.75.75%200%200%201-1.06%200L2.22%209.28a.75.75%200%200%201%20.018-1.042.75.75%200%200%201%201.042-.018L6%2010.94l6.72-6.72a.75.75%200%200%201%201.06%200%22/%3E%3C/svg%3E');--md-admonition-icon--question:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M0%208a8%208%200%201%201%2016%200A8%208%200%200%201%200%208m8-6.5a6.5%206.5%200%201%200%200%2013%206.5%206.5%200%200%200%200-13M6.92%206.085h.001a.749.749%200%201%201-1.342-.67c.169-.339.436-.701.849-.977C6.845%204.16%207.369%204%208%204a2.76%202.76%200%200%201%201.637.525c.503.377.863.965.863%201.725%200%20.448-.115.83-.329%201.15-.205.307-.47.513-.692.662-.109.072-.22.138-.313.195l-.006.004a6%206%200%200%200-.26.16%201%201%200%200%200-.276.245.75.75%200%200%201-1.248-.832c.184-.264.42-.489.692-.661q.154-.1.313-.195l.007-.004c.1-.061.182-.11.258-.161a1%201%200%200%200%20.277-.245C8.96%206.514%209%206.427%209%206.25a.61.61%200%200%200-.262-.525A1.27%201.27%200%200%200%208%205.5c-.369%200-.595.09-.74.187a1%201%200%200%200-.34.398M9%2011a1%201%200%201%201-2%200%201%201%200%200%201%202%200%22/%3E%3C/svg%3E');--md-admonition-icon--warning:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M6.457%201.047c.659-1.234%202.427-1.234%203.086%200l6.082%2011.378A1.75%201.75%200%200%201%2014.082%2015H1.918a1.75%201.75%200%200%201-1.543-2.575Zm1.763.707a.25.25%200%200%200-.44%200L1.698%2013.132a.25.25%200%200%200%20.22.368h12.164a.25.25%200%200%200%20.22-.368Zm.53%203.996v2.5a.75.75%200%200%201-1.5%200v-2.5a.75.75%200%200%201%201.5%200M9%2011a1%201%200%201%201-2%200%201%201%200%200%201%202%200%22/%3E%3C/svg%3E');--md-admonition-icon--failure:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2.344%202.343za8%208%200%200%201%2011.314%2011.314A8.002%208.002%200%200%201%20.234%2010.089a8%208%200%200%201%202.11-7.746m1.06%2010.253a6.5%206.5%200%201%200%209.108-9.275%206.5%206.5%200%200%200-9.108%209.275M6.03%204.97%208%206.94l1.97-1.97a.749.749%200%200%201%201.275.326.75.75%200%200%201-.215.734L9.06%208l1.97%201.97a.749.749%200%200%201-.326%201.275.75.75%200%200%201-.734-.215L8%209.06l-1.97%201.97a.749.749%200%200%201-1.275-.326.75.75%200%200%201%20.215-.734L6.94%208%204.97%206.03a.75.75%200%200%201%20.018-1.042.75.75%200%200%201%201.042-.018%22/%3E%3C/svg%3E');--md-admonition-icon--danger:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M9.504.43a1.516%201.516%200%200%201%202.437%201.713L10.415%205.5h2.123c1.57%200%202.346%201.909%201.22%203.004l-7.34%207.142a1.25%201.25%200%200%201-.871.354h-.302a1.25%201.25%200%200%201-1.157-1.723L5.633%2010.5H3.462c-1.57%200-2.346-1.909-1.22-3.004zm1.047%201.074L3.286%208.571A.25.25%200%200%200%203.462%209H6.75a.75.75%200%200%201%20.694%201.034l-1.713%204.188%206.982-6.793A.25.25%200%200%200%2012.538%207H9.25a.75.75%200%200%201-.683-1.06l2.008-4.418.003-.006-.004-.009-.006-.006-.008-.001q-.005%200-.009.004%22/%3E%3C/svg%3E');--md-admonition-icon--bug:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M4.72.22a.75.75%200%200%201%201.06%200l1%20.999a3.5%203.5%200%200%201%202.441%200l.999-1a.748.748%200%200%201%201.265.332.75.75%200%200%201-.205.729l-.775.776c.616.63.995%201.493.995%202.444v.327q0%20.15-.025.292c.408.14.764.392%201.029.722l1.968-.787a.75.75%200%200%201%20.556%201.392L13%207.258V9h2.25a.75.75%200%200%201%200%201.5H13v.5q-.002.615-.141%201.186l2.17.868a.75.75%200%200%201-.557%201.392l-2.184-.873A5%205%200%200%201%208%2016a5%205%200%200%201-4.288-2.427l-2.183.873a.75.75%200%200%201-.558-1.392l2.17-.868A5%205%200%200%201%203%2011v-.5H.75a.75.75%200%200%201%200-1.5H3V7.258L.971%206.446a.75.75%200%200%201%20.558-1.392l1.967.787c.265-.33.62-.583%201.03-.722a1.7%201.7%200%200%201-.026-.292V4.5c0-.951.38-1.814.995-2.444L4.72%201.28a.75.75%200%200%201%200-1.06m.53%206.28a.75.75%200%200%200-.75.75V11a3.5%203.5%200%201%200%207%200V7.25a.75.75%200%200%200-.75-.75ZM6.173%205h3.654A.17.17%200%200%200%2010%204.827V4.5a2%202%200%201%200-4%200v.327c0%20.096.077.173.173.173%22/%3E%3C/svg%3E');--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5%205.782V2.5h-.25a.75.75%200%200%201%200-1.5h6.5a.75.75%200%200%201%200%201.5H11v3.282l3.666%205.76C15.619%2013.04%2014.543%2015%2012.767%2015H3.233c-1.776%200-2.852-1.96-1.899-3.458Zm-2.4%206.565a.75.75%200%200%200%20.633%201.153h9.534a.75.75%200%200%200%20.633-1.153L12.225%2010.5h-8.45ZM9.5%202.5h-3V6c0%20.143-.04.283-.117.403L4.73%209h6.54L9.617%206.403A.75.75%200%200%201%209.5%206Z%22/%3E%3C/svg%3E');--md-admonition-icon--quote:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M1.75%202.5h10.5a.75.75%200%200%201%200%201.5H1.75a.75.75%200%200%201%200-1.5m4%205h8.5a.75.75%200%200%201%200%201.5h-8.5a.75.75%200%200%201%200-1.5m0%205h8.5a.75.75%200%200%201%200%201.5h-8.5a.75.75%200%200%201%200-1.5M2.5%207.75v6a.75.75%200%200%201-1.5%200v-6a.75.75%200%200%201%201.5%200%22/%3E%3C/svg%3E');}</style>


  
  
  
  
  <style>:root{--md-annotation-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M12%203C6.5%203%202%206.6%202%2011c0%202.1%201%204.1%202.8%205.5%200%20.6-.4%202.2-2.8%204.5%200%200%203.5%200%206.5-2.5%201.1.3%202.3.5%203.5.5%205.5%200%2010-3.6%2010-8s-4.5-8-10-8m1%2012h-2v-2h2zm1.8-5c-.3.4-.7.6-1.1.8-.3.2-.4.3-.5.5-.2.2-.2.4-.2.7h-2c0-.5.1-.8.3-1.1.2-.2.6-.5%201.1-.8.3-.1.5-.3.6-.5s.2-.5.2-.7c0-.3-.1-.5-.3-.7s-.5-.3-.8-.3-.5.1-.7.2q-.3.15-.3.6h-2c.1-.7.4-1.3.9-1.7s1.2-.5%202.1-.5%201.7.2%202.2.6.8%201%20.8%201.7q.15.6-.3%201.2%22/%3E%3C/svg%3E');}</style>


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../../css/drawio-darkmode.css">
    
      <link rel="stylesheet" href="../../../../../assets/mkdocs_puml/puml.css">
    
      <link rel="stylesheet" href="../../../../../assets/mkdocs_puml/interaction.css">
    
      <link rel="stylesheet" href="../../../../../css/drawio-darkmode.css">
    
      <link rel="stylesheet" href="../../../../../assets/mkdocs_puml/puml.css">
    
      <link rel="stylesheet" href="../../../../../assets/mkdocs_puml/interaction.css">
    
    <script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#example-1-starting-a-tdb-cluster-without-configuration-definition" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../../" title="Tarantool Java SDK" class="md-header__button md-logo" aria-label="Tarantool Java SDK" data-md-component="logo">
      
  
  <svg width="52" height="52" viewBox="0 0 52 52" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M19.819 8.58729C22.8355 6.8491 24.3438 5.98 26 5.98C27.6562 5.98 29.1645 6.8491 32.181 8.58729L38.019 11.9512C41.0355 13.6894 42.5438 14.5585 43.3719 15.99C44.2 17.4215 44.2 19.1597 44.2 22.6361V29.3639C44.2 32.8403 44.2 34.5785 43.3719 36.01C42.5438 37.4415 41.0355 38.3106 38.019 40.0488L32.181 43.4127C29.1645 45.1509 27.6562 46.02 26 46.02C24.3438 46.02 22.8355 45.1509 19.819 43.4127L13.981 40.0488C10.9645 38.3106 9.45621 37.4415 8.6281 36.01C7.8 34.5785 7.8 32.8403 7.8 29.3639V22.6361C7.8 19.1597 7.8 17.4215 8.6281 15.99C9.45621 14.5585 10.9645 13.6894 13.981 11.9512L19.819 8.58729ZM18.46 18.98C18.0292 18.98 17.68 19.3292 17.68 19.76V22.5141C17.68 22.9449 18.0292 23.2941 18.46 23.2941H23.063C23.4937 23.2941 23.843 23.6433 23.843 24.0741V34.84C23.843 35.2708 24.1922 35.62 24.623 35.62H27.377C27.8078 35.62 28.157 35.2708 28.157 34.84V24.0741C28.157 23.6433 28.5063 23.2941 28.937 23.2941H33.54C33.9708 23.2941 34.32 22.9449 34.32 22.5141V19.76C34.32 19.3292 33.9708 18.98 33.54 18.98H18.46Z" fill="white"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M0 24.7213C0 13.0676 0 7.2407 3.62035 3.62035C7.2407 0 13.0676 0 24.7213 0H27.2787C38.9324 0 44.7593 0 48.3796 3.62035C52 7.2407 52 13.0676 52 24.7213V27.2787C52 38.9324 52 44.7593 48.3796 48.3796C44.7593 52 38.9324 52 27.2787 52H24.7213C13.0676 52 7.2407 52 3.62035 48.3796C0 44.7593 0 38.9324 0 27.2787V24.7213ZM24.7213 1.56H27.2787C33.1497 1.56 37.396 1.56331 40.6338 1.99863C43.8268 2.42792 45.8045 3.25142 47.2766 4.72344C48.7486 6.19546 49.5721 8.17319 50.0014 11.3662C50.4367 14.604 50.44 18.8503 50.44 24.7213V27.2787C50.44 33.1497 50.4367 37.396 50.0014 40.6338C49.5721 43.8268 48.7486 45.8045 47.2766 47.2766C45.8045 48.7486 43.8268 49.5721 40.6338 50.0014C37.396 50.4367 33.1497 50.44 27.2787 50.44H24.7213C18.8503 50.44 14.604 50.4367 11.3662 50.0014C8.17319 49.5721 6.19546 48.7486 4.72344 47.2766C3.25142 45.8045 2.42792 43.8268 1.99863 40.6338C1.56331 37.396 1.56 33.1497 1.56 27.2787V24.7213C1.56 18.8503 1.56331 14.604 1.99863 11.3662C2.42792 8.17319 3.25142 6.19546 4.72344 4.72344C6.19546 3.25142 8.17319 2.42792 11.3662 1.99863C14.604 1.56331 18.8503 1.56 24.7213 1.56Z" fill="white"/>
</svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Tarantool Java SDK
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Examples
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label=""  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label=""  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Select language">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="../../../../../pages/testcontainers/tdb/tdb2-cluster-testcontainers-standard-impl-example/" hreflang="ru" class="md-select__link">
              ðŸ‡·ðŸ‡º RU
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="./" hreflang="en" class="md-select__link">
              ðŸ‡ºðŸ‡¸ EN
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/tarantool/tarantool-java-sdk" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    tarantool/tarantool-java-sdk
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../" class="md-tabs__link">
          
  
  
    
  
  Home

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../../" class="md-tabs__link">
          
  
  
    
  
  Documentation

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../" title="Tarantool Java SDK" class="md-nav__button md-logo" aria-label="Tarantool Java SDK" data-md-component="logo">
      
  
  <svg width="52" height="52" viewBox="0 0 52 52" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M19.819 8.58729C22.8355 6.8491 24.3438 5.98 26 5.98C27.6562 5.98 29.1645 6.8491 32.181 8.58729L38.019 11.9512C41.0355 13.6894 42.5438 14.5585 43.3719 15.99C44.2 17.4215 44.2 19.1597 44.2 22.6361V29.3639C44.2 32.8403 44.2 34.5785 43.3719 36.01C42.5438 37.4415 41.0355 38.3106 38.019 40.0488L32.181 43.4127C29.1645 45.1509 27.6562 46.02 26 46.02C24.3438 46.02 22.8355 45.1509 19.819 43.4127L13.981 40.0488C10.9645 38.3106 9.45621 37.4415 8.6281 36.01C7.8 34.5785 7.8 32.8403 7.8 29.3639V22.6361C7.8 19.1597 7.8 17.4215 8.6281 15.99C9.45621 14.5585 10.9645 13.6894 13.981 11.9512L19.819 8.58729ZM18.46 18.98C18.0292 18.98 17.68 19.3292 17.68 19.76V22.5141C17.68 22.9449 18.0292 23.2941 18.46 23.2941H23.063C23.4937 23.2941 23.843 23.6433 23.843 24.0741V34.84C23.843 35.2708 24.1922 35.62 24.623 35.62H27.377C27.8078 35.62 28.157 35.2708 28.157 34.84V24.0741C28.157 23.6433 28.5063 23.2941 28.937 23.2941H33.54C33.9708 23.2941 34.32 22.9449 34.32 22.5141V19.76C34.32 19.3292 33.9708 18.98 33.54 18.98H18.46Z" fill="white"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M0 24.7213C0 13.0676 0 7.2407 3.62035 3.62035C7.2407 0 13.0676 0 24.7213 0H27.2787C38.9324 0 44.7593 0 48.3796 3.62035C52 7.2407 52 13.0676 52 24.7213V27.2787C52 38.9324 52 44.7593 48.3796 48.3796C44.7593 52 38.9324 52 27.2787 52H24.7213C13.0676 52 7.2407 52 3.62035 48.3796C0 44.7593 0 38.9324 0 27.2787V24.7213ZM24.7213 1.56H27.2787C33.1497 1.56 37.396 1.56331 40.6338 1.99863C43.8268 2.42792 45.8045 3.25142 47.2766 4.72344C48.7486 6.19546 49.5721 8.17319 50.0014 11.3662C50.4367 14.604 50.44 18.8503 50.44 24.7213V27.2787C50.44 33.1497 50.4367 37.396 50.0014 40.6338C49.5721 43.8268 48.7486 45.8045 47.2766 47.2766C45.8045 48.7486 43.8268 49.5721 40.6338 50.0014C37.396 50.4367 33.1497 50.44 27.2787 50.44H24.7213C18.8503 50.44 14.604 50.4367 11.3662 50.0014C8.17319 49.5721 6.19546 48.7486 4.72344 47.2766C3.25142 45.8045 2.42792 43.8268 1.99863 40.6338C1.56331 37.396 1.56 33.1497 1.56 27.2787V24.7213C1.56 18.8503 1.56331 14.604 1.99863 11.3662C2.42792 8.17319 3.25142 6.19546 4.72344 4.72344C6.19546 3.25142 8.17319 2.42792 11.3662 1.99863C14.604 1.56331 18.8503 1.56 24.7213 1.56Z" fill="white"/>
</svg>

    </a>
    Tarantool Java SDK
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/tarantool/tarantool-java-sdk" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    tarantool/tarantool-java-sdk
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Home
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Documentation
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Documentation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../spring-data/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Spring Data
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Spring Data
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../spring-data/configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Client Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../spring-data/repository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Repository API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../spring-data/derived-methods/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dynamic Queries
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../spring-data/sort/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Sorting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../spring-data/query-lua/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Stored Procedures
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../spring-data/page-slice-pageable/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pagination
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../spring-data/scroll-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pagination (Scroll API)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../client/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    High-Level Client
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    High-Level Client
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../client/arch/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_3_2" id="__nav_2_3_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Architecture
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../client/arch/high-level-arch/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Interaction with Tarantool Java SDK
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../client/arch/heartbeat/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Heartbeat Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../client/arch/balancer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Balancing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../client/arch/connection-pool/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Connection Pool
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../client/arch/instance-connection-group/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Connection Group
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../client/arch/exception-handling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Error Handling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../client/arch/connection-to-multiple-nodes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Connecting to Multiple Nodes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../client/arch/call/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Stored Procedures
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../client/arch/tuple_pojo_mapping/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Data Mapping
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../client/examples/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Usage examples
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_3_3" id="__nav_2_3_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Usage examples
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_3_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../client/examples/connection/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Connecting to nodes
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_3_3_2" id="__nav_2_3_3_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Connecting to nodes
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../client/examples/connection/single-node/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Connection to single instance Tarantool
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../client/examples/connection/crud-cluster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Connecting to Tarantool cluster via crud
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_3_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../client/examples/call/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Stored procedures
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_3_3_3" id="__nav_2_3_3_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_3_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Stored procedures
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../client/examples/call/call/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Interacting with stored procedures
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Tarantool Testcontainers
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Tarantool Testcontainers
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../single/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Single Node
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_4_2" id="__nav_2_4_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Single Node
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../single/single-node-testcontainers-arch/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../single/single-node-testcontainers-standard-impl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Standard Implementation of TarantoolContainer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../single/single-node-testcontainers-standard-impl-example/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Examples
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_3" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    TarantoolDB Cluster
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_4_3" id="__nav_2_4_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_4_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    TarantoolDB Cluster
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tdb-cluster-testcontainers-arch/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tdb2-cluster-testcontainers-standard-impl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Standard Implementation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Examples
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Examples
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#example-1-starting-a-tdb-cluster-without-configuration-definition" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example 1. Starting a TDB Cluster Without Configuration Definition
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example 1. Starting a TDB Cluster Without Configuration Definition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-starting-the-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 1. Starting the Cluster
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-applying-migrations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 2. Applying Migrations
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-2-starting-a-cluster-with-custom-settings" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example 2. Starting a Cluster with Custom Settings
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-3-starting-a-cluster-with-custom-settings" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example 3. Starting a Cluster with Custom Settings
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../tqe/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    TQE Cluster
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_4_4" id="__nav_2_4_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    TQE Cluster
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tqe/tqe-cluster-arch/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tqe/tqe-cluster-example/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Examples
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#example-1-starting-a-tdb-cluster-without-configuration-definition" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example 1. Starting a TDB Cluster Without Configuration Definition
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example 1. Starting a TDB Cluster Without Configuration Definition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-starting-the-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 1. Starting the Cluster
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-applying-migrations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 2. Applying Migrations
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-2-starting-a-cluster-with-custom-settings" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example 2. Starting a Cluster with Custom Settings
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-3-starting-a-cluster-with-custom-settings" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example 3. Starting a Cluster with Custom Settings
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
                



  


  <nav class="md-path" aria-label="Navigation" >
    <ol class="md-path__list">
      
        
  
  
    <li class="md-path__item">
      <a href="../../../../" class="md-path__link">
        
  <span class="md-ellipsis">
    About the Project
  </span>

      </a>
    </li>
  

      
      
        
  
  
    
    
      <li class="md-path__item">
        <a href="../../../" class="md-path__link">
          
  <span class="md-ellipsis">
    Documentation
  </span>

        </a>
      </li>
    
  

      
        
  
  
    
    
      <li class="md-path__item">
        <a href="../../" class="md-path__link">
          
  <span class="md-ellipsis">
    Tarantool Testcontainers
  </span>

        </a>
      </li>
    
  

      
        
  
  
    
    
      <li class="md-path__item">
        <a href="../" class="md-path__link">
          
  <span class="md-ellipsis">
    TarantoolDB Cluster
  </span>

        </a>
      </li>
    
  

      
    </ol>
  </nav>

              
              <article class="md-content__inner md-typeset">
                
                  


  
  


  <h1>Examples</h1>

<h2 id="example-1-starting-a-tdb-cluster-without-configuration-definition">Example 1. Starting a TDB Cluster Without Configuration Definition</h2>
<p>In this example, we consider the case of starting a <code>TDB 2.x</code> cluster with standard settings, defining the number of routers, shards, and replicas in them, without passing custom settings and migrations.</p>
<p>The standard configuration looks like this (generated automatically by the <code>TDB2Cluster</code> class):</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__spanz-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nn">---</span>
</span><span id="__spanz-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="nt">credentials</span><span class="p">:</span>
</span><span id="__spanz-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">  </span><span class="nt">users</span><span class="p">:</span>
</span><span id="__spanz-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">    </span><span class="nt">test-super</span><span class="p">:</span>
</span><span id="__spanz-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">      </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;test&quot;</span>
</span><span id="__spanz-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">      </span><span class="nt">roles</span><span class="p">:</span>
</span><span id="__spanz-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;super&quot;</span>
</span><span id="__spanz-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="w">    </span><span class="nt">storage</span><span class="p">:</span>
</span><span id="__spanz-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="w">      </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;secret&quot;</span>
</span><span id="__spanz-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="w">      </span><span class="nt">roles</span><span class="p">:</span>
</span><span id="__spanz-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;sharding&quot;</span>
</span><span id="__spanz-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="w">    </span><span class="nt">replicator</span><span class="p">:</span>
</span><span id="__spanz-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="w">      </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;secret&quot;</span>
</span><span id="__spanz-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="w">      </span><span class="nt">roles</span><span class="p">:</span>
</span><span id="__spanz-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;replication&quot;</span>
</span><span id="__spanz-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="nt">groups</span><span class="p">:</span>
</span><span id="__spanz-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="w">  </span><span class="c1"># Routers group  </span>
</span><span id="__spanz-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="w">  </span><span class="nt">routers</span><span class="p">:</span>
</span><span id="__spanz-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="w">    </span><span class="c1"># The number of router instances varies depending on the `routerCount` parameter</span>
</span><span id="__spanz-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="w">    </span><span class="nt">replicasets</span><span class="p">:</span>
</span><span id="__spanz-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a><span class="w">      </span><span class="nt">router-1</span><span class="p">:</span>
</span><span id="__spanz-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a><span class="w">        </span><span class="nt">leader</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;router-1&quot;</span>
</span><span id="__spanz-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a><span class="w">        </span><span class="nt">instances</span><span class="p">:</span>
</span><span id="__spanz-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a><span class="w">          </span><span class="c1"># &lt;instance_name&gt;</span>
</span><span id="__spanz-0-25"><a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a><span class="w">          </span><span class="nt">router-0</span><span class="p">:</span>
</span><span id="__spanz-0-26"><a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a><span class="w">            </span><span class="nt">iproto</span><span class="p">:</span>
</span><span id="__spanz-0-27"><a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a><span class="w">              </span><span class="nt">listen</span><span class="p">:</span>
</span><span id="__spanz-0-28"><a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a><span class="w">                </span><span class="c1"># hostname must be identical to &lt;instance_name&gt;</span>
</span><span id="__spanz-0-29"><a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a><span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uri</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;router-1:3301&quot;</span>
</span><span id="__spanz-0-30"><a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a><span class="w">              </span><span class="nt">advertise</span><span class="p">:</span>
</span><span id="__spanz-0-31"><a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a><span class="w">                </span><span class="nt">client</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;router-1:3301&quot;</span>
</span><span id="__spanz-0-32"><a id="__codelineno-0-32" name="__codelineno-0-32" href="#__codelineno-0-32"></a><span class="w">    </span><span class="nt">replication</span><span class="p">:</span>
</span><span id="__spanz-0-33"><a id="__codelineno-0-33" name="__codelineno-0-33" href="#__codelineno-0-33"></a><span class="w">      </span><span class="nt">failover</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;manual&quot;</span>
</span><span id="__spanz-0-34"><a id="__codelineno-0-34" name="__codelineno-0-34" href="#__codelineno-0-34"></a><span class="w">    </span><span class="nt">roles</span><span class="p">:</span>
</span><span id="__spanz-0-35"><a id="__codelineno-0-35" name="__codelineno-0-35" href="#__codelineno-0-35"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;roles.crud-router&quot;</span>
</span><span id="__spanz-0-36"><a id="__codelineno-0-36" name="__codelineno-0-36" href="#__codelineno-0-36"></a><span class="w">    </span><span class="nt">sharding</span><span class="p">:</span>
</span><span id="__spanz-0-37"><a id="__codelineno-0-37" name="__codelineno-0-37" href="#__codelineno-0-37"></a><span class="w">      </span><span class="nt">roles</span><span class="p">:</span>
</span><span id="__spanz-0-38"><a id="__codelineno-0-38" name="__codelineno-0-38" href="#__codelineno-0-38"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;router&quot;</span>
</span><span id="__spanz-0-39"><a id="__codelineno-0-39" name="__codelineno-0-39" href="#__codelineno-0-39"></a><span class="w">  </span><span class="nt">storages</span><span class="p">:</span>
</span><span id="__spanz-0-40"><a id="__codelineno-0-40" name="__codelineno-0-40" href="#__codelineno-0-40"></a><span class="w">    </span><span class="c1"># Shard count determined by the `shardCount` parameter   </span>
</span><span id="__spanz-0-41"><a id="__codelineno-0-41" name="__codelineno-0-41" href="#__codelineno-0-41"></a><span class="w">    </span><span class="nt">replicasets</span><span class="p">:</span>
</span><span id="__spanz-0-42"><a id="__codelineno-0-42" name="__codelineno-0-42" href="#__codelineno-0-42"></a><span class="w">      </span><span class="c1"># description: replicaset-1</span>
</span><span id="__spanz-0-43"><a id="__codelineno-0-43" name="__codelineno-0-43" href="#__codelineno-0-43"></a><span class="w">      </span><span class="nt">r1</span><span class="p">:</span>
</span><span id="__spanz-0-44"><a id="__codelineno-0-44" name="__codelineno-0-44" href="#__codelineno-0-44"></a><span class="w">        </span><span class="c1"># Replica count determined by the `replicaCount` parameter</span>
</span><span id="__spanz-0-45"><a id="__codelineno-0-45" name="__codelineno-0-45" href="#__codelineno-0-45"></a><span class="w">        </span><span class="nt">instances</span><span class="p">:</span>
</span><span id="__spanz-0-46"><a id="__codelineno-0-46" name="__codelineno-0-46" href="#__codelineno-0-46"></a><span class="w">          </span><span class="c1"># description: replicaset-1 storage-1</span>
</span><span id="__spanz-0-47"><a id="__codelineno-0-47" name="__codelineno-0-47" href="#__codelineno-0-47"></a><span class="w">          </span><span class="nt">r1-s1</span><span class="p">:</span>
</span><span id="__spanz-0-48"><a id="__codelineno-0-48" name="__codelineno-0-48" href="#__codelineno-0-48"></a><span class="w">            </span><span class="nt">iproto</span><span class="p">:</span>
</span><span id="__spanz-0-49"><a id="__codelineno-0-49" name="__codelineno-0-49" href="#__codelineno-0-49"></a><span class="w">              </span><span class="nt">listen</span><span class="p">:</span>
</span><span id="__spanz-0-50"><a id="__codelineno-0-50" name="__codelineno-0-50" href="#__codelineno-0-50"></a><span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uri</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;r1-s1:3301&quot;</span>
</span><span id="__spanz-0-51"><a id="__codelineno-0-51" name="__codelineno-0-51" href="#__codelineno-0-51"></a><span class="w">              </span><span class="nt">advertise</span><span class="p">:</span>
</span><span id="__spanz-0-52"><a id="__codelineno-0-52" name="__codelineno-0-52" href="#__codelineno-0-52"></a><span class="w">                </span><span class="nt">client</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;r1-s1:3301&quot;</span>
</span><span id="__spanz-0-53"><a id="__codelineno-0-53" name="__codelineno-0-53" href="#__codelineno-0-53"></a><span class="w">    </span><span class="nt">replication</span><span class="p">:</span>
</span><span id="__spanz-0-54"><a id="__codelineno-0-54" name="__codelineno-0-54" href="#__codelineno-0-54"></a><span class="w">      </span><span class="nt">failover</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;election&quot;</span>
</span><span id="__spanz-0-55"><a id="__codelineno-0-55" name="__codelineno-0-55" href="#__codelineno-0-55"></a><span class="w">    </span><span class="nt">roles</span><span class="p">:</span>
</span><span id="__spanz-0-56"><a id="__codelineno-0-56" name="__codelineno-0-56" href="#__codelineno-0-56"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;roles.crud-storage&quot;</span>
</span><span id="__spanz-0-57"><a id="__codelineno-0-57" name="__codelineno-0-57" href="#__codelineno-0-57"></a><span class="w">    </span><span class="nt">sharding</span><span class="p">:</span>
</span><span id="__spanz-0-58"><a id="__codelineno-0-58" name="__codelineno-0-58" href="#__codelineno-0-58"></a><span class="w">      </span><span class="nt">roles</span><span class="p">:</span>
</span><span id="__spanz-0-59"><a id="__codelineno-0-59" name="__codelineno-0-59" href="#__codelineno-0-59"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;storage&quot;</span>
</span><span id="__spanz-0-60"><a id="__codelineno-0-60" name="__codelineno-0-60" href="#__codelineno-0-60"></a><span class="nt">iproto</span><span class="p">:</span>
</span><span id="__spanz-0-61"><a id="__codelineno-0-61" name="__codelineno-0-61" href="#__codelineno-0-61"></a><span class="w">  </span><span class="nt">advertise</span><span class="p">:</span>
</span><span id="__spanz-0-62"><a id="__codelineno-0-62" name="__codelineno-0-62" href="#__codelineno-0-62"></a><span class="w">    </span><span class="nt">peer</span><span class="p">:</span>
</span><span id="__spanz-0-63"><a id="__codelineno-0-63" name="__codelineno-0-63" href="#__codelineno-0-63"></a><span class="w">      </span><span class="nt">login</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;replicator&quot;</span>
</span><span id="__spanz-0-64"><a id="__codelineno-0-64" name="__codelineno-0-64" href="#__codelineno-0-64"></a><span class="w">    </span><span class="nt">sharding</span><span class="p">:</span>
</span><span id="__spanz-0-65"><a id="__codelineno-0-65" name="__codelineno-0-65" href="#__codelineno-0-65"></a><span class="w">      </span><span class="nt">login</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;storage&quot;</span>
</span></code></pre></div>
<h3 id="step-1-starting-the-cluster">Step 1. Starting the Cluster</h3>
<p>In this step, we demonstrate the simplest way to start a TDB 2.x cluster by specifying the number of different cluster components (routers, shards, replicas) without passing custom settings and migrations.</p>
<div class="language-java highlight"><pre><span></span><code><span id="__spanz-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Arrays</span><span class="p">;</span>
</span><span id="__spanz-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Collections</span><span class="p">;</span>
</span><span id="__spanz-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>
</span><span id="__spanz-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
</span><span id="__spanz-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="kn">import</span><span class="w"> </span><span class="nn">com.github.dockerjava.api.DockerClient</span><span class="p">;</span>
</span><span id="__spanz-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="kn">import</span><span class="w"> </span><span class="nn">com.github.dockerjava.api.model.Container</span><span class="p">;</span>
</span><span id="__spanz-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.Test</span><span class="p">;</span>
</span><span id="__spanz-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.slf4j.Logger</span><span class="p">;</span>
</span><span id="__spanz-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.slf4j.LoggerFactory</span><span class="p">;</span>
</span><span id="__spanz-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.testcontainers.DockerClientFactory</span><span class="p">;</span>
</span><span id="__spanz-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.testcontainers.containers.tdb.TDB2ClusterImpl</span><span class="p">;</span>
</span><span id="__spanz-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.testcontainers.containers.tdb.TDBCluster</span><span class="p">;</span>
</span><span id="__spanz-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>
</span><span id="__spanz-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">TestClass</span><span class="w"> </span><span class="p">{</span>
</span><span id="__spanz-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>
</span><span id="__spanz-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Logger</span><span class="w"> </span><span class="n">LOG</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LoggerFactory</span><span class="p">.</span><span class="na">getLogger</span><span class="p">(</span><span class="n">TestClass</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
</span><span id="__spanz-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>
</span><span id="__spanz-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a><span class="w">  </span><span class="nd">@Test</span>
</span><span id="__spanz-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">testSimpleClusterWithoutMigrations</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__spanz-1-20"><a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">(</span><span class="n">TDBCluster</span><span class="w"> </span><span class="n">cluster</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TDB2ClusterImpl</span><span class="p">.</span><span class="na">builder</span><span class="p">(</span><span class="s">&quot;tarantooldb:2.2.1&quot;</span><span class="p">)</span>
</span><span id="__spanz-1-21"><a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a><span class="w">        </span><span class="p">.</span><span class="na">withRouterCount</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__spanz-1-22"><a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a><span class="w">        </span><span class="p">.</span><span class="na">withShardCount</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span><span id="__spanz-1-23"><a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a><span class="w">        </span><span class="p">.</span><span class="na">withReplicaCount</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span><span id="__spanz-1-24"><a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a><span class="w">        </span><span class="p">.</span><span class="na">build</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__spanz-1-25"><a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a>
</span><span id="__spanz-1-26"><a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a><span class="w">      </span><span class="n">cluster</span><span class="p">.</span><span class="na">start</span><span class="p">();</span>
</span><span id="__spanz-1-27"><a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a><span class="w">      </span><span class="kd">final</span><span class="w"> </span><span class="n">DockerClient</span><span class="w"> </span><span class="n">dockerClient</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DockerClientFactory</span><span class="p">.</span><span class="na">instance</span><span class="p">().</span><span class="na">client</span><span class="p">();</span>
</span><span id="__spanz-1-28"><a id="__codelineno-1-28" name="__codelineno-1-28" href="#__codelineno-1-28"></a>
</span><span id="__spanz-1-29"><a id="__codelineno-1-29" name="__codelineno-1-29" href="#__codelineno-1-29"></a><span class="w">      </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Container</span><span class="o">&gt;</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dockerClient</span><span class="p">.</span><span class="na">listContainersCmd</span><span class="p">()</span>
</span><span id="__spanz-1-30"><a id="__codelineno-1-30" name="__codelineno-1-30" href="#__codelineno-1-30"></a><span class="w">          </span><span class="p">.</span><span class="na">withStatusFilter</span><span class="p">(</span><span class="n">Collections</span><span class="p">.</span><span class="na">singletonList</span><span class="p">(</span><span class="s">&quot;running&quot;</span><span class="p">)).</span><span class="na">exec</span><span class="p">();</span>
</span><span id="__spanz-1-31"><a id="__codelineno-1-31" name="__codelineno-1-31" href="#__codelineno-1-31"></a><span class="w">      </span><span class="n">running</span><span class="p">.</span><span class="na">forEach</span><span class="p">(</span>
</span><span id="__spanz-1-32"><a id="__codelineno-1-32" name="__codelineno-1-32" href="#__codelineno-1-32"></a><span class="w">          </span><span class="n">c</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">LOG</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&quot;\n\t---\n\tID: {}\n\tImage: {}\n\tStatus: {}\n\tNames: {}\n\t---&quot;</span><span class="p">,</span>
</span><span id="__spanz-1-33"><a id="__codelineno-1-33" name="__codelineno-1-33" href="#__codelineno-1-33"></a><span class="w">              </span><span class="n">c</span><span class="p">.</span><span class="na">getImage</span><span class="p">(),</span><span class="w"> </span><span class="n">c</span><span class="p">.</span><span class="na">getImage</span><span class="p">(),</span>
</span><span id="__spanz-1-34"><a id="__codelineno-1-34" name="__codelineno-1-34" href="#__codelineno-1-34"></a><span class="w">              </span><span class="n">c</span><span class="p">.</span><span class="na">getStatus</span><span class="p">(),</span><span class="w"> </span><span class="n">Arrays</span><span class="p">.</span><span class="na">toString</span><span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="na">getNames</span><span class="p">())));</span>
</span><span id="__spanz-1-35"><a id="__codelineno-1-35" name="__codelineno-1-35" href="#__codelineno-1-35"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__spanz-1-36"><a id="__codelineno-1-36" name="__codelineno-1-36" href="#__codelineno-1-36"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__spanz-1-37"><a id="__codelineno-1-37" name="__codelineno-1-37" href="#__codelineno-1-37"></a><span class="p">}</span>
</span></code></pre></div>
<p>As a result of the execution, you should get the following logs:</p>
<div class="language-java highlight"><pre><span></span><code><span id="__spanz-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="p">...</span>
</span><span id="__spanz-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="mi">14</span><span class="p">:</span><span class="mi">20</span><span class="p">:</span><span class="mf">18.280</span><span class="w"> </span><span class="o">[</span><span class="n">main</span><span class="o">]</span><span class="w"> </span><span class="n">INFO</span><span class="w">  </span><span class="n">o</span><span class="p">.</span><span class="na">t</span><span class="p">.</span><span class="na">c</span><span class="p">.</span><span class="na">tdb</span><span class="p">.</span><span class="na">TDB2ClusterImplTest</span><span class="w"> </span><span class="o">-</span><span class="w"> </span>
</span><span id="__spanz-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">    </span><span class="o">---</span>
</span><span id="__spanz-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">    </span><span class="n">ID</span><span class="p">:</span><span class="w"> </span><span class="n">tarantooldb</span><span class="p">:</span><span class="mf">2.2.1</span>
</span><span id="__spanz-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">    </span><span class="n">Image</span><span class="p">:</span><span class="w"> </span><span class="n">tarantooldb</span><span class="p">:</span><span class="mf">2.2.1</span>
</span><span id="__spanz-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">    </span><span class="n">Status</span><span class="p">:</span><span class="w"> </span><span class="n">Up</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="n">seconds</span>
</span><span id="__spanz-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="w">    </span><span class="n">Names</span><span class="p">:</span><span class="w"> </span><span class="o">[/</span><span class="n">r2</span><span class="o">-</span><span class="n">s2</span><span class="o">-</span><span class="n">de28a37f</span><span class="o">-</span><span class="n">cf2d</span><span class="o">-</span><span class="mi">4420</span><span class="o">-</span><span class="mf">9e23</span><span class="o">-</span><span class="n">ffb2bcab5892</span><span class="o">]</span>
</span><span id="__spanz-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="w">    </span><span class="o">---</span>
</span><span id="__spanz-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="mi">14</span><span class="p">:</span><span class="mi">20</span><span class="p">:</span><span class="mf">18.280</span><span class="w"> </span><span class="o">[</span><span class="n">main</span><span class="o">]</span><span class="w"> </span><span class="n">INFO</span><span class="w">  </span><span class="n">o</span><span class="p">.</span><span class="na">t</span><span class="p">.</span><span class="na">c</span><span class="p">.</span><span class="na">tdb</span><span class="p">.</span><span class="na">TDB2ClusterImplTest</span><span class="w"> </span><span class="o">-</span><span class="w"> </span>
</span><span id="__spanz-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="w">    </span><span class="o">---</span>
</span><span id="__spanz-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="w">    </span><span class="n">ID</span><span class="p">:</span><span class="w"> </span><span class="n">tarantooldb</span><span class="p">:</span><span class="mf">2.2.1</span>
</span><span id="__spanz-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="w">    </span><span class="n">Image</span><span class="p">:</span><span class="w"> </span><span class="n">tarantooldb</span><span class="p">:</span><span class="mf">2.2.1</span>
</span><span id="__spanz-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="w">    </span><span class="n">Status</span><span class="p">:</span><span class="w"> </span><span class="n">Up</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="n">seconds</span>
</span><span id="__spanz-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="w">    </span><span class="n">Names</span><span class="p">:</span><span class="w"> </span><span class="o">[/</span><span class="n">router</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="n">de28a37f</span><span class="o">-</span><span class="n">cf2d</span><span class="o">-</span><span class="mi">4420</span><span class="o">-</span><span class="mf">9e23</span><span class="o">-</span><span class="n">ffb2bcab5892</span><span class="o">]</span>
</span><span id="__spanz-2-15"><a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a><span class="w">    </span><span class="o">---</span>
</span><span id="__spanz-2-16"><a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a><span class="mi">14</span><span class="p">:</span><span class="mi">20</span><span class="p">:</span><span class="mf">18.280</span><span class="w"> </span><span class="o">[</span><span class="n">main</span><span class="o">]</span><span class="w"> </span><span class="n">INFO</span><span class="w">  </span><span class="n">o</span><span class="p">.</span><span class="na">t</span><span class="p">.</span><span class="na">c</span><span class="p">.</span><span class="na">tdb</span><span class="p">.</span><span class="na">TDB2ClusterImplTest</span><span class="w"> </span><span class="o">-</span><span class="w"> </span>
</span><span id="__spanz-2-17"><a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a><span class="w">    </span><span class="o">---</span>
</span><span id="__spanz-2-18"><a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a><span class="w">    </span><span class="n">ID</span><span class="p">:</span><span class="w"> </span><span class="n">tarantooldb</span><span class="p">:</span><span class="mf">2.2.1</span>
</span><span id="__spanz-2-19"><a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a><span class="w">    </span><span class="n">Image</span><span class="p">:</span><span class="w"> </span><span class="n">tarantooldb</span><span class="p">:</span><span class="mf">2.2.1</span>
</span><span id="__spanz-2-20"><a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a><span class="w">    </span><span class="n">Status</span><span class="p">:</span><span class="w"> </span><span class="n">Up</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="n">seconds</span>
</span><span id="__spanz-2-21"><a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a><span class="w">    </span><span class="n">Names</span><span class="p">:</span><span class="w"> </span><span class="o">[/</span><span class="n">r1</span><span class="o">-</span><span class="n">s2</span><span class="o">-</span><span class="n">de28a37f</span><span class="o">-</span><span class="n">cf2d</span><span class="o">-</span><span class="mi">4420</span><span class="o">-</span><span class="mf">9e23</span><span class="o">-</span><span class="n">ffb2bcab5892</span><span class="o">]</span>
</span><span id="__spanz-2-22"><a id="__codelineno-2-22" name="__codelineno-2-22" href="#__codelineno-2-22"></a><span class="w">    </span><span class="o">---</span>
</span><span id="__spanz-2-23"><a id="__codelineno-2-23" name="__codelineno-2-23" href="#__codelineno-2-23"></a><span class="mi">14</span><span class="p">:</span><span class="mi">20</span><span class="p">:</span><span class="mf">18.280</span><span class="w"> </span><span class="o">[</span><span class="n">main</span><span class="o">]</span><span class="w"> </span><span class="n">INFO</span><span class="w">  </span><span class="n">o</span><span class="p">.</span><span class="na">t</span><span class="p">.</span><span class="na">c</span><span class="p">.</span><span class="na">tdb</span><span class="p">.</span><span class="na">TDB2ClusterImplTest</span><span class="w"> </span><span class="o">-</span><span class="w"> </span>
</span><span id="__spanz-2-24"><a id="__codelineno-2-24" name="__codelineno-2-24" href="#__codelineno-2-24"></a><span class="w">    </span><span class="o">---</span>
</span><span id="__spanz-2-25"><a id="__codelineno-2-25" name="__codelineno-2-25" href="#__codelineno-2-25"></a><span class="w">    </span><span class="n">ID</span><span class="p">:</span><span class="w"> </span><span class="n">tarantooldb</span><span class="p">:</span><span class="mf">2.2.1</span>
</span><span id="__spanz-2-26"><a id="__codelineno-2-26" name="__codelineno-2-26" href="#__codelineno-2-26"></a><span class="w">    </span><span class="n">Image</span><span class="p">:</span><span class="w"> </span><span class="n">tarantooldb</span><span class="p">:</span><span class="mf">2.2.1</span>
</span><span id="__spanz-2-27"><a id="__codelineno-2-27" name="__codelineno-2-27" href="#__codelineno-2-27"></a><span class="w">    </span><span class="n">Status</span><span class="p">:</span><span class="w"> </span><span class="n">Up</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="n">seconds</span>
</span><span id="__spanz-2-28"><a id="__codelineno-2-28" name="__codelineno-2-28" href="#__codelineno-2-28"></a><span class="w">    </span><span class="n">Names</span><span class="p">:</span><span class="w"> </span><span class="o">[/</span><span class="n">r2</span><span class="o">-</span><span class="n">s1</span><span class="o">-</span><span class="n">de28a37f</span><span class="o">-</span><span class="n">cf2d</span><span class="o">-</span><span class="mi">4420</span><span class="o">-</span><span class="mf">9e23</span><span class="o">-</span><span class="n">ffb2bcab5892</span><span class="o">]</span>
</span><span id="__spanz-2-29"><a id="__codelineno-2-29" name="__codelineno-2-29" href="#__codelineno-2-29"></a><span class="w">    </span><span class="o">---</span>
</span><span id="__spanz-2-30"><a id="__codelineno-2-30" name="__codelineno-2-30" href="#__codelineno-2-30"></a><span class="mi">14</span><span class="p">:</span><span class="mi">20</span><span class="p">:</span><span class="mf">18.280</span><span class="w"> </span><span class="o">[</span><span class="n">main</span><span class="o">]</span><span class="w"> </span><span class="n">INFO</span><span class="w">  </span><span class="n">o</span><span class="p">.</span><span class="na">t</span><span class="p">.</span><span class="na">c</span><span class="p">.</span><span class="na">tdb</span><span class="p">.</span><span class="na">TDB2ClusterImplTest</span><span class="w"> </span><span class="o">-</span><span class="w"> </span>
</span><span id="__spanz-2-31"><a id="__codelineno-2-31" name="__codelineno-2-31" href="#__codelineno-2-31"></a><span class="w">    </span><span class="o">---</span>
</span><span id="__spanz-2-32"><a id="__codelineno-2-32" name="__codelineno-2-32" href="#__codelineno-2-32"></a><span class="w">    </span><span class="n">ID</span><span class="p">:</span><span class="w"> </span><span class="n">tarantooldb</span><span class="p">:</span><span class="mf">2.2.1</span>
</span><span id="__spanz-2-33"><a id="__codelineno-2-33" name="__codelineno-2-33" href="#__codelineno-2-33"></a><span class="w">    </span><span class="n">Image</span><span class="p">:</span><span class="w"> </span><span class="n">tarantooldb</span><span class="p">:</span><span class="mf">2.2.1</span>
</span><span id="__spanz-2-34"><a id="__codelineno-2-34" name="__codelineno-2-34" href="#__codelineno-2-34"></a><span class="w">    </span><span class="n">Status</span><span class="p">:</span><span class="w"> </span><span class="n">Up</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="n">seconds</span>
</span><span id="__spanz-2-35"><a id="__codelineno-2-35" name="__codelineno-2-35" href="#__codelineno-2-35"></a><span class="w">    </span><span class="n">Names</span><span class="p">:</span><span class="w"> </span><span class="o">[/</span><span class="n">r1</span><span class="o">-</span><span class="n">s1</span><span class="o">-</span><span class="n">de28a37f</span><span class="o">-</span><span class="n">cf2d</span><span class="o">-</span><span class="mi">4420</span><span class="o">-</span><span class="mf">9e23</span><span class="o">-</span><span class="n">ffb2bcab5892</span><span class="o">]</span>
</span><span id="__spanz-2-36"><a id="__codelineno-2-36" name="__codelineno-2-36" href="#__codelineno-2-36"></a><span class="w">    </span><span class="o">---</span>
</span><span id="__spanz-2-37"><a id="__codelineno-2-37" name="__codelineno-2-37" href="#__codelineno-2-37"></a><span class="mi">14</span><span class="p">:</span><span class="mi">20</span><span class="p">:</span><span class="mf">18.280</span><span class="w"> </span><span class="o">[</span><span class="n">main</span><span class="o">]</span><span class="w"> </span><span class="n">INFO</span><span class="w">  </span><span class="n">o</span><span class="p">.</span><span class="na">t</span><span class="p">.</span><span class="na">c</span><span class="p">.</span><span class="na">tdb</span><span class="p">.</span><span class="na">TDB2ClusterImplTest</span><span class="w"> </span><span class="o">-</span><span class="w"> </span>
</span><span id="__spanz-2-38"><a id="__codelineno-2-38" name="__codelineno-2-38" href="#__codelineno-2-38"></a><span class="w">    </span><span class="o">---</span>
</span><span id="__spanz-2-39"><a id="__codelineno-2-39" name="__codelineno-2-39" href="#__codelineno-2-39"></a><span class="w">    </span><span class="n">ID</span><span class="p">:</span><span class="w"> </span><span class="n">tarantooldb</span><span class="p">:</span><span class="mf">2.2.1</span>
</span><span id="__spanz-2-40"><a id="__codelineno-2-40" name="__codelineno-2-40" href="#__codelineno-2-40"></a><span class="w">    </span><span class="n">Image</span><span class="p">:</span><span class="w"> </span><span class="n">tarantooldb</span><span class="p">:</span><span class="mf">2.2.1</span>
</span><span id="__spanz-2-41"><a id="__codelineno-2-41" name="__codelineno-2-41" href="#__codelineno-2-41"></a><span class="w">    </span><span class="n">Status</span><span class="p">:</span><span class="w"> </span><span class="n">Up</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="n">seconds</span>
</span><span id="__spanz-2-42"><a id="__codelineno-2-42" name="__codelineno-2-42" href="#__codelineno-2-42"></a><span class="w">    </span><span class="n">Names</span><span class="p">:</span><span class="w"> </span><span class="o">[/</span><span class="n">TCM</span><span class="o">-</span><span class="n">de28a37f</span><span class="o">-</span><span class="n">cf2d</span><span class="o">-</span><span class="mi">4420</span><span class="o">-</span><span class="mf">9e23</span><span class="o">-</span><span class="n">ffb2bcab5892</span><span class="o">]</span>
</span><span id="__spanz-2-43"><a id="__codelineno-2-43" name="__codelineno-2-43" href="#__codelineno-2-43"></a><span class="w">    </span><span class="o">---</span>
</span><span id="__spanz-2-44"><a id="__codelineno-2-44" name="__codelineno-2-44" href="#__codelineno-2-44"></a><span class="mi">14</span><span class="p">:</span><span class="mi">20</span><span class="p">:</span><span class="mf">18.280</span><span class="w"> </span><span class="o">[</span><span class="n">main</span><span class="o">]</span><span class="w"> </span><span class="n">INFO</span><span class="w">  </span><span class="n">o</span><span class="p">.</span><span class="na">t</span><span class="p">.</span><span class="na">c</span><span class="p">.</span><span class="na">tdb</span><span class="p">.</span><span class="na">TDB2ClusterImplTest</span><span class="w"> </span><span class="o">-</span><span class="w"> </span>
</span><span id="__spanz-2-45"><a id="__codelineno-2-45" name="__codelineno-2-45" href="#__codelineno-2-45"></a><span class="w">    </span><span class="o">---</span>
</span><span id="__spanz-2-46"><a id="__codelineno-2-46" name="__codelineno-2-46" href="#__codelineno-2-46"></a><span class="w">    </span><span class="n">ID</span><span class="p">:</span><span class="w"> </span><span class="n">quay</span><span class="p">.</span><span class="na">io</span><span class="o">/</span><span class="n">coreos</span><span class="o">/</span><span class="n">etcd</span><span class="p">:</span><span class="n">v3</span><span class="mf">.5.14</span>
</span><span id="__spanz-2-47"><a id="__codelineno-2-47" name="__codelineno-2-47" href="#__codelineno-2-47"></a><span class="w">    </span><span class="n">Image</span><span class="p">:</span><span class="w"> </span><span class="n">quay</span><span class="p">.</span><span class="na">io</span><span class="o">/</span><span class="n">coreos</span><span class="o">/</span><span class="n">etcd</span><span class="p">:</span><span class="n">v3</span><span class="mf">.5.14</span>
</span><span id="__spanz-2-48"><a id="__codelineno-2-48" name="__codelineno-2-48" href="#__codelineno-2-48"></a><span class="w">    </span><span class="n">Status</span><span class="p">:</span><span class="w"> </span><span class="n">Up</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="n">seconds</span>
</span><span id="__spanz-2-49"><a id="__codelineno-2-49" name="__codelineno-2-49" href="#__codelineno-2-49"></a><span class="w">    </span><span class="n">Names</span><span class="p">:</span><span class="w"> </span><span class="o">[/</span><span class="n">ETCD</span><span class="o">-</span><span class="n">de28a37f</span><span class="o">-</span><span class="n">cf2d</span><span class="o">-</span><span class="mi">4420</span><span class="o">-</span><span class="mf">9e23</span><span class="o">-</span><span class="n">ffb2bcab5892</span><span class="o">]</span>
</span><span id="__spanz-2-50"><a id="__codelineno-2-50" name="__codelineno-2-50" href="#__codelineno-2-50"></a><span class="w">    </span><span class="o">---</span>
</span><span id="__spanz-2-51"><a id="__codelineno-2-51" name="__codelineno-2-51" href="#__codelineno-2-51"></a><span class="mi">14</span><span class="p">:</span><span class="mi">20</span><span class="p">:</span><span class="mf">18.280</span><span class="w"> </span><span class="o">[</span><span class="n">main</span><span class="o">]</span><span class="w"> </span><span class="n">INFO</span><span class="w">  </span><span class="n">o</span><span class="p">.</span><span class="na">t</span><span class="p">.</span><span class="na">c</span><span class="p">.</span><span class="na">tdb</span><span class="p">.</span><span class="na">TDB2ClusterImplTest</span><span class="w"> </span><span class="o">-</span><span class="w"> </span>
</span><span id="__spanz-2-52"><a id="__codelineno-2-52" name="__codelineno-2-52" href="#__codelineno-2-52"></a><span class="w">    </span><span class="o">---</span>
</span><span id="__spanz-2-53"><a id="__codelineno-2-53" name="__codelineno-2-53" href="#__codelineno-2-53"></a><span class="w">    </span><span class="n">ID</span><span class="p">:</span><span class="w"> </span><span class="n">testcontainers</span><span class="o">/</span><span class="n">ryuk</span><span class="p">:</span><span class="mf">0.11.0</span>
</span><span id="__spanz-2-54"><a id="__codelineno-2-54" name="__codelineno-2-54" href="#__codelineno-2-54"></a><span class="w">    </span><span class="n">Image</span><span class="p">:</span><span class="w"> </span><span class="n">testcontainers</span><span class="o">/</span><span class="n">ryuk</span><span class="p">:</span><span class="mf">0.11.0</span>
</span><span id="__spanz-2-55"><a id="__codelineno-2-55" name="__codelineno-2-55" href="#__codelineno-2-55"></a><span class="w">    </span><span class="n">Status</span><span class="p">:</span><span class="w"> </span><span class="n">Up</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="n">seconds</span>
</span><span id="__spanz-2-56"><a id="__codelineno-2-56" name="__codelineno-2-56" href="#__codelineno-2-56"></a><span class="w">    </span><span class="n">Names</span><span class="p">:</span><span class="w"> </span><span class="o">[/</span><span class="n">testcontainers</span><span class="o">-</span><span class="n">ryuk</span><span class="o">-</span><span class="n">bc5fcb58</span><span class="o">-</span><span class="n">e84a</span><span class="o">-</span><span class="mi">443</span><span class="n">c</span><span class="o">-</span><span class="n">b819</span><span class="o">-</span><span class="mi">92</span><span class="n">c0ebeab6ff</span><span class="o">]</span>
</span><span id="__spanz-2-57"><a id="__codelineno-2-57" name="__codelineno-2-57" href="#__codelineno-2-57"></a><span class="w">    </span><span class="o">---</span>
</span><span id="__spanz-2-58"><a id="__codelineno-2-58" name="__codelineno-2-58" href="#__codelineno-2-58"></a><span class="p">...</span>
</span></code></pre></div>
<h3 id="step-2-applying-migrations">Step 2. Applying Migrations</h3>
<p>In this step, we demonstrate how to apply migrations in a test cluster. The TDB 2.x cluster topology is the same as in the previous example.</p>
<p>First, let's define the migrations. To do this, create a directory <code>migrations/scenario</code> (in an arbitrary location). In the <code>migrations/scenario</code> directory, define the migration <code>001_kv.lua</code>:</p>
<div class="language-lua highlight"><pre><span></span><code><span id="__spanz-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="kd">local</span><span class="w"> </span><span class="nv">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">require</span><span class="p">(</span><span class="s1">&#39;config&#39;</span><span class="p">)</span>
</span><span id="__spanz-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">helpers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">require</span><span class="p">(</span><span class="s1">&#39;tt-migrations.helpers&#39;</span><span class="p">)</span>
</span><span id="__spanz-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="kd">local</span><span class="w"> </span><span class="nv">fun</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">require</span><span class="p">(</span><span class="s1">&#39;fun&#39;</span><span class="p">)</span>
</span><span id="__spanz-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>
</span><span id="__spanz-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="kd">local</span><span class="w"> </span><span class="kr">function</span><span class="w"> </span><span class="nf">is_router</span><span class="p">()</span>
</span><span id="__spanz-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">  </span><span class="kr">return</span><span class="w"> </span><span class="nv">fun</span><span class="p">.</span><span class="nf">index</span><span class="p">(</span><span class="s1">&#39;roles.crud-router&#39;</span><span class="p">,</span><span class="w"> </span><span class="nv">config</span><span class="p">:</span><span class="nf">get</span><span class="p">(</span><span class="s1">&#39;roles&#39;</span><span class="p">))</span><span class="w"> </span><span class="o">~=</span><span class="w"> </span><span class="kc">nil</span>
</span><span id="__spanz-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="kr">end</span>
</span><span id="__spanz-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>
</span><span id="__spanz-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="kd">local</span><span class="w"> </span><span class="kr">function</span><span class="w"> </span><span class="nf">is_storage</span><span class="p">()</span>
</span><span id="__spanz-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="w">  </span><span class="kr">return</span><span class="w"> </span><span class="nv">fun</span><span class="p">.</span><span class="nf">index</span><span class="p">(</span><span class="s1">&#39;roles.crud-storage&#39;</span><span class="p">,</span><span class="w"> </span><span class="nv">config</span><span class="p">:</span><span class="nf">get</span><span class="p">(</span><span class="s1">&#39;roles&#39;</span><span class="p">))</span><span class="w"> </span><span class="o">~=</span><span class="w"> </span><span class="kc">nil</span>
</span><span id="__spanz-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="kr">end</span>
</span><span id="__spanz-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>
</span><span id="__spanz-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="kd">local</span><span class="w"> </span><span class="kr">function</span><span class="w"> </span><span class="nf">apply</span><span class="p">()</span>
</span><span id="__spanz-3-14"><a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nf">is_router</span><span class="p">()</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__spanz-3-15"><a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a><span class="w">        </span><span class="nv">box</span><span class="p">.</span><span class="py">schema</span><span class="p">.</span><span class="py">func</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
</span><span id="__spanz-3-16"><a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a><span class="w">            </span><span class="nv">language</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;LUA&#39;</span><span class="p">,</span>
</span><span id="__spanz-3-17"><a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a><span class="w">            </span><span class="nv">if_not_exists</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__spanz-3-18"><a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a><span class="w">            </span><span class="nv">body</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">[[</span>
</span><span id="__spanz-3-19"><a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a><span class="s">                function(name)</span>
</span><span id="__spanz-3-20"><a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a><span class="s">                    return string.format(&quot;hello %s&quot;, tostring(name))</span>
</span><span id="__spanz-3-21"><a id="__codelineno-3-21" name="__codelineno-3-21" href="#__codelineno-3-21"></a><span class="s">                end</span>
</span><span id="__spanz-3-22"><a id="__codelineno-3-22" name="__codelineno-3-22" href="#__codelineno-3-22"></a><span class="s">            ]]</span><span class="p">,</span>
</span><span id="__spanz-3-23"><a id="__codelineno-3-23" name="__codelineno-3-23" href="#__codelineno-3-23"></a><span class="w">        </span><span class="p">})</span>
</span><span id="__spanz-3-24"><a id="__codelineno-3-24" name="__codelineno-3-24" href="#__codelineno-3-24"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__spanz-3-25"><a id="__codelineno-3-25" name="__codelineno-3-25" href="#__codelineno-3-25"></a>
</span><span id="__spanz-3-26"><a id="__codelineno-3-26" name="__codelineno-3-26" href="#__codelineno-3-26"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nf">is_storage</span><span class="p">()</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__spanz-3-27"><a id="__codelineno-3-27" name="__codelineno-3-27" href="#__codelineno-3-27"></a><span class="w">        </span><span class="nv">box</span><span class="p">.</span><span class="py">schema</span><span class="p">.</span><span class="py">space</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="s1">&#39;kv&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">if_not_exists</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">})</span>
</span><span id="__spanz-3-28"><a id="__codelineno-3-28" name="__codelineno-3-28" href="#__codelineno-3-28"></a><span class="w">        </span><span class="nv">box</span><span class="p">.</span><span class="py">space</span><span class="p">.</span><span class="py">kv</span><span class="p">:</span><span class="nf">format</span><span class="p">({</span>
</span><span id="__spanz-3-29"><a id="__codelineno-3-29" name="__codelineno-3-29" href="#__codelineno-3-29"></a><span class="w">            </span><span class="p">{</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;id&#39;</span><span class="p">,</span><span class="w"> </span><span class="nb">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;number&#39;</span><span class="w"> </span><span class="p">},</span>
</span><span id="__spanz-3-30"><a id="__codelineno-3-30" name="__codelineno-3-30" href="#__codelineno-3-30"></a><span class="w">            </span><span class="p">{</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;bucket_id&#39;</span><span class="p">,</span><span class="w"> </span><span class="nb">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;unsigned&#39;</span><span class="w"> </span><span class="p">},</span>
</span><span id="__spanz-3-31"><a id="__codelineno-3-31" name="__codelineno-3-31" href="#__codelineno-3-31"></a><span class="w">            </span><span class="p">{</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;kv&#39;</span><span class="p">,</span><span class="w"> </span><span class="nb">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;any&#39;</span><span class="w"> </span><span class="p">},</span>
</span><span id="__spanz-3-32"><a id="__codelineno-3-32" name="__codelineno-3-32" href="#__codelineno-3-32"></a><span class="w">        </span><span class="p">})</span>
</span><span id="__spanz-3-33"><a id="__codelineno-3-33" name="__codelineno-3-33" href="#__codelineno-3-33"></a><span class="w">        </span><span class="nv">box</span><span class="p">.</span><span class="py">space</span><span class="p">.</span><span class="py">kv</span><span class="p">:</span><span class="nf">create_index</span><span class="p">(</span><span class="s1">&#39;pk&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">parts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">},</span><span class="w"> </span><span class="nv">if_not_exists</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">})</span>
</span><span id="__spanz-3-34"><a id="__codelineno-3-34" name="__codelineno-3-34" href="#__codelineno-3-34"></a><span class="w">        </span><span class="nv">box</span><span class="p">.</span><span class="py">space</span><span class="p">.</span><span class="py">kv</span><span class="p">:</span><span class="nf">create_index</span><span class="p">(</span><span class="s1">&#39;bucket_id&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">parts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s1">&#39;bucket_id&#39;</span><span class="p">},</span><span class="w"> </span><span class="nv">unique</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="nv">if_not_exists</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">})</span>
</span><span id="__spanz-3-35"><a id="__codelineno-3-35" name="__codelineno-3-35" href="#__codelineno-3-35"></a><span class="w">        </span><span class="nv">helpers</span><span class="p">.</span><span class="nf">register_sharding_key</span><span class="p">(</span><span class="s1">&#39;kv&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">})</span>
</span><span id="__spanz-3-36"><a id="__codelineno-3-36" name="__codelineno-3-36" href="#__codelineno-3-36"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__spanz-3-37"><a id="__codelineno-3-37" name="__codelineno-3-37" href="#__codelineno-3-37"></a>
</span><span id="__spanz-3-38"><a id="__codelineno-3-38" name="__codelineno-3-38" href="#__codelineno-3-38"></a><span class="w">    </span><span class="kr">return</span><span class="w"> </span><span class="kc">true</span>
</span><span id="__spanz-3-39"><a id="__codelineno-3-39" name="__codelineno-3-39" href="#__codelineno-3-39"></a><span class="kr">end</span>
</span><span id="__spanz-3-40"><a id="__codelineno-3-40" name="__codelineno-3-40" href="#__codelineno-3-40"></a>
</span><span id="__spanz-3-41"><a id="__codelineno-3-41" name="__codelineno-3-41" href="#__codelineno-3-41"></a><span class="kr">return</span><span class="w"> </span><span class="p">{</span>
</span><span id="__spanz-3-42"><a id="__codelineno-3-42" name="__codelineno-3-42" href="#__codelineno-3-42"></a><span class="w">    </span><span class="nv">apply</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__spanz-3-43"><a id="__codelineno-3-43" name="__codelineno-3-43" href="#__codelineno-3-43"></a><span class="w">        </span><span class="nv">scenario</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">apply</span><span class="p">,</span>
</span><span id="__spanz-3-44"><a id="__codelineno-3-44" name="__codelineno-3-44" href="#__codelineno-3-44"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__spanz-3-45"><a id="__codelineno-3-45" name="__codelineno-3-45" href="#__codelineno-3-45"></a><span class="p">}</span>
</span></code></pre></div>
<p>Start the cluster with passing migrations and verify that the migrations were applied:</p>
<div class="language-java highlight"><pre><span></span><code><span id="__spanz-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.IOException</span><span class="p">;</span>
</span><span id="__spanz-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.nio.file.Path</span><span class="p">;</span>
</span><span id="__spanz-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.nio.file.Paths</span><span class="p">;</span>
</span><span id="__spanz-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Map</span><span class="p">;</span>
</span><span id="__spanz-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Map.Entry</span><span class="p">;</span>
</span><span id="__spanz-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>
</span><span id="__spanz-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.Test</span><span class="p">;</span>
</span><span id="__spanz-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.testcontainers.containers.Container.ExecResult</span><span class="p">;</span>
</span><span id="__spanz-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.testcontainers.containers.tarantool.TarantoolContainer</span><span class="p">;</span>
</span><span id="__spanz-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.testcontainers.containers.tdb.TDB2ClusterImpl</span><span class="p">;</span>
</span><span id="__spanz-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.testcontainers.containers.tdb.TDBCluster</span><span class="p">;</span>
</span><span id="__spanz-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>
</span><span id="__spanz-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">TestClass</span><span class="w"> </span><span class="p">{</span>
</span><span id="__spanz-4-14"><a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a>
</span><span id="__spanz-4-15"><a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a><span class="w">  </span><span class="c1">// put your migrations location</span>
</span><span id="__spanz-4-16"><a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Path</span><span class="w"> </span><span class="n">PATH_TO_MIGRATIONS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Paths</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;&lt;your_location&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;migrations&quot;</span><span class="p">);</span>
</span><span id="__spanz-4-17"><a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a>
</span><span id="__spanz-4-18"><a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">USER</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;test-super&quot;</span><span class="p">;</span>
</span><span id="__spanz-4-19"><a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a>
</span><span id="__spanz-4-20"><a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">PASSWORD</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;test&quot;</span><span class="p">;</span>
</span><span id="__spanz-4-21"><a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a>
</span><span id="__spanz-4-22"><a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">ROUTER_COMMAND</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;echo \&quot;box.schema.func.call(&#39;hello&#39;)\&quot; | tt connect %s:%s@%s:%s -x lua&quot;</span><span class="p">;</span>
</span><span id="__spanz-4-23"><a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a>
</span><span id="__spanz-4-24"><a id="__codelineno-4-24" name="__codelineno-4-24" href="#__codelineno-4-24"></a><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">STORAGE_COMMAND</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;echo \&quot;box.space.kv ~= nil\&quot; | tt connect %s:%s@%s:%s -x lua&quot;</span><span class="p">;</span>
</span><span id="__spanz-4-25"><a id="__codelineno-4-25" name="__codelineno-4-25" href="#__codelineno-4-25"></a>
</span><span id="__spanz-4-26"><a id="__codelineno-4-26" name="__codelineno-4-26" href="#__codelineno-4-26"></a><span class="w">  </span><span class="nd">@Test</span>
</span><span id="__spanz-4-27"><a id="__codelineno-4-27" name="__codelineno-4-27" href="#__codelineno-4-27"></a><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">testSimpleClusterWithMigration</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">IOException</span><span class="p">,</span><span class="w"> </span><span class="n">InterruptedException</span><span class="w"> </span><span class="p">{</span>
</span><span id="__spanz-4-28"><a id="__codelineno-4-28" name="__codelineno-4-28" href="#__codelineno-4-28"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">TDBCluster</span><span class="w"> </span><span class="n">cluster</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TDB2ClusterImpl</span><span class="p">.</span><span class="na">builder</span><span class="p">(</span><span class="s">&quot;tarantooldb:2.2.1&quot;</span><span class="p">)</span>
</span><span id="__spanz-4-29"><a id="__codelineno-4-29" name="__codelineno-4-29" href="#__codelineno-4-29"></a><span class="w">        </span><span class="p">.</span><span class="na">withRouterCount</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__spanz-4-30"><a id="__codelineno-4-30" name="__codelineno-4-30" href="#__codelineno-4-30"></a><span class="w">        </span><span class="p">.</span><span class="na">withShardCount</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span><span id="__spanz-4-31"><a id="__codelineno-4-31" name="__codelineno-4-31" href="#__codelineno-4-31"></a><span class="w">        </span><span class="p">.</span><span class="na">withReplicaCount</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span><span id="__spanz-4-32"><a id="__codelineno-4-32" name="__codelineno-4-32" href="#__codelineno-4-32"></a><span class="w">        </span><span class="p">.</span><span class="na">withMigrationsDirectory</span><span class="p">(</span><span class="n">PATH_TO_MIGRATIONS</span><span class="p">)</span>
</span><span id="__spanz-4-33"><a id="__codelineno-4-33" name="__codelineno-4-33" href="#__codelineno-4-33"></a><span class="w">        </span><span class="p">.</span><span class="na">build</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__spanz-4-34"><a id="__codelineno-4-34" name="__codelineno-4-34" href="#__codelineno-4-34"></a><span class="w">      </span><span class="n">cluster</span><span class="p">.</span><span class="na">start</span><span class="p">();</span>
</span><span id="__spanz-4-35"><a id="__codelineno-4-35" name="__codelineno-4-35" href="#__codelineno-4-35"></a>
</span><span id="__spanz-4-36"><a id="__codelineno-4-36" name="__codelineno-4-36" href="#__codelineno-4-36"></a><span class="w">      </span><span class="kd">final</span><span class="w"> </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">TarantoolContainer</span><span class="o">&lt;?&gt;&gt;</span><span class="w"> </span><span class="n">routers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cluster</span><span class="p">.</span><span class="na">routers</span><span class="p">();</span>
</span><span id="__spanz-4-37"><a id="__codelineno-4-37" name="__codelineno-4-37" href="#__codelineno-4-37"></a><span class="w">      </span><span class="n">assertFalse</span><span class="p">(</span><span class="n">routers</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">());</span>
</span><span id="__spanz-4-38"><a id="__codelineno-4-38" name="__codelineno-4-38" href="#__codelineno-4-38"></a>
</span><span id="__spanz-4-39"><a id="__codelineno-4-39" name="__codelineno-4-39" href="#__codelineno-4-39"></a><span class="w">      </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">Entry</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">TarantoolContainer</span><span class="o">&lt;?&gt;&gt;</span><span class="w"> </span><span class="n">router</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">routers</span><span class="p">.</span><span class="na">entrySet</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__spanz-4-40"><a id="__codelineno-4-40" name="__codelineno-4-40" href="#__codelineno-4-40"></a><span class="w">        </span><span class="kd">final</span><span class="w"> </span><span class="n">ExecResult</span><span class="w"> </span><span class="n">execResult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">router</span><span class="p">.</span><span class="na">getValue</span><span class="p">().</span><span class="na">execInContainer</span><span class="p">(</span><span class="s">&quot;/bin/sh&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;-c&quot;</span><span class="p">,</span>
</span><span id="__spanz-4-41"><a id="__codelineno-4-41" name="__codelineno-4-41" href="#__codelineno-4-41"></a><span class="w">            </span><span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="n">ROUTER_COMMAND</span><span class="p">,</span><span class="w"> </span><span class="n">USER</span><span class="p">,</span><span class="w"> </span><span class="n">PASSWORD</span><span class="p">,</span><span class="w"> </span><span class="n">router</span><span class="p">.</span><span class="na">getKey</span><span class="p">(),</span>
</span><span id="__spanz-4-42"><a id="__codelineno-4-42" name="__codelineno-4-42" href="#__codelineno-4-42"></a><span class="w">                </span><span class="n">TarantoolContainer</span><span class="p">.</span><span class="na">DEFAULT_TARANTOOL_PORT</span><span class="p">));</span>
</span><span id="__spanz-4-43"><a id="__codelineno-4-43" name="__codelineno-4-43" href="#__codelineno-4-43"></a>
</span><span id="__spanz-4-44"><a id="__codelineno-4-44" name="__codelineno-4-44" href="#__codelineno-4-44"></a><span class="w">        </span><span class="n">assertEquals</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">execResult</span><span class="p">.</span><span class="na">getExitCode</span><span class="p">());</span>
</span><span id="__spanz-4-45"><a id="__codelineno-4-45" name="__codelineno-4-45" href="#__codelineno-4-45"></a><span class="w">        </span><span class="n">assertEquals</span><span class="p">(</span><span class="s">&quot;\&quot;hello nil\&quot;;\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">execResult</span><span class="p">.</span><span class="na">getStdout</span><span class="p">());</span>
</span><span id="__spanz-4-46"><a id="__codelineno-4-46" name="__codelineno-4-46" href="#__codelineno-4-46"></a><span class="w">      </span><span class="p">}</span>
</span><span id="__spanz-4-47"><a id="__codelineno-4-47" name="__codelineno-4-47" href="#__codelineno-4-47"></a>
</span><span id="__spanz-4-48"><a id="__codelineno-4-48" name="__codelineno-4-48" href="#__codelineno-4-48"></a><span class="w">      </span><span class="kd">final</span><span class="w"> </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">TarantoolContainer</span><span class="o">&lt;?&gt;&gt;</span><span class="w"> </span><span class="n">storages</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cluster</span><span class="p">.</span><span class="na">storages</span><span class="p">();</span>
</span><span id="__spanz-4-49"><a id="__codelineno-4-49" name="__codelineno-4-49" href="#__codelineno-4-49"></a><span class="w">      </span><span class="n">assertFalse</span><span class="p">(</span><span class="n">storages</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">());</span>
</span><span id="__spanz-4-50"><a id="__codelineno-4-50" name="__codelineno-4-50" href="#__codelineno-4-50"></a>
</span><span id="__spanz-4-51"><a id="__codelineno-4-51" name="__codelineno-4-51" href="#__codelineno-4-51"></a><span class="w">      </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">Entry</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">TarantoolContainer</span><span class="o">&lt;?&gt;&gt;</span><span class="w"> </span><span class="n">storage</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">storages</span><span class="p">.</span><span class="na">entrySet</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__spanz-4-52"><a id="__codelineno-4-52" name="__codelineno-4-52" href="#__codelineno-4-52"></a><span class="w">        </span><span class="kd">final</span><span class="w"> </span><span class="n">ExecResult</span><span class="w"> </span><span class="n">execResult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">storage</span><span class="p">.</span><span class="na">getValue</span><span class="p">().</span><span class="na">execInContainer</span><span class="p">(</span><span class="s">&quot;/bin/sh&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;-c&quot;</span><span class="p">,</span>
</span><span id="__spanz-4-53"><a id="__codelineno-4-53" name="__codelineno-4-53" href="#__codelineno-4-53"></a><span class="w">            </span><span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="n">STORAGE_COMMAND</span><span class="p">,</span><span class="w"> </span><span class="n">USER</span><span class="p">,</span><span class="w"> </span><span class="n">PASSWORD</span><span class="p">,</span><span class="w"> </span><span class="n">storage</span><span class="p">.</span><span class="na">getKey</span><span class="p">(),</span>
</span><span id="__spanz-4-54"><a id="__codelineno-4-54" name="__codelineno-4-54" href="#__codelineno-4-54"></a><span class="w">                </span><span class="n">TarantoolContainer</span><span class="p">.</span><span class="na">DEFAULT_TARANTOOL_PORT</span><span class="p">));</span>
</span><span id="__spanz-4-55"><a id="__codelineno-4-55" name="__codelineno-4-55" href="#__codelineno-4-55"></a>
</span><span id="__spanz-4-56"><a id="__codelineno-4-56" name="__codelineno-4-56" href="#__codelineno-4-56"></a><span class="w">        </span><span class="n">assertEquals</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">execResult</span><span class="p">.</span><span class="na">getExitCode</span><span class="p">());</span>
</span><span id="__spanz-4-57"><a id="__codelineno-4-57" name="__codelineno-4-57" href="#__codelineno-4-57"></a><span class="w">        </span><span class="n">assertEquals</span><span class="p">(</span><span class="s">&quot;true;\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">execResult</span><span class="p">.</span><span class="na">getStdout</span><span class="p">());</span>
</span><span id="__spanz-4-58"><a id="__codelineno-4-58" name="__codelineno-4-58" href="#__codelineno-4-58"></a><span class="w">      </span><span class="p">}</span>
</span><span id="__spanz-4-59"><a id="__codelineno-4-59" name="__codelineno-4-59" href="#__codelineno-4-59"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__spanz-4-60"><a id="__codelineno-4-60" name="__codelineno-4-60" href="#__codelineno-4-60"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__spanz-4-61"><a id="__codelineno-4-61" name="__codelineno-4-61" href="#__codelineno-4-61"></a><span class="p">}</span>
</span></code></pre></div>
<h2 id="example-2-starting-a-cluster-with-custom-settings">Example 2. Starting a Cluster with Custom Settings</h2>
<p>To define cluster settings, you can use the <code>Tarantool3Configuration</code> class.</p>
<p>Suppose you want to start a cluster with 2 routers (router), 2 storage replicasets (storage), each with two replicas (master and slave):</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__spanz-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="nn">---</span>
</span><span id="__spanz-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="nt">credentials</span><span class="p">:</span>
</span><span id="__spanz-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="w">  </span><span class="nt">users</span><span class="p">:</span>
</span><span id="__spanz-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="w">    </span><span class="nt">test-super</span><span class="p">:</span>
</span><span id="__spanz-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="w">      </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;test&quot;</span>
</span><span id="__spanz-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="w">      </span><span class="nt">roles</span><span class="p">:</span>
</span><span id="__spanz-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;super&quot;</span>
</span><span id="__spanz-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="w">    </span><span class="nt">storage</span><span class="p">:</span>
</span><span id="__spanz-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="w">      </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;secret&quot;</span>
</span><span id="__spanz-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="w">      </span><span class="nt">roles</span><span class="p">:</span>
</span><span id="__spanz-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;sharding&quot;</span>
</span><span id="__spanz-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="w">    </span><span class="nt">replicator</span><span class="p">:</span>
</span><span id="__spanz-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="w">      </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;secret&quot;</span>
</span><span id="__spanz-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="w">      </span><span class="nt">roles</span><span class="p">:</span>
</span><span id="__spanz-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;replication&quot;</span>
</span><span id="__spanz-5-16"><a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a><span class="nt">groups</span><span class="p">:</span>
</span><span id="__spanz-5-17"><a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a><span class="w">  </span><span class="nt">routers</span><span class="p">:</span>
</span><span id="__spanz-5-18"><a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a><span class="w">    </span><span class="nt">replicasets</span><span class="p">:</span>
</span><span id="__spanz-5-19"><a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a><span class="w">      </span><span class="nt">router-1</span><span class="p">:</span>
</span><span id="__spanz-5-20"><a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a><span class="w">        </span><span class="nt">leader</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;router-1&quot;</span>
</span><span id="__spanz-5-21"><a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a><span class="w">        </span><span class="nt">instances</span><span class="p">:</span>
</span><span id="__spanz-5-22"><a id="__codelineno-5-22" name="__codelineno-5-22" href="#__codelineno-5-22"></a><span class="w">          </span><span class="nt">router-1</span><span class="p">:</span>
</span><span id="__spanz-5-23"><a id="__codelineno-5-23" name="__codelineno-5-23" href="#__codelineno-5-23"></a><span class="w">            </span><span class="nt">iproto</span><span class="p">:</span>
</span><span id="__spanz-5-24"><a id="__codelineno-5-24" name="__codelineno-5-24" href="#__codelineno-5-24"></a><span class="w">              </span><span class="nt">listen</span><span class="p">:</span>
</span><span id="__spanz-5-25"><a id="__codelineno-5-25" name="__codelineno-5-25" href="#__codelineno-5-25"></a><span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uri</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;router-1:3301&quot;</span>
</span><span id="__spanz-5-26"><a id="__codelineno-5-26" name="__codelineno-5-26" href="#__codelineno-5-26"></a><span class="w">              </span><span class="nt">advertise</span><span class="p">:</span>
</span><span id="__spanz-5-27"><a id="__codelineno-5-27" name="__codelineno-5-27" href="#__codelineno-5-27"></a><span class="w">                </span><span class="nt">client</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;router-1:3301&quot;</span>
</span><span id="__spanz-5-28"><a id="__codelineno-5-28" name="__codelineno-5-28" href="#__codelineno-5-28"></a><span class="w">      </span><span class="nt">router-2</span><span class="p">:</span>
</span><span id="__spanz-5-29"><a id="__codelineno-5-29" name="__codelineno-5-29" href="#__codelineno-5-29"></a><span class="w">        </span><span class="nt">leader</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;router-2&quot;</span>
</span><span id="__spanz-5-30"><a id="__codelineno-5-30" name="__codelineno-5-30" href="#__codelineno-5-30"></a><span class="w">        </span><span class="nt">instances</span><span class="p">:</span>
</span><span id="__spanz-5-31"><a id="__codelineno-5-31" name="__codelineno-5-31" href="#__codelineno-5-31"></a><span class="w">          </span><span class="nt">router-2</span><span class="p">:</span>
</span><span id="__spanz-5-32"><a id="__codelineno-5-32" name="__codelineno-5-32" href="#__codelineno-5-32"></a><span class="w">            </span><span class="nt">iproto</span><span class="p">:</span>
</span><span id="__spanz-5-33"><a id="__codelineno-5-33" name="__codelineno-5-33" href="#__codelineno-5-33"></a><span class="w">              </span><span class="nt">listen</span><span class="p">:</span>
</span><span id="__spanz-5-34"><a id="__codelineno-5-34" name="__codelineno-5-34" href="#__codelineno-5-34"></a><span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uri</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;router-2:3301&quot;</span>
</span><span id="__spanz-5-35"><a id="__codelineno-5-35" name="__codelineno-5-35" href="#__codelineno-5-35"></a><span class="w">              </span><span class="nt">advertise</span><span class="p">:</span>
</span><span id="__spanz-5-36"><a id="__codelineno-5-36" name="__codelineno-5-36" href="#__codelineno-5-36"></a><span class="w">                </span><span class="nt">client</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;router-2:3301&quot;</span>
</span><span id="__spanz-5-37"><a id="__codelineno-5-37" name="__codelineno-5-37" href="#__codelineno-5-37"></a><span class="w">    </span><span class="nt">replication</span><span class="p">:</span>
</span><span id="__spanz-5-38"><a id="__codelineno-5-38" name="__codelineno-5-38" href="#__codelineno-5-38"></a><span class="w">      </span><span class="nt">failover</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;manual&quot;</span>
</span><span id="__spanz-5-39"><a id="__codelineno-5-39" name="__codelineno-5-39" href="#__codelineno-5-39"></a><span class="w">    </span><span class="nt">roles</span><span class="p">:</span>
</span><span id="__spanz-5-40"><a id="__codelineno-5-40" name="__codelineno-5-40" href="#__codelineno-5-40"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;roles.crud-router&quot;</span>
</span><span id="__spanz-5-41"><a id="__codelineno-5-41" name="__codelineno-5-41" href="#__codelineno-5-41"></a><span class="w">    </span><span class="nt">sharding</span><span class="p">:</span>
</span><span id="__spanz-5-42"><a id="__codelineno-5-42" name="__codelineno-5-42" href="#__codelineno-5-42"></a><span class="w">      </span><span class="nt">roles</span><span class="p">:</span>
</span><span id="__spanz-5-43"><a id="__codelineno-5-43" name="__codelineno-5-43" href="#__codelineno-5-43"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;router&quot;</span>
</span><span id="__spanz-5-44"><a id="__codelineno-5-44" name="__codelineno-5-44" href="#__codelineno-5-44"></a><span class="w">  </span><span class="nt">storages</span><span class="p">:</span>
</span><span id="__spanz-5-45"><a id="__codelineno-5-45" name="__codelineno-5-45" href="#__codelineno-5-45"></a><span class="w">    </span><span class="nt">replicasets</span><span class="p">:</span>
</span><span id="__spanz-5-46"><a id="__codelineno-5-46" name="__codelineno-5-46" href="#__codelineno-5-46"></a><span class="w">      </span><span class="nt">r1</span><span class="p">:</span>
</span><span id="__spanz-5-47"><a id="__codelineno-5-47" name="__codelineno-5-47" href="#__codelineno-5-47"></a><span class="w">        </span><span class="nt">instances</span><span class="p">:</span>
</span><span id="__spanz-5-48"><a id="__codelineno-5-48" name="__codelineno-5-48" href="#__codelineno-5-48"></a><span class="w">          </span><span class="nt">r1-s1</span><span class="p">:</span>
</span><span id="__spanz-5-49"><a id="__codelineno-5-49" name="__codelineno-5-49" href="#__codelineno-5-49"></a><span class="w">            </span><span class="nt">iproto</span><span class="p">:</span>
</span><span id="__spanz-5-50"><a id="__codelineno-5-50" name="__codelineno-5-50" href="#__codelineno-5-50"></a><span class="w">              </span><span class="nt">listen</span><span class="p">:</span>
</span><span id="__spanz-5-51"><a id="__codelineno-5-51" name="__codelineno-5-51" href="#__codelineno-5-51"></a><span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uri</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;r1-s1:3301&quot;</span>
</span><span id="__spanz-5-52"><a id="__codelineno-5-52" name="__codelineno-5-52" href="#__codelineno-5-52"></a><span class="w">              </span><span class="nt">advertise</span><span class="p">:</span>
</span><span id="__spanz-5-53"><a id="__codelineno-5-53" name="__codelineno-5-53" href="#__codelineno-5-53"></a><span class="w">                </span><span class="nt">client</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;r1-s1:3301&quot;</span>
</span><span id="__spanz-5-54"><a id="__codelineno-5-54" name="__codelineno-5-54" href="#__codelineno-5-54"></a><span class="w">          </span><span class="nt">r1-s2</span><span class="p">:</span>
</span><span id="__spanz-5-55"><a id="__codelineno-5-55" name="__codelineno-5-55" href="#__codelineno-5-55"></a><span class="w">            </span><span class="nt">iproto</span><span class="p">:</span>
</span><span id="__spanz-5-56"><a id="__codelineno-5-56" name="__codelineno-5-56" href="#__codelineno-5-56"></a><span class="w">              </span><span class="nt">listen</span><span class="p">:</span>
</span><span id="__spanz-5-57"><a id="__codelineno-5-57" name="__codelineno-5-57" href="#__codelineno-5-57"></a><span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uri</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;r1-s2:3301&quot;</span>
</span><span id="__spanz-5-58"><a id="__codelineno-5-58" name="__codelineno-5-58" href="#__codelineno-5-58"></a><span class="w">              </span><span class="nt">advertise</span><span class="p">:</span>
</span><span id="__spanz-5-59"><a id="__codelineno-5-59" name="__codelineno-5-59" href="#__codelineno-5-59"></a><span class="w">                </span><span class="nt">client</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;r1-s2:3301&quot;</span>
</span><span id="__spanz-5-60"><a id="__codelineno-5-60" name="__codelineno-5-60" href="#__codelineno-5-60"></a><span class="w">      </span><span class="nt">r2</span><span class="p">:</span>
</span><span id="__spanz-5-61"><a id="__codelineno-5-61" name="__codelineno-5-61" href="#__codelineno-5-61"></a><span class="w">        </span><span class="nt">instances</span><span class="p">:</span>
</span><span id="__spanz-5-62"><a id="__codelineno-5-62" name="__codelineno-5-62" href="#__codelineno-5-62"></a><span class="w">          </span><span class="nt">r2-s1</span><span class="p">:</span>
</span><span id="__spanz-5-63"><a id="__codelineno-5-63" name="__codelineno-5-63" href="#__codelineno-5-63"></a><span class="w">            </span><span class="nt">iproto</span><span class="p">:</span>
</span><span id="__spanz-5-64"><a id="__codelineno-5-64" name="__codelineno-5-64" href="#__codelineno-5-64"></a><span class="w">              </span><span class="nt">listen</span><span class="p">:</span>
</span><span id="__spanz-5-65"><a id="__codelineno-5-65" name="__codelineno-5-65" href="#__codelineno-5-65"></a><span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uri</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;r2-s1:3301&quot;</span>
</span><span id="__spanz-5-66"><a id="__codelineno-5-66" name="__codelineno-5-66" href="#__codelineno-5-66"></a><span class="w">              </span><span class="nt">advertise</span><span class="p">:</span>
</span><span id="__spanz-5-67"><a id="__codelineno-5-67" name="__codelineno-5-67" href="#__codelineno-5-67"></a><span class="w">                </span><span class="nt">client</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;r2-s1:3301&quot;</span>
</span><span id="__spanz-5-68"><a id="__codelineno-5-68" name="__codelineno-5-68" href="#__codelineno-5-68"></a><span class="w">          </span><span class="nt">r2-s2</span><span class="p">:</span>
</span><span id="__spanz-5-69"><a id="__codelineno-5-69" name="__codelineno-5-69" href="#__codelineno-5-69"></a><span class="w">            </span><span class="nt">iproto</span><span class="p">:</span>
</span><span id="__spanz-5-70"><a id="__codelineno-5-70" name="__codelineno-5-70" href="#__codelineno-5-70"></a><span class="w">              </span><span class="nt">listen</span><span class="p">:</span>
</span><span id="__spanz-5-71"><a id="__codelineno-5-71" name="__codelineno-5-71" href="#__codelineno-5-71"></a><span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uri</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;r2-s2:3301&quot;</span>
</span><span id="__spanz-5-72"><a id="__codelineno-5-72" name="__codelineno-5-72" href="#__codelineno-5-72"></a><span class="w">              </span><span class="nt">advertise</span><span class="p">:</span>
</span><span id="__spanz-5-73"><a id="__codelineno-5-73" name="__codelineno-5-73" href="#__codelineno-5-73"></a><span class="w">                </span><span class="nt">client</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;r2-s2:3301&quot;</span>
</span><span id="__spanz-5-74"><a id="__codelineno-5-74" name="__codelineno-5-74" href="#__codelineno-5-74"></a><span class="w">    </span><span class="nt">replication</span><span class="p">:</span>
</span><span id="__spanz-5-75"><a id="__codelineno-5-75" name="__codelineno-5-75" href="#__codelineno-5-75"></a><span class="w">      </span><span class="nt">failover</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;election&quot;</span>
</span><span id="__spanz-5-76"><a id="__codelineno-5-76" name="__codelineno-5-76" href="#__codelineno-5-76"></a><span class="w">    </span><span class="nt">roles</span><span class="p">:</span>
</span><span id="__spanz-5-77"><a id="__codelineno-5-77" name="__codelineno-5-77" href="#__codelineno-5-77"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;roles.crud-storage&quot;</span>
</span><span id="__spanz-5-78"><a id="__codelineno-5-78" name="__codelineno-5-78" href="#__codelineno-5-78"></a><span class="w">    </span><span class="nt">sharding</span><span class="p">:</span>
</span><span id="__spanz-5-79"><a id="__codelineno-5-79" name="__codelineno-5-79" href="#__codelineno-5-79"></a><span class="w">      </span><span class="nt">roles</span><span class="p">:</span>
</span><span id="__spanz-5-80"><a id="__codelineno-5-80" name="__codelineno-5-80" href="#__codelineno-5-80"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;storage&quot;</span>
</span><span id="__spanz-5-81"><a id="__codelineno-5-81" name="__codelineno-5-81" href="#__codelineno-5-81"></a><span class="nt">iproto</span><span class="p">:</span>
</span><span id="__spanz-5-82"><a id="__codelineno-5-82" name="__codelineno-5-82" href="#__codelineno-5-82"></a><span class="w">  </span><span class="nt">advertise</span><span class="p">:</span>
</span><span id="__spanz-5-83"><a id="__codelineno-5-83" name="__codelineno-5-83" href="#__codelineno-5-83"></a><span class="w">    </span><span class="nt">peer</span><span class="p">:</span>
</span><span id="__spanz-5-84"><a id="__codelineno-5-84" name="__codelineno-5-84" href="#__codelineno-5-84"></a><span class="w">      </span><span class="nt">login</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;replicator&quot;</span>
</span><span id="__spanz-5-85"><a id="__codelineno-5-85" name="__codelineno-5-85" href="#__codelineno-5-85"></a><span class="w">    </span><span class="nt">sharding</span><span class="p">:</span>
</span><span id="__spanz-5-86"><a id="__codelineno-5-86" name="__codelineno-5-86" href="#__codelineno-5-86"></a><span class="w">      </span><span class="nt">login</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;storage&quot;</span>
</span></code></pre></div>
<p>Graphical representation of the topology:</p>
<div class='puml-container'><div class="puml light" style=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="587px" preserveAspectRatio="xMidYMid meet" style="width:561px;height:587px;background:#FFFFFF;" version="1.1" viewBox="0 0 561 587" width="561px" zoomAndPan="magnify" class="diagram"><defs/><g><g class="cluster" data-qualified-name="TarantoolDB Cluster" data-source-line="6" id="ent0003"><rect fill="none" height="423.59" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1;" width="479" x="7" y="64.15"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="159.6738" x="10" y="79.1451">TarantoolDB Cluster</text></g><g class="cluster" data-qualified-name="TarantoolDB Cluster.DC-msk" data-source-line="11" id="ent0006"><rect fill="none" height="150.29" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1;" width="214" x="39" y="115.15"/><path d="M146.59,119.043 C143.3366,119.0615 140.9627,121.5562 140.9338,125.0293 C140.9158,127.1821 142.021,128.5743 143.1623,129.9355 C144.3036,131.2967 145.5043,132.6715 146.0393,135 A0.5001,0.5001 0 0 0 147.0159,134.9883 C147.485,132.6896 148.7167,131.3278 149.9182,129.9688 C151.1198,128.6098 152.3186,127.2132 152.3186,125.0333 C152.3186,123.1875 151.7014,121.6686 150.6624,120.6271 C149.6233,119.5856 148.1781,119.0341 146.5901,119.0431 M146.596,120.043 C147.9522,120.0353 149.1178,120.4925 149.9554,121.3321 C150.793,122.1716 151.3187,123.4064 151.3187,125.0333 C151.3187,126.8551 150.3665,127.9537 149.1703,129.3067 C148.196,130.4087 147.188,131.7956 146.5238,133.6036 C145.8383,131.7856 144.8529,130.3961 143.9281,129.2931 C142.7956,127.9424 141.9188,126.8532 141.934,125.0372 C141.9593,121.9946 143.8308,120.0588 146.5961,120.0431" fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="59.9375" x="42" y="149.1451">DC-msk</text></g><g class="cluster" data-qualified-name="TarantoolDB Cluster.DC-spb" data-source-line="16" id="ent0009"><rect fill="none" height="150.3" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1;" width="214" x="76" y="305.44"/><path d="M183.59,309.333 C180.3366,309.3515 177.9627,311.8462 177.9338,315.3193 C177.9158,317.4721 179.021,318.8643 180.1623,320.2255 C181.3036,321.5867 182.5043,322.9615 183.0393,325.29 A0.5001,0.5001 0 0 0 184.0159,325.2783 C184.485,322.9796 185.7167,321.6178 186.9182,320.2588 C188.1198,318.8998 189.3186,317.5032 189.3186,315.3233 C189.3186,313.4775 188.7014,311.9586 187.6624,310.9171 C186.6233,309.8756 185.1781,309.3241 183.5901,309.3331 M183.596,310.333 C184.9522,310.3253 186.1178,310.7825 186.9554,311.6221 C187.793,312.4616 188.3187,313.6964 188.3187,315.3233 C188.3187,317.1451 187.3665,318.2437 186.1703,319.5967 C185.196,320.6987 184.188,322.0856 183.5238,323.8936 C182.8383,322.0756 181.8529,320.6861 180.9281,319.5831 C179.7956,318.2324 178.9188,317.1432 178.934,315.3272 C178.9593,312.2846 180.8308,310.3488 183.5961,310.3331" fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="56.082" x="79" y="339.4351">DC-spb</text></g><g class="entity" data-qualified-name="TarantoolDB Cluster.router-1" data-source-line="8" id="ent0004"><path d="M280.49,189.15 C280.49,179.15 318.9959,179.15 318.9959,179.15 C318.9959,179.15 357.5017,179.15 357.5017,189.15 L357.5017,229.4469 C357.5017,239.4469 318.9959,239.4469 318.9959,239.4469 C318.9959,239.4469 280.49,239.4469 280.49,229.4469 L280.49,189.15" fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M280.49,189.15 C280.49,199.15 318.9959,199.15 318.9959,199.15 C318.9959,199.15 357.5017,199.15 357.5017,189.15" fill="none" style="stroke:#181818;stroke-width:0.5;"/><image height="16" width="16" x="311.4959" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAVklEQVR4XqWNQQ4AIAjD+P+jRS+SMEQZmuzAsEVUVX4SiizrDQwlOEloAUpogUEdwQZwDh9PQdjtsGATCre8XH4KKnAqqMKpgIkfiMtB0IFN0IVN8JMJtpnNN1TclO0AAAAASUVORK5CYII=" y="203.15"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57.0117" x="290.49" y="231.1451">router-1</text></g><g class="entity" data-qualified-name="TarantoolDB Cluster.router-2" data-source-line="9" id="ent0005"><path d="M392.49,189.15 C392.49,179.15 430.9959,179.15 430.9959,179.15 C430.9959,179.15 469.5017,179.15 469.5017,189.15 L469.5017,229.4469 C469.5017,239.4469 430.9959,239.4469 430.9959,239.4469 C430.9959,239.4469 392.49,239.4469 392.49,229.4469 L392.49,189.15" fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M392.49,189.15 C392.49,199.15 430.9959,199.15 430.9959,199.15 C430.9959,199.15 469.5017,199.15 469.5017,189.15" fill="none" style="stroke:#181818;stroke-width:0.5;"/><image height="16" width="16" x="423.4959" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAVklEQVR4XqWNQQ4AIAjD+P+jRS+SMEQZmuzAsEVUVX4SiizrDQwlOEloAUpogUEdwQZwDh9PQdjtsGATCre8XH4KKnAqqMKpgIkfiMtB0IFN0IVN8JMJtpnNN1TclO0AAAAASUVORK5CYII=" y="203.15"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57.0117" x="402.49" y="231.1451">router-2</text></g><g class="entity" data-qualified-name="TarantoolDB Cluster.DC-msk.r1-s1" data-source-line="12" id="ent0007"><path d="M63.04,187.15 C63.04,177.15 90.998,177.15 90.998,177.15 C90.998,177.15 118.956,177.15 118.956,187.15 L118.956,231.4469 C118.956,241.4469 90.998,241.4469 90.998,241.4469 C90.998,241.4469 63.04,241.4469 63.04,231.4469 L63.04,187.15" fill="#8FBC8F" style="stroke:#181818;stroke-width:0.5;"/><path d="M63.04,187.15 C63.04,197.15 90.998,197.15 90.998,197.15 C90.998,197.15 118.956,197.15 118.956,187.15" fill="none" style="stroke:#181818;stroke-width:0.5;"/><path d="M87.521,204.05 A0.5001,0.5001 0 0 0 87.2166,204.1492 L83.1156,207.2245 L83.1012,207.2354 L83.1017,207.2359 A0.5001,0.5001 0 0 0 82.9001,207.638 L82.9472,216.3858 A0.5001,0.5001 0 0 0 83.4453,216.8819 L95.3723,216.9289 A0.5001,0.5001 0 0 0 95.8085,216.6767 L99.7514,213.5968 A0.5001,0.5001 0 0 0 99.9426,213.2025 L99.9426,204.6418 A0.5001,0.5001 0 0 0 99.4465,204.1416 M87.6812,205.0499 L97.9552,205.13 L95.2107,207.1821 L84.8937,207.1413 M98.9432,205.6411 L98.9432,212.958 L95.8747,215.3573 L95.8747,207.9324 M83.9022,208.1376 L94.8742,208.181 L94.8742,215.9268 L83.9442,215.8839" fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35.916" x="73.04" y="233.1451">r1-s1</text></g><g class="entity" data-qualified-name="TarantoolDB Cluster.DC-msk.r2-s2" data-source-line="13" id="ent0008"><path d="M154.04,187.15 C154.04,177.15 181.998,177.15 181.998,177.15 C181.998,177.15 209.956,177.15 209.956,187.15 L209.956,231.4469 C209.956,241.4469 181.998,241.4469 181.998,241.4469 C181.998,241.4469 154.04,241.4469 154.04,231.4469 L154.04,187.15" fill="#ADD8E6" style="stroke:#181818;stroke-width:0.5;"/><path d="M154.04,187.15 C154.04,197.15 181.998,197.15 181.998,197.15 C181.998,197.15 209.956,197.15 209.956,187.15" fill="none" style="stroke:#181818;stroke-width:0.5;"/><path d="M178.521,204.05 A0.5001,0.5001 0 0 0 178.2166,204.1492 L174.1156,207.2245 L174.1012,207.2354 L174.1017,207.2359 A0.5001,0.5001 0 0 0 173.9001,207.638 L173.9472,216.3858 A0.5001,0.5001 0 0 0 174.4453,216.8819 L186.3723,216.9289 A0.5001,0.5001 0 0 0 186.8085,216.6767 L190.7514,213.5968 A0.5001,0.5001 0 0 0 190.9426,213.2025 L190.9426,204.6418 A0.5001,0.5001 0 0 0 190.4465,204.1416 M178.6812,205.0499 L188.9552,205.13 L186.2107,207.1821 L175.8937,207.1413 M189.9432,205.6411 L189.9432,212.958 L186.8747,215.3573 L186.8747,207.9324 M174.9022,208.1376 L185.8742,208.181 L185.8742,215.9268 L174.9442,215.8839" fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35.916" x="164.04" y="233.1451">r2-s2</text></g><g class="entity" data-qualified-name="TarantoolDB Cluster.DC-spb.r1-s2" data-source-line="17" id="ent0010"><path d="M100.04,377.44 C100.04,367.44 127.998,367.44 127.998,367.44 C127.998,367.44 155.956,367.44 155.956,377.44 L155.956,421.7369 C155.956,431.7369 127.998,431.7369 127.998,431.7369 C127.998,431.7369 100.04,431.7369 100.04,421.7369 L100.04,377.44" fill="#8FBC8F" style="stroke:#181818;stroke-width:0.5;"/><path d="M100.04,377.44 C100.04,387.44 127.998,387.44 127.998,387.44 C127.998,387.44 155.956,387.44 155.956,377.44" fill="none" style="stroke:#181818;stroke-width:0.5;"/><path d="M124.521,394.34 A0.5001,0.5001 0 0 0 124.2166,394.4392 L120.1156,397.5145 L120.1012,397.5254 L120.1017,397.5259 A0.5001,0.5001 0 0 0 119.9001,397.928 L119.9472,406.6758 A0.5001,0.5001 0 0 0 120.4453,407.1718 L132.3723,407.2189 A0.5001,0.5001 0 0 0 132.8085,406.9667 L136.7514,403.8868 A0.5001,0.5001 0 0 0 136.9426,403.4925 L136.9426,394.9318 A0.5001,0.5001 0 0 0 136.4465,394.4315 M124.6812,395.3399 L134.9552,395.42 L132.2107,397.4721 L121.8937,397.4313 M135.9432,395.9311 L135.9432,403.248 L132.8747,405.6473 L132.8747,398.2224 M120.9022,398.4276 L131.8742,398.471 L131.8742,406.2168 L120.9442,406.1739" fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35.916" x="110.04" y="423.4351">r1-s2</text></g><g class="entity" data-qualified-name="TarantoolDB Cluster.DC-spb.r2-s1" data-source-line="18" id="ent0011"><path d="M191.04,377.44 C191.04,367.44 218.998,367.44 218.998,367.44 C218.998,367.44 246.956,367.44 246.956,377.44 L246.956,421.7369 C246.956,431.7369 218.998,431.7369 218.998,431.7369 C218.998,431.7369 191.04,431.7369 191.04,421.7369 L191.04,377.44" fill="#ADD8E6" style="stroke:#181818;stroke-width:0.5;"/><path d="M191.04,377.44 C191.04,387.44 218.998,387.44 218.998,387.44 C218.998,387.44 246.956,387.44 246.956,377.44" fill="none" style="stroke:#181818;stroke-width:0.5;"/><path d="M215.521,394.34 A0.5001,0.5001 0 0 0 215.2166,394.4392 L211.1156,397.5145 L211.1012,397.5254 L211.1017,397.5259 A0.5001,0.5001 0 0 0 210.9001,397.928 L210.9472,406.6758 A0.5001,0.5001 0 0 0 211.4453,407.1718 L223.3723,407.2189 A0.5001,0.5001 0 0 0 223.8085,406.9667 L227.7514,403.8868 A0.5001,0.5001 0 0 0 227.9426,403.4925 L227.9426,394.9318 A0.5001,0.5001 0 0 0 227.4465,394.4315 M215.6812,395.3399 L225.9552,395.42 L223.2107,397.4721 L212.8937,397.4313 M226.9432,395.9311 L226.9432,403.248 L223.8747,405.6473 L223.8747,398.2224 M211.9022,398.4276 L222.8742,398.471 L222.8742,406.2168 L211.9442,406.1739" fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35.916" x="201.04" y="423.4351">r2-s1</text></g><g class="entity" data-qualified-name="User" data-source-line="5" id="ent0002"><rect fill="#F1F1F1" height="55.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="51.9102" x="504.04" y="181.65"/><path d="M523.9358,192.6 C521.9374,192.6272 520.3282,194.2773 520.352,196.2758 C520.3738,198.0974 521.746,199.5974 523.5022,199.8332 L523.5022,201.043 L518.0178,201.0275 A0.5,0.5 0 0 0 517.5161,201.5257 A0.5,0.5 0 0 0 518.0142,202.0274 L523.5022,202.0429 L523.5022,205.2463 L520.5587,210.3731 A0.5,0.5 0 0 0 520.7442,211.0548 A0.5,0.5 0 0 0 521.4259,210.8713 L523.9436,206.4845 L526.5491,210.846 A0.5006,0.5006 0 0 0 527.4084,210.3323 L524.5021,205.4571 L524.5021,202.0454 L530.0196,202.0609 A0.5,0.5 0 0 0 530.5219,201.5607 A0.5,0.5 0 0 0 530.0238,201.061 L524.5022,201.0455 L524.5022,199.829 C526.2735,199.5755 527.635,198.0375 527.6193,196.2013 C527.6022,194.2028 525.9596,192.5863 523.9611,192.6 A0.5,0.5 0 0 0 523.9497,192.606 A0.5,0.5 0 0 0 523.9358,192.6 M523.9591,193.5958 A0.5,0.5 0 0 0 523.9689,193.5998 C525.4276,193.5898 526.6069,194.7503 526.6194,196.2089 C526.6319,197.6676 525.4725,198.8507 524.0139,198.8656 C522.5553,198.8805 521.3694,197.7223 521.352,196.2637 C521.3346,194.8051 522.4912,193.6196 523.9498,193.5998 A0.5,0.5 0 0 0 523.9591,193.5958" fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.9102" x="514.04" y="223.6451">User</text></g><g class="link" data-entity-1="ent0004" data-entity-2="ent0002" data-link-type="dependency" data-source-line="22" id="lnk13"><path d="M320.9562,172.964 C324.8662,129.384 338.87,56.95 392.5,26.15 C421.79,9.32 439.21,9.32 468.5,26.15 C522.02,56.88 530.37,138.05 530.84,181.28" fill="none" id="router-1-backto-User" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="320.42,178.94,325.2082,170.3335,320.8668,173.96,317.2403,169.6186,320.42,178.94" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="ent0005" data-entity-2="ent0002" data-link-type="dependency" data-source-line="23" id="lnk15"><path d="M475.67,209.29 C486.98,209.29 492.29,209.29 503.61,209.29" fill="none" id="router-2-backto-User" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="469.67,209.29,478.67,213.29,474.67,209.29,478.67,205.29,469.67,209.29" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="ent0004" data-entity-2="ent0006" data-link-type="dependency" data-source-line="25" id="lnk16"><path d="M279.99,209.29 C274.255,209.29 268.52,209.29 262.785,209.29 C259.9175,209.29 257.05,209.29 254.1825,209.29 C253.8241,209.29 259.4656,209.29 259.1072,209.29" fill="none" id="router-1-to-DC-msk" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="253.1072,209.29,262.1072,213.29,258.1072,209.29,262.1072,205.29,253.1072,209.29" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="ent0004" data-entity-2="ent0009" data-link-type="dependency" data-source-line="26" id="lnk17"><path d="M313.22,239.72 C308.1,265.785 300.4575,304.6775 294.0163,337.4563 C293.2111,341.5536 292.4247,345.5554 291.6644,349.4247 C291.2842,351.3594 290.9105,353.2609 290.5443,355.1246 C290.3612,356.0565 291.3368,351.0915 291.1575,352.004" fill="none" id="router-1-to-DC-spb" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="290.0006,357.8914,295.6609,349.8315,290.9647,352.9852,287.811,348.289,290.0006,357.8914" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="ent0005" data-entity-2="ent0006" data-link-type="dependency" data-source-line="28" id="lnk18"><path d="M429.58,178.94 C425.67,135.36 411.13,56.95 357.5,26.15 C322.43,6 301.57,6 266.5,26.15 C249.4275,35.955 239.3169,51.6188 233.8084,69.7605 C231.0542,78.8313 229.4505,88.5217 228.7025,98.4089 C228.3284,103.3525 228.1683,108.3454 228.1852,113.3346 C228.1862,113.6465 228.1412,107.9585 228.1436,108.2703" fill="none" id="router-2-to-DC-msk" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="228.1904,114.2701,232.1201,105.2392,228.1514,109.2702,224.1204,105.3015,228.1904,114.2701" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="ent0005" data-entity-2="ent0009" data-link-type="dependency" data-source-line="29" id="lnk19"><path d="M407.87,239.74 C397.79,252.56 385.82,267.75 375,281.44 C354.71,307.11 331.865,335.89 313.895,358.5 C304.91,369.805 297.1438,379.5675 291.525,386.6275 C291.1738,387.0688 290.831,387.4994 290.4969,387.9193 C290.3298,388.1292 293.9014,383.642 293.7387,383.8464" fill="none" id="router-2-to-DC-spb" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="290.0021,388.5409,298.7366,383.9902,293.1159,384.6288,292.4773,379.0081,290.0021,388.5409" style="stroke:#181818;stroke-width:1;"/></g><g class="link" data-entity-1="ent0007" data-entity-2="ent0010" data-link-type="dependency" data-source-line="31" id="lnk20"><path d="M98.3468,247.6974 C105.1768,282.4574 113.7928,326.2826 120.6328,361.0826" fill="none" id="r1-s1-r1-s2" style="stroke:#8FBC8F;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="#8FBC8F" points="97.19,241.81,95.0003,251.4124,98.154,246.7162,102.8502,249.8699,97.19,241.81" style="stroke:#8FBC8F;stroke-width:1;"/><polygon fill="#8FBC8F" points="121.79,366.97,123.9791,357.3675,120.8257,362.0639,116.1293,358.9104,121.79,366.97" style="stroke:#8FBC8F;stroke-width:1;"/></g><g class="link" data-entity-1="ent0008" data-entity-2="ent0011" data-link-type="dependency" data-source-line="32" id="lnk21"><path d="M189.3468,247.6974 C196.1768,282.4574 204.7928,326.2826 211.6328,361.0826" fill="none" id="r2-s2-r2-s1" style="stroke:#ADD8E6;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="#ADD8E6" points="188.19,241.81,186.0003,251.4124,189.154,246.7162,193.8502,249.8699,188.19,241.81" style="stroke:#ADD8E6;stroke-width:1;"/><polygon fill="#ADD8E6" points="212.79,366.97,214.9791,357.3675,211.8257,362.0639,207.1293,358.9104,212.79,366.97" style="stroke:#ADD8E6;stroke-width:1;"/></g><g class="legend" data-source-line="34"><rect fill="none" height="62.8906" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="225.8105" x="161.0698" y="504.74"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72.6797" x="192.771" y="524.7351">Replicaset</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58.5771" x="305.5024" y="524.7351">Replicas</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="166.0698" y="541.032">Â </text><text fill="#8FBC8F" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="14.6631" x="170.52" y="541.032">r1</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80.7324" x="296.602" y="541.032">r1-s1, r1-s2</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="166.0698" y="557.3289">Â </text><text fill="#ADD8E6" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="14.6631" x="170.52" y="557.3289">r2</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80.7324" x="296.602" y="557.3289">r2-s1, r2-s2</text><line style="stroke:#000000;stroke-width:1;" x1="166.0698" x2="381.8804" y1="511.74" y2="511.74"/><line style="stroke:#000000;stroke-width:1;" x1="166.0698" x2="381.8804" y1="528.0369" y2="528.0369"/><line style="stroke:#000000;stroke-width:1;" x1="166.0698" x2="381.8804" y1="544.3338" y2="544.3338"/><line style="stroke:#000000;stroke-width:1;" x1="166.0698" x2="381.8804" y1="560.6306" y2="560.6306"/><line style="stroke:#000000;stroke-width:1;" x1="166.0698" x2="166.0698" y1="511.74" y2="560.6306"/><line style="stroke:#000000;stroke-width:1;" x1="292.1518" x2="292.1518" y1="511.74" y2="560.6306"/><line style="stroke:#000000;stroke-width:1;" x1="381.8804" x2="381.8804" y1="511.74" y2="560.6306"/></g><?plantuml-src dPDDRzim38Rl_XLgscDjDG9wAG8Vag0x3BjqwxbWPDOMB4i6HQ-7TlzzyWTI9tM1hReO8X-IBqdhmZXjkm95nTo6Eoa9NhBISDKTke2alMDqd6dVo1-chi3OxmI_aODiwiBhyDHsZPKD14QIN663GHRu39rbQKrPSTO3IQYDQu6W4UGxLsXF3acesvd3Oecks8Akou7PUUj9NDuFv-OcIGWrWoijYjLZbBOIcyqLaAvC0umID7lAypdrA-PrxBtTRyNETht4bNXD4Y4AO3X0Y4mi5Stf-YpRi_KlCTa2gPR9YCugxtTf4-epqdeDRBpByoX2Y9FSwpISIt2-m8XUxe7gdmZV2D6TXwaqg4_2Xk5lROSnviz7UQ4z_9yyzJLvwt-I5mLEEqrjci-sicXMguY_BowbtZUDVD7HD_iUeZuBKGiXqsAoB3-EuRJbun96P6nvrbuo_jV3QDx4S1wmjKR74V5uVvlPXli4RtJ_1EvEwkMq7fs3iklXepv47Cldf7fMZQmQsIXdUcr_0G00?></g></svg></div><div class="puml dark" style=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="587px" preserveAspectRatio="xMidYMid meet" style="width:561px;height:587px;background:#1B1B1B;" version="1.1" viewBox="0 0 561 587" width="561px" zoomAndPan="magnify" class="diagram"><defs/><g><rect fill="#1B1B1B" height="587" style="stroke:none;stroke-width:1;" width="561" x="0" y="0"/><g class="cluster" data-qualified-name="TarantoolDB Cluster" data-source-line="6" id="ent0003"><rect fill="none" height="423.59" rx="12.5" ry="12.5" style="stroke:#E7E7E7;stroke-width:1;" width="479" x="7" y="64.15"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="159.6738" x="10" y="79.1451">TarantoolDB Cluster</text></g><g class="cluster" data-qualified-name="TarantoolDB Cluster.DC-msk" data-source-line="11" id="ent0006"><rect fill="none" height="150.29" rx="12.5" ry="12.5" style="stroke:#E7E7E7;stroke-width:1;" width="214" x="39" y="115.15"/><path d="M146.59,119.043 C143.3366,119.0615 140.9627,121.5562 140.9338,125.0293 C140.9158,127.1821 142.021,128.5743 143.1623,129.9355 C144.3036,131.2967 145.5043,132.6715 146.0393,135 A0.5001,0.5001 0 0 0 147.0159,134.9883 C147.485,132.6896 148.7167,131.3278 149.9182,129.9688 C151.1198,128.6098 152.3186,127.2132 152.3186,125.0333 C152.3186,123.1875 151.7014,121.6686 150.6624,120.6271 C149.6233,119.5856 148.1781,119.0341 146.5901,119.0431 M146.596,120.043 C147.9522,120.0353 149.1178,120.4925 149.9554,121.3321 C150.793,122.1716 151.3187,123.4064 151.3187,125.0333 C151.3187,126.8551 150.3665,127.9537 149.1703,129.3067 C148.196,130.4087 147.188,131.7956 146.5238,133.6036 C145.8383,131.7856 144.8529,130.3961 143.9281,129.2931 C142.7956,127.9424 141.9188,126.8532 141.934,125.0372 C141.9593,121.9946 143.8308,120.0588 146.5961,120.0431" fill="#000000"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="59.9375" x="42" y="149.1451">DC-msk</text></g><g class="cluster" data-qualified-name="TarantoolDB Cluster.DC-spb" data-source-line="16" id="ent0009"><rect fill="none" height="150.3" rx="12.5" ry="12.5" style="stroke:#E7E7E7;stroke-width:1;" width="214" x="76" y="305.44"/><path d="M183.59,309.333 C180.3366,309.3515 177.9627,311.8462 177.9338,315.3193 C177.9158,317.4721 179.021,318.8643 180.1623,320.2255 C181.3036,321.5867 182.5043,322.9615 183.0393,325.29 A0.5001,0.5001 0 0 0 184.0159,325.2783 C184.485,322.9796 185.7167,321.6178 186.9182,320.2588 C188.1198,318.8998 189.3186,317.5032 189.3186,315.3233 C189.3186,313.4775 188.7014,311.9586 187.6624,310.9171 C186.6233,309.8756 185.1781,309.3241 183.5901,309.3331 M183.596,310.333 C184.9522,310.3253 186.1178,310.7825 186.9554,311.6221 C187.793,312.4616 188.3187,313.6964 188.3187,315.3233 C188.3187,317.1451 187.3665,318.2437 186.1703,319.5967 C185.196,320.6987 184.188,322.0856 183.5238,323.8936 C182.8383,322.0756 181.8529,320.6861 180.9281,319.5831 C179.7956,318.2324 178.9188,317.1432 178.934,315.3272 C178.9593,312.2846 180.8308,310.3488 183.5961,310.3331" fill="#000000"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="56.082" x="79" y="339.4351">DC-spb</text></g><g class="entity" data-qualified-name="TarantoolDB Cluster.router-1" data-source-line="8" id="ent0004"><path d="M280.49,189.15 C280.49,179.15 318.9959,179.15 318.9959,179.15 C318.9959,179.15 357.5017,179.15 357.5017,189.15 L357.5017,229.4469 C357.5017,239.4469 318.9959,239.4469 318.9959,239.4469 C318.9959,239.4469 280.49,239.4469 280.49,229.4469 L280.49,189.15" fill="#313139" style="stroke:#E7E7E7;stroke-width:0.5;"/><path d="M280.49,189.15 C280.49,199.15 318.9959,199.15 318.9959,199.15 C318.9959,199.15 357.5017,199.15 357.5017,189.15" fill="none" style="stroke:#E7E7E7;stroke-width:0.5;"/><image height="16" width="16" x="311.4959" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAVklEQVR4XqWNQQ4AIAjD+P+jRS+SMEQZmuzAsEVUVX4SiizrDQwlOEloAUpogUEdwQZwDh9PQdjtsGATCre8XH4KKnAqqMKpgIkfiMtB0IFN0IVN8JMJtpnNN1TclO0AAAAASUVORK5CYII=" y="203.15"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57.0117" x="290.49" y="231.1451">router-1</text></g><g class="entity" data-qualified-name="TarantoolDB Cluster.router-2" data-source-line="9" id="ent0005"><path d="M392.49,189.15 C392.49,179.15 430.9959,179.15 430.9959,179.15 C430.9959,179.15 469.5017,179.15 469.5017,189.15 L469.5017,229.4469 C469.5017,239.4469 430.9959,239.4469 430.9959,239.4469 C430.9959,239.4469 392.49,239.4469 392.49,229.4469 L392.49,189.15" fill="#313139" style="stroke:#E7E7E7;stroke-width:0.5;"/><path d="M392.49,189.15 C392.49,199.15 430.9959,199.15 430.9959,199.15 C430.9959,199.15 469.5017,199.15 469.5017,189.15" fill="none" style="stroke:#E7E7E7;stroke-width:0.5;"/><image height="16" width="16" x="423.4959" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAVklEQVR4XqWNQQ4AIAjD+P+jRS+SMEQZmuzAsEVUVX4SiizrDQwlOEloAUpogUEdwQZwDh9PQdjtsGATCre8XH4KKnAqqMKpgIkfiMtB0IFN0IVN8JMJtpnNN1TclO0AAAAASUVORK5CYII=" y="203.15"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57.0117" x="402.49" y="231.1451">router-2</text></g><g class="entity" data-qualified-name="TarantoolDB Cluster.DC-msk.r1-s1" data-source-line="12" id="ent0007"><path d="M63.04,187.15 C63.04,177.15 90.998,177.15 90.998,177.15 C90.998,177.15 118.956,177.15 118.956,187.15 L118.956,231.4469 C118.956,241.4469 90.998,241.4469 90.998,241.4469 C90.998,241.4469 63.04,241.4469 63.04,231.4469 L63.04,187.15" fill="#8FBC8F" style="stroke:#E7E7E7;stroke-width:0.5;"/><path d="M63.04,187.15 C63.04,197.15 90.998,197.15 90.998,197.15 C90.998,197.15 118.956,197.15 118.956,187.15" fill="none" style="stroke:#E7E7E7;stroke-width:0.5;"/><path d="M87.521,204.05 A0.5001,0.5001 0 0 0 87.2166,204.1492 L83.1156,207.2245 L83.1012,207.2354 L83.1017,207.2359 A0.5001,0.5001 0 0 0 82.9001,207.638 L82.9472,216.3858 A0.5001,0.5001 0 0 0 83.4453,216.8819 L95.3723,216.9289 A0.5001,0.5001 0 0 0 95.8085,216.6767 L99.7514,213.5968 A0.5001,0.5001 0 0 0 99.9426,213.2025 L99.9426,204.6418 A0.5001,0.5001 0 0 0 99.4465,204.1416 M87.6812,205.0499 L97.9552,205.13 L95.2107,207.1821 L84.8937,207.1413 M98.9432,205.6411 L98.9432,212.958 L95.8747,215.3573 L95.8747,207.9324 M83.9022,208.1376 L94.8742,208.181 L94.8742,215.9268 L83.9442,215.8839" fill="#000000"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35.916" x="73.04" y="233.1451">r1-s1</text></g><g class="entity" data-qualified-name="TarantoolDB Cluster.DC-msk.r2-s2" data-source-line="13" id="ent0008"><path d="M154.04,187.15 C154.04,177.15 181.998,177.15 181.998,177.15 C181.998,177.15 209.956,177.15 209.956,187.15 L209.956,231.4469 C209.956,241.4469 181.998,241.4469 181.998,241.4469 C181.998,241.4469 154.04,241.4469 154.04,231.4469 L154.04,187.15" fill="#ADD8E6" style="stroke:#E7E7E7;stroke-width:0.5;"/><path d="M154.04,187.15 C154.04,197.15 181.998,197.15 181.998,197.15 C181.998,197.15 209.956,197.15 209.956,187.15" fill="none" style="stroke:#E7E7E7;stroke-width:0.5;"/><path d="M178.521,204.05 A0.5001,0.5001 0 0 0 178.2166,204.1492 L174.1156,207.2245 L174.1012,207.2354 L174.1017,207.2359 A0.5001,0.5001 0 0 0 173.9001,207.638 L173.9472,216.3858 A0.5001,0.5001 0 0 0 174.4453,216.8819 L186.3723,216.9289 A0.5001,0.5001 0 0 0 186.8085,216.6767 L190.7514,213.5968 A0.5001,0.5001 0 0 0 190.9426,213.2025 L190.9426,204.6418 A0.5001,0.5001 0 0 0 190.4465,204.1416 M178.6812,205.0499 L188.9552,205.13 L186.2107,207.1821 L175.8937,207.1413 M189.9432,205.6411 L189.9432,212.958 L186.8747,215.3573 L186.8747,207.9324 M174.9022,208.1376 L185.8742,208.181 L185.8742,215.9268 L174.9442,215.8839" fill="#000000"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35.916" x="164.04" y="233.1451">r2-s2</text></g><g class="entity" data-qualified-name="TarantoolDB Cluster.DC-spb.r1-s2" data-source-line="17" id="ent0010"><path d="M100.04,377.44 C100.04,367.44 127.998,367.44 127.998,367.44 C127.998,367.44 155.956,367.44 155.956,377.44 L155.956,421.7369 C155.956,431.7369 127.998,431.7369 127.998,431.7369 C127.998,431.7369 100.04,431.7369 100.04,421.7369 L100.04,377.44" fill="#8FBC8F" style="stroke:#E7E7E7;stroke-width:0.5;"/><path d="M100.04,377.44 C100.04,387.44 127.998,387.44 127.998,387.44 C127.998,387.44 155.956,387.44 155.956,377.44" fill="none" style="stroke:#E7E7E7;stroke-width:0.5;"/><path d="M124.521,394.34 A0.5001,0.5001 0 0 0 124.2166,394.4392 L120.1156,397.5145 L120.1012,397.5254 L120.1017,397.5259 A0.5001,0.5001 0 0 0 119.9001,397.928 L119.9472,406.6758 A0.5001,0.5001 0 0 0 120.4453,407.1718 L132.3723,407.2189 A0.5001,0.5001 0 0 0 132.8085,406.9667 L136.7514,403.8868 A0.5001,0.5001 0 0 0 136.9426,403.4925 L136.9426,394.9318 A0.5001,0.5001 0 0 0 136.4465,394.4315 M124.6812,395.3399 L134.9552,395.42 L132.2107,397.4721 L121.8937,397.4313 M135.9432,395.9311 L135.9432,403.248 L132.8747,405.6473 L132.8747,398.2224 M120.9022,398.4276 L131.8742,398.471 L131.8742,406.2168 L120.9442,406.1739" fill="#000000"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35.916" x="110.04" y="423.4351">r1-s2</text></g><g class="entity" data-qualified-name="TarantoolDB Cluster.DC-spb.r2-s1" data-source-line="18" id="ent0011"><path d="M191.04,377.44 C191.04,367.44 218.998,367.44 218.998,367.44 C218.998,367.44 246.956,367.44 246.956,377.44 L246.956,421.7369 C246.956,431.7369 218.998,431.7369 218.998,431.7369 C218.998,431.7369 191.04,431.7369 191.04,421.7369 L191.04,377.44" fill="#ADD8E6" style="stroke:#E7E7E7;stroke-width:0.5;"/><path d="M191.04,377.44 C191.04,387.44 218.998,387.44 218.998,387.44 C218.998,387.44 246.956,387.44 246.956,377.44" fill="none" style="stroke:#E7E7E7;stroke-width:0.5;"/><path d="M215.521,394.34 A0.5001,0.5001 0 0 0 215.2166,394.4392 L211.1156,397.5145 L211.1012,397.5254 L211.1017,397.5259 A0.5001,0.5001 0 0 0 210.9001,397.928 L210.9472,406.6758 A0.5001,0.5001 0 0 0 211.4453,407.1718 L223.3723,407.2189 A0.5001,0.5001 0 0 0 223.8085,406.9667 L227.7514,403.8868 A0.5001,0.5001 0 0 0 227.9426,403.4925 L227.9426,394.9318 A0.5001,0.5001 0 0 0 227.4465,394.4315 M215.6812,395.3399 L225.9552,395.42 L223.2107,397.4721 L212.8937,397.4313 M226.9432,395.9311 L226.9432,403.248 L223.8747,405.6473 L223.8747,398.2224 M211.9022,398.4276 L222.8742,398.471 L222.8742,406.2168 L211.9442,406.1739" fill="#000000"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35.916" x="201.04" y="423.4351">r2-s1</text></g><g class="entity" data-qualified-name="User" data-source-line="5" id="ent0002"><rect fill="#313139" height="55.2969" rx="12.5" ry="12.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="51.9102" x="504.04" y="181.65"/><path d="M523.9358,192.6 C521.9374,192.6272 520.3282,194.2773 520.352,196.2758 C520.3738,198.0974 521.746,199.5974 523.5022,199.8332 L523.5022,201.043 L518.0178,201.0275 A0.5,0.5 0 0 0 517.5161,201.5257 A0.5,0.5 0 0 0 518.0142,202.0274 L523.5022,202.0429 L523.5022,205.2463 L520.5587,210.3731 A0.5,0.5 0 0 0 520.7442,211.0548 A0.5,0.5 0 0 0 521.4259,210.8713 L523.9436,206.4845 L526.5491,210.846 A0.5006,0.5006 0 0 0 527.4084,210.3323 L524.5021,205.4571 L524.5021,202.0454 L530.0196,202.0609 A0.5,0.5 0 0 0 530.5219,201.5607 A0.5,0.5 0 0 0 530.0238,201.061 L524.5022,201.0455 L524.5022,199.829 C526.2735,199.5755 527.635,198.0375 527.6193,196.2013 C527.6022,194.2028 525.9596,192.5863 523.9611,192.6 A0.5,0.5 0 0 0 523.9497,192.606 A0.5,0.5 0 0 0 523.9358,192.6 M523.9591,193.5958 A0.5,0.5 0 0 0 523.9689,193.5998 C525.4276,193.5898 526.6069,194.7503 526.6194,196.2089 C526.6319,197.6676 525.4725,198.8507 524.0139,198.8656 C522.5553,198.8805 521.3694,197.7223 521.352,196.2637 C521.3346,194.8051 522.4912,193.6196 523.9498,193.5998 A0.5,0.5 0 0 0 523.9591,193.5958" fill="#000000"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.9102" x="514.04" y="223.6451">User</text></g><g class="link" data-entity-1="ent0004" data-entity-2="ent0002" data-link-type="dependency" data-source-line="22" id="lnk13"><path d="M320.9562,172.964 C324.8662,129.384 338.87,56.95 392.5,26.15 C421.79,9.32 439.21,9.32 468.5,26.15 C522.02,56.88 530.37,138.05 530.84,181.28" fill="none" id="router-1-backto-User" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="320.42,178.94,325.2082,170.3335,320.8668,173.96,317.2403,169.6186,320.42,178.94" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="ent0005" data-entity-2="ent0002" data-link-type="dependency" data-source-line="23" id="lnk15"><path d="M475.67,209.29 C486.98,209.29 492.29,209.29 503.61,209.29" fill="none" id="router-2-backto-User" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="469.67,209.29,478.67,213.29,474.67,209.29,478.67,205.29,469.67,209.29" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="ent0004" data-entity-2="ent0006" data-link-type="dependency" data-source-line="25" id="lnk16"><path d="M279.99,209.29 C274.255,209.29 268.52,209.29 262.785,209.29 C259.9175,209.29 257.05,209.29 254.1825,209.29 C253.8241,209.29 259.4656,209.29 259.1072,209.29" fill="none" id="router-1-to-DC-msk" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="253.1072,209.29,262.1072,213.29,258.1072,209.29,262.1072,205.29,253.1072,209.29" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="ent0004" data-entity-2="ent0009" data-link-type="dependency" data-source-line="26" id="lnk17"><path d="M313.22,239.72 C308.1,265.785 300.4575,304.6775 294.0163,337.4563 C293.2111,341.5536 292.4247,345.5554 291.6644,349.4247 C291.2842,351.3594 290.9105,353.2609 290.5443,355.1246 C290.3612,356.0565 291.3368,351.0915 291.1575,352.004" fill="none" id="router-1-to-DC-spb" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="290.0006,357.8914,295.6609,349.8315,290.9647,352.9852,287.811,348.289,290.0006,357.8914" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="ent0005" data-entity-2="ent0006" data-link-type="dependency" data-source-line="28" id="lnk18"><path d="M429.58,178.94 C425.67,135.36 411.13,56.95 357.5,26.15 C322.43,6 301.57,6 266.5,26.15 C249.4275,35.955 239.3169,51.6188 233.8084,69.7605 C231.0542,78.8313 229.4505,88.5217 228.7025,98.4089 C228.3284,103.3525 228.1683,108.3454 228.1852,113.3346 C228.1862,113.6465 228.1412,107.9585 228.1436,108.2703" fill="none" id="router-2-to-DC-msk" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="228.1904,114.2701,232.1201,105.2392,228.1514,109.2702,224.1204,105.3015,228.1904,114.2701" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="ent0005" data-entity-2="ent0009" data-link-type="dependency" data-source-line="29" id="lnk19"><path d="M407.87,239.74 C397.79,252.56 385.82,267.75 375,281.44 C354.71,307.11 331.865,335.89 313.895,358.5 C304.91,369.805 297.1438,379.5675 291.525,386.6275 C291.1738,387.0688 290.831,387.4994 290.4969,387.9193 C290.3298,388.1292 293.9014,383.642 293.7387,383.8464" fill="none" id="router-2-to-DC-spb" style="stroke:#E7E7E7;stroke-width:1;"/><polygon fill="#E7E7E7" points="290.0021,388.5409,298.7366,383.9902,293.1159,384.6288,292.4773,379.0081,290.0021,388.5409" style="stroke:#E7E7E7;stroke-width:1;"/></g><g class="link" data-entity-1="ent0007" data-entity-2="ent0010" data-link-type="dependency" data-source-line="31" id="lnk20"><path d="M98.3468,247.6974 C105.1768,282.4574 113.7928,326.2826 120.6328,361.0826" fill="none" id="r1-s1-r1-s2" style="stroke:#8FBC8F;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="#8FBC8F" points="97.19,241.81,95.0003,251.4124,98.154,246.7162,102.8502,249.8699,97.19,241.81" style="stroke:#8FBC8F;stroke-width:1;"/><polygon fill="#8FBC8F" points="121.79,366.97,123.9791,357.3675,120.8257,362.0639,116.1293,358.9104,121.79,366.97" style="stroke:#8FBC8F;stroke-width:1;"/></g><g class="link" data-entity-1="ent0008" data-entity-2="ent0011" data-link-type="dependency" data-source-line="32" id="lnk21"><path d="M189.3468,247.6974 C196.1768,282.4574 204.7928,326.2826 211.6328,361.0826" fill="none" id="r2-s2-r2-s1" style="stroke:#ADD8E6;stroke-width:1;stroke-dasharray:7,7;"/><polygon fill="#ADD8E6" points="188.19,241.81,186.0003,251.4124,189.154,246.7162,193.8502,249.8699,188.19,241.81" style="stroke:#ADD8E6;stroke-width:1;"/><polygon fill="#ADD8E6" points="212.79,366.97,214.9791,357.3675,211.8257,362.0639,207.1293,358.9104,212.79,366.97" style="stroke:#ADD8E6;stroke-width:1;"/></g><g class="legend" data-source-line="34"><rect fill="none" height="62.8906" rx="12.5" ry="12.5" style="stroke:#FFFFFF;stroke-width:1;" width="225.8105" x="161.0698" y="504.74"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72.6797" x="192.771" y="524.7351">Replicaset</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58.5771" x="305.5024" y="524.7351">Replicas</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="166.0698" y="541.032">Â </text><text fill="#8FBC8F" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="14.6631" x="170.52" y="541.032">r1</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80.7324" x="296.602" y="541.032">r1-s1, r1-s2</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="166.0698" y="557.3289">Â </text><text fill="#ADD8E6" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="14.6631" x="170.52" y="557.3289">r2</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80.7324" x="296.602" y="557.3289">r2-s1, r2-s2</text><line style="stroke:#FFFFFF;stroke-width:1;" x1="166.0698" x2="381.8804" y1="511.74" y2="511.74"/><line style="stroke:#FFFFFF;stroke-width:1;" x1="166.0698" x2="381.8804" y1="528.0369" y2="528.0369"/><line style="stroke:#FFFFFF;stroke-width:1;" x1="166.0698" x2="381.8804" y1="544.3338" y2="544.3338"/><line style="stroke:#FFFFFF;stroke-width:1;" x1="166.0698" x2="381.8804" y1="560.6306" y2="560.6306"/><line style="stroke:#FFFFFF;stroke-width:1;" x1="166.0698" x2="166.0698" y1="511.74" y2="560.6306"/><line style="stroke:#FFFFFF;stroke-width:1;" x1="292.1518" x2="292.1518" y1="511.74" y2="560.6306"/><line style="stroke:#FFFFFF;stroke-width:1;" x1="381.8804" x2="381.8804" y1="511.74" y2="560.6306"/></g><?plantuml-src dPDDRzim38Rl_XLgscDjDG9wAG8Vag0x3BjqwxbWPDOMB4i6HQ-7TlzzyWTI9tM1hReO8X-IBqdhmZXjkm95nTo6Eoa9NhBISDKTke2alMDqd6dVo1-chi3OxmI_aODiwiBhyDHsZPKD14QIN663GHRu39rbMG3LMUzFGcrS2mID8D-vGdjoI4BTpXmMItJ55dHT3ipEMq_YyduuDpT9GgWPN6bHh1wZifNORAw0T6KQO9IWsLEUpwbVCQzZx-r-AtQswnMkn6kI2540mm52P6AfQ4xNPzcUhN-9oHP8jKn6T5PvlqkRK9-HrcjWursUHn52dEHUf-5SWlC5HlHo7uVu4-4R8RhpC9K6zKcODMN5MzjXZFdpKLve3_ydJtrDtlgVv4M1qqvJc-QphIoQrIhYxujBgVTD8rzqzCs-XwZFGjH2oBIOBCkFOpXj-RY44HbRdhMNZF_rC9etCPm7RAtHSKGytjzcjk4-mHlTFu6xatevhKVdeEnw-AWF4SVoEQcULIEhHZRAcLxRNm00?></g></svg></div></div>

<p>Define the configuration above using <code>Tarantool3Configuration</code>:</p>
<div class="language-java highlight"><pre><span></span><code><span id="__spanz-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Arrays</span><span class="p">;</span>
</span><span id="__spanz-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Collections</span><span class="p">;</span>
</span><span id="__spanz-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>
</span><span id="__spanz-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Map</span><span class="p">;</span>
</span><span id="__spanz-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Set</span><span class="p">;</span>
</span><span id="__spanz-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>
</span><span id="__spanz-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.jupiter.api.Assertions</span><span class="p">;</span>
</span><span id="__spanz-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.jupiter.api.Test</span><span class="p">;</span>
</span><span id="__spanz-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.testcontainers.containers.tarantool.TarantoolContainer</span><span class="p">;</span>
</span><span id="__spanz-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.testcontainers.containers.tdb.TDB2ClusterImpl</span><span class="p">;</span>
</span><span id="__spanz-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.testcontainers.containers.tdb.TDBCluster</span><span class="p">;</span>
</span><span id="__spanz-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>
</span><span id="__spanz-6-13"><a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="kn">import</span><span class="w"> </span><span class="nn">io.tarantool.autogen.Tarantool3Configuration</span><span class="p">;</span>
</span><span id="__spanz-6-14"><a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="kn">import</span><span class="w"> </span><span class="nn">io.tarantool.autogen.credentials.Credentials</span><span class="p">;</span>
</span><span id="__spanz-6-15"><a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a><span class="kn">import</span><span class="w"> </span><span class="nn">io.tarantool.autogen.credentials.users.Users</span><span class="p">;</span>
</span><span id="__spanz-6-16"><a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a><span class="kn">import</span><span class="w"> </span><span class="nn">io.tarantool.autogen.credentials.users.usersProperty.UsersProperty</span><span class="p">;</span>
</span><span id="__spanz-6-17"><a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a><span class="kn">import</span><span class="w"> </span><span class="nn">io.tarantool.autogen.groups.Groups</span><span class="p">;</span>
</span><span id="__spanz-6-18"><a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a><span class="kn">import</span><span class="w"> </span><span class="nn">io.tarantool.autogen.groups.groupsProperty.GroupsProperty</span><span class="p">;</span>
</span><span id="__spanz-6-19"><a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a><span class="kn">import</span><span class="w"> </span><span class="nn">io.tarantool.autogen.groups.groupsProperty.replicasets.Replicasets</span><span class="p">;</span>
</span><span id="__spanz-6-20"><a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a><span class="kn">import</span><span class="w"> </span><span class="nn">io.tarantool.autogen.groups.groupsProperty.replicasets.replicasetsProperty.ReplicasetsProperty</span><span class="p">;</span>
</span><span id="__spanz-6-21"><a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a><span class="kn">import</span><span class="w"> </span><span class="nn">io.tarantool.autogen.groups.groupsProperty.replicasets.replicasetsProperty.instances.Instances</span><span class="p">;</span>
</span><span id="__spanz-6-22"><a id="__codelineno-6-22" name="__codelineno-6-22" href="#__codelineno-6-22"></a><span class="kn">import</span><span class="w"> </span><span class="nn">io.tarantool.autogen.groups.groupsProperty.replicasets.replicasetsProperty.instances.instancesProperty.InstancesProperty</span><span class="p">;</span>
</span><span id="__spanz-6-23"><a id="__codelineno-6-23" name="__codelineno-6-23" href="#__codelineno-6-23"></a><span class="kn">import</span><span class="w"> </span><span class="nn">io.tarantool.autogen.groups.groupsProperty.replicasets.replicasetsProperty.instances.instancesProperty.iproto.Iproto</span><span class="p">;</span>
</span><span id="__spanz-6-24"><a id="__codelineno-6-24" name="__codelineno-6-24" href="#__codelineno-6-24"></a><span class="kn">import</span><span class="w"> </span><span class="nn">io.tarantool.autogen.groups.groupsProperty.replicasets.replicasetsProperty.instances.instancesProperty.iproto.advertise.Advertise</span><span class="p">;</span>
</span><span id="__spanz-6-25"><a id="__codelineno-6-25" name="__codelineno-6-25" href="#__codelineno-6-25"></a><span class="kn">import</span><span class="w"> </span><span class="nn">io.tarantool.autogen.groups.groupsProperty.replicasets.replicasetsProperty.instances.instancesProperty.iproto.listen.Listen</span><span class="p">;</span>
</span><span id="__spanz-6-26"><a id="__codelineno-6-26" name="__codelineno-6-26" href="#__codelineno-6-26"></a><span class="kn">import</span><span class="w"> </span><span class="nn">io.tarantool.autogen.groups.groupsProperty.replication.Replication</span><span class="p">;</span>
</span><span id="__spanz-6-27"><a id="__codelineno-6-27" name="__codelineno-6-27" href="#__codelineno-6-27"></a><span class="kn">import</span><span class="w"> </span><span class="nn">io.tarantool.autogen.groups.groupsProperty.replication.Replication.Failover</span><span class="p">;</span>
</span><span id="__spanz-6-28"><a id="__codelineno-6-28" name="__codelineno-6-28" href="#__codelineno-6-28"></a><span class="kn">import</span><span class="w"> </span><span class="nn">io.tarantool.autogen.groups.groupsProperty.sharding.Role</span><span class="p">;</span>
</span><span id="__spanz-6-29"><a id="__codelineno-6-29" name="__codelineno-6-29" href="#__codelineno-6-29"></a><span class="kn">import</span><span class="w"> </span><span class="nn">io.tarantool.autogen.groups.groupsProperty.sharding.Sharding</span><span class="p">;</span>
</span><span id="__spanz-6-30"><a id="__codelineno-6-30" name="__codelineno-6-30" href="#__codelineno-6-30"></a><span class="kn">import</span><span class="w"> </span><span class="nn">io.tarantool.autogen.iproto.advertise.peer.Peer</span><span class="p">;</span>
</span><span id="__spanz-6-31"><a id="__codelineno-6-31" name="__codelineno-6-31" href="#__codelineno-6-31"></a>
</span><span id="__spanz-6-32"><a id="__codelineno-6-32" name="__codelineno-6-32" href="#__codelineno-6-32"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">TestClass</span><span class="w"> </span><span class="p">{</span>
</span><span id="__spanz-6-33"><a id="__codelineno-6-33" name="__codelineno-6-33" href="#__codelineno-6-33"></a>
</span><span id="__spanz-6-34"><a id="__codelineno-6-34" name="__codelineno-6-34" href="#__codelineno-6-34"></a><span class="w">  </span><span class="c1">// this user must be always for TCM</span>
</span><span id="__spanz-6-35"><a id="__codelineno-6-35" name="__codelineno-6-35" href="#__codelineno-6-35"></a><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">CharSequence</span><span class="w"> </span><span class="n">TEST_USER_PWD</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;test&quot;</span><span class="p">;</span>
</span><span id="__spanz-6-36"><a id="__codelineno-6-36" name="__codelineno-6-36" href="#__codelineno-6-36"></a><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">TEST_USER</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;test-super&quot;</span><span class="p">;</span>
</span><span id="__spanz-6-37"><a id="__codelineno-6-37" name="__codelineno-6-37" href="#__codelineno-6-37"></a><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">URI_FORMAT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;%s:&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">TarantoolContainer</span><span class="p">.</span><span class="na">DEFAULT_TARANTOOL_PORT</span><span class="p">;</span>
</span><span id="__spanz-6-38"><a id="__codelineno-6-38" name="__codelineno-6-38" href="#__codelineno-6-38"></a>
</span><span id="__spanz-6-39"><a id="__codelineno-6-39" name="__codelineno-6-39" href="#__codelineno-6-39"></a><span class="w">  </span><span class="nd">@Test</span>
</span><span id="__spanz-6-40"><a id="__codelineno-6-40" name="__codelineno-6-40" href="#__codelineno-6-40"></a><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">testCustomConfigurationCluster</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__spanz-6-41"><a id="__codelineno-6-41" name="__codelineno-6-41" href="#__codelineno-6-41"></a>
</span><span id="__spanz-6-42"><a id="__codelineno-6-42" name="__codelineno-6-42" href="#__codelineno-6-42"></a><span class="w">    </span><span class="c1">// introduce configuration</span>
</span><span id="__spanz-6-43"><a id="__codelineno-6-43" name="__codelineno-6-43" href="#__codelineno-6-43"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">io</span><span class="p">.</span><span class="na">tarantool</span><span class="p">.</span><span class="na">autogen</span><span class="p">.</span><span class="na">iproto</span><span class="p">.</span><span class="na">Iproto</span><span class="w"> </span><span class="n">gIproto</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">io</span><span class="p">.</span><span class="na">tarantool</span><span class="p">.</span><span class="na">autogen</span><span class="p">.</span><span class="na">iproto</span><span class="p">.</span><span class="na">Iproto</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
</span><span id="__spanz-6-44"><a id="__codelineno-6-44" name="__codelineno-6-44" href="#__codelineno-6-44"></a><span class="w">        </span><span class="p">.</span><span class="na">withAdvertise</span><span class="p">(</span><span class="n">io</span><span class="p">.</span><span class="na">tarantool</span><span class="p">.</span><span class="na">autogen</span><span class="p">.</span><span class="na">iproto</span><span class="p">.</span><span class="na">advertise</span><span class="p">.</span><span class="na">Advertise</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
</span><span id="__spanz-6-45"><a id="__codelineno-6-45" name="__codelineno-6-45" href="#__codelineno-6-45"></a><span class="w">            </span><span class="p">.</span><span class="na">withPeer</span><span class="p">(</span><span class="n">Peer</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
</span><span id="__spanz-6-46"><a id="__codelineno-6-46" name="__codelineno-6-46" href="#__codelineno-6-46"></a><span class="w">                </span><span class="p">.</span><span class="na">withLogin</span><span class="p">(</span><span class="s">&quot;replicator&quot;</span><span class="p">)</span>
</span><span id="__spanz-6-47"><a id="__codelineno-6-47" name="__codelineno-6-47" href="#__codelineno-6-47"></a><span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">())</span>
</span><span id="__spanz-6-48"><a id="__codelineno-6-48" name="__codelineno-6-48" href="#__codelineno-6-48"></a><span class="w">            </span><span class="p">.</span><span class="na">withSharding</span><span class="p">(</span><span class="n">io</span><span class="p">.</span><span class="na">tarantool</span><span class="p">.</span><span class="na">autogen</span><span class="p">.</span><span class="na">iproto</span><span class="p">.</span><span class="na">advertise</span><span class="p">.</span><span class="na">sharding</span><span class="p">.</span><span class="na">Sharding</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
</span><span id="__spanz-6-49"><a id="__codelineno-6-49" name="__codelineno-6-49" href="#__codelineno-6-49"></a><span class="w">                </span><span class="p">.</span><span class="na">withLogin</span><span class="p">(</span><span class="s">&quot;storage&quot;</span><span class="p">)</span>
</span><span id="__spanz-6-50"><a id="__codelineno-6-50" name="__codelineno-6-50" href="#__codelineno-6-50"></a><span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">())</span>
</span><span id="__spanz-6-51"><a id="__codelineno-6-51" name="__codelineno-6-51" href="#__codelineno-6-51"></a><span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">())</span>
</span><span id="__spanz-6-52"><a id="__codelineno-6-52" name="__codelineno-6-52" href="#__codelineno-6-52"></a><span class="w">        </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
</span><span id="__spanz-6-53"><a id="__codelineno-6-53" name="__codelineno-6-53" href="#__codelineno-6-53"></a>
</span><span id="__spanz-6-54"><a id="__codelineno-6-54" name="__codelineno-6-54" href="#__codelineno-6-54"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">UsersProperty</span><span class="w"> </span><span class="n">testUser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UsersProperty</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
</span><span id="__spanz-6-55"><a id="__codelineno-6-55" name="__codelineno-6-55" href="#__codelineno-6-55"></a><span class="w">        </span><span class="p">.</span><span class="na">withPassword</span><span class="p">(</span><span class="n">TEST_USER_PWD</span><span class="p">.</span><span class="na">toString</span><span class="p">())</span>
</span><span id="__spanz-6-56"><a id="__codelineno-6-56" name="__codelineno-6-56" href="#__codelineno-6-56"></a><span class="w">        </span><span class="p">.</span><span class="na">withRoles</span><span class="p">(</span><span class="n">Collections</span><span class="p">.</span><span class="na">singletonList</span><span class="p">(</span><span class="s">&quot;super&quot;</span><span class="p">))</span>
</span><span id="__spanz-6-57"><a id="__codelineno-6-57" name="__codelineno-6-57" href="#__codelineno-6-57"></a><span class="w">        </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
</span><span id="__spanz-6-58"><a id="__codelineno-6-58" name="__codelineno-6-58" href="#__codelineno-6-58"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">UsersProperty</span><span class="w"> </span><span class="n">replicatorUser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UsersProperty</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
</span><span id="__spanz-6-59"><a id="__codelineno-6-59" name="__codelineno-6-59" href="#__codelineno-6-59"></a><span class="w">        </span><span class="p">.</span><span class="na">withPassword</span><span class="p">(</span><span class="s">&quot;secret&quot;</span><span class="p">)</span>
</span><span id="__spanz-6-60"><a id="__codelineno-6-60" name="__codelineno-6-60" href="#__codelineno-6-60"></a><span class="w">        </span><span class="p">.</span><span class="na">withRoles</span><span class="p">(</span><span class="n">Collections</span><span class="p">.</span><span class="na">singletonList</span><span class="p">(</span><span class="s">&quot;replication&quot;</span><span class="p">))</span>
</span><span id="__spanz-6-61"><a id="__codelineno-6-61" name="__codelineno-6-61" href="#__codelineno-6-61"></a><span class="w">        </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
</span><span id="__spanz-6-62"><a id="__codelineno-6-62" name="__codelineno-6-62" href="#__codelineno-6-62"></a>
</span><span id="__spanz-6-63"><a id="__codelineno-6-63" name="__codelineno-6-63" href="#__codelineno-6-63"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">UsersProperty</span><span class="w"> </span><span class="n">storageUser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UsersProperty</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
</span><span id="__spanz-6-64"><a id="__codelineno-6-64" name="__codelineno-6-64" href="#__codelineno-6-64"></a><span class="w">        </span><span class="p">.</span><span class="na">withPassword</span><span class="p">(</span><span class="s">&quot;secret&quot;</span><span class="p">)</span>
</span><span id="__spanz-6-65"><a id="__codelineno-6-65" name="__codelineno-6-65" href="#__codelineno-6-65"></a><span class="w">        </span><span class="p">.</span><span class="na">withRoles</span><span class="p">(</span><span class="n">Collections</span><span class="p">.</span><span class="na">singletonList</span><span class="p">(</span><span class="s">&quot;sharding&quot;</span><span class="p">))</span>
</span><span id="__spanz-6-66"><a id="__codelineno-6-66" name="__codelineno-6-66" href="#__codelineno-6-66"></a><span class="w">        </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
</span><span id="__spanz-6-67"><a id="__codelineno-6-67" name="__codelineno-6-67" href="#__codelineno-6-67"></a>
</span><span id="__spanz-6-68"><a id="__codelineno-6-68" name="__codelineno-6-68" href="#__codelineno-6-68"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">Credentials</span><span class="w"> </span><span class="n">gCredentials</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Credentials</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
</span><span id="__spanz-6-69"><a id="__codelineno-6-69" name="__codelineno-6-69" href="#__codelineno-6-69"></a><span class="w">        </span><span class="p">.</span><span class="na">withUsers</span><span class="p">(</span><span class="n">Users</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
</span><span id="__spanz-6-70"><a id="__codelineno-6-70" name="__codelineno-6-70" href="#__codelineno-6-70"></a><span class="w">            </span><span class="p">.</span><span class="na">withAdditionalProperty</span><span class="p">(</span><span class="n">TEST_USER</span><span class="p">,</span><span class="w"> </span><span class="n">testUser</span><span class="p">)</span>
</span><span id="__spanz-6-71"><a id="__codelineno-6-71" name="__codelineno-6-71" href="#__codelineno-6-71"></a><span class="w">            </span><span class="p">.</span><span class="na">withAdditionalProperty</span><span class="p">(</span><span class="s">&quot;replicator&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">replicatorUser</span><span class="p">)</span>
</span><span id="__spanz-6-72"><a id="__codelineno-6-72" name="__codelineno-6-72" href="#__codelineno-6-72"></a><span class="w">            </span><span class="p">.</span><span class="na">withAdditionalProperty</span><span class="p">(</span><span class="s">&quot;storage&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">storageUser</span><span class="p">)</span>
</span><span id="__spanz-6-73"><a id="__codelineno-6-73" name="__codelineno-6-73" href="#__codelineno-6-73"></a><span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">())</span>
</span><span id="__spanz-6-74"><a id="__codelineno-6-74" name="__codelineno-6-74" href="#__codelineno-6-74"></a><span class="w">        </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
</span><span id="__spanz-6-75"><a id="__codelineno-6-75" name="__codelineno-6-75" href="#__codelineno-6-75"></a>
</span><span id="__spanz-6-76"><a id="__codelineno-6-76" name="__codelineno-6-76" href="#__codelineno-6-76"></a><span class="w">    </span><span class="c1">// introduce routers</span>
</span><span id="__spanz-6-77"><a id="__codelineno-6-77" name="__codelineno-6-77" href="#__codelineno-6-77"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">firstRouterInstanceName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;router-1&quot;</span><span class="p">;</span>
</span><span id="__spanz-6-78"><a id="__codelineno-6-78" name="__codelineno-6-78" href="#__codelineno-6-78"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">secondRouterInstanceName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;router-2&quot;</span><span class="p">;</span>
</span><span id="__spanz-6-79"><a id="__codelineno-6-79" name="__codelineno-6-79" href="#__codelineno-6-79"></a>
</span><span id="__spanz-6-80"><a id="__codelineno-6-80" name="__codelineno-6-80" href="#__codelineno-6-80"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">firstRouterUri</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="n">URI_FORMAT</span><span class="p">,</span><span class="w"> </span><span class="n">firstRouterInstanceName</span><span class="p">);</span>
</span><span id="__spanz-6-81"><a id="__codelineno-6-81" name="__codelineno-6-81" href="#__codelineno-6-81"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">secondRouterUri</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="n">URI_FORMAT</span><span class="p">,</span><span class="w"> </span><span class="n">secondRouterInstanceName</span><span class="p">);</span>
</span><span id="__spanz-6-82"><a id="__codelineno-6-82" name="__codelineno-6-82" href="#__codelineno-6-82"></a>
</span><span id="__spanz-6-83"><a id="__codelineno-6-83" name="__codelineno-6-83" href="#__codelineno-6-83"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">InstancesProperty</span><span class="w"> </span><span class="n">firstRouter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">InstancesProperty</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
</span><span id="__spanz-6-84"><a id="__codelineno-6-84" name="__codelineno-6-84" href="#__codelineno-6-84"></a><span class="w">        </span><span class="p">.</span><span class="na">withIproto</span><span class="p">(</span><span class="n">Iproto</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
</span><span id="__spanz-6-85"><a id="__codelineno-6-85" name="__codelineno-6-85" href="#__codelineno-6-85"></a><span class="w">            </span><span class="p">.</span><span class="na">withListen</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">Listen</span><span class="p">.</span><span class="na">builder</span><span class="p">().</span><span class="na">withUri</span><span class="p">(</span><span class="n">firstRouterUri</span><span class="p">).</span><span class="na">build</span><span class="p">()))</span>
</span><span id="__spanz-6-86"><a id="__codelineno-6-86" name="__codelineno-6-86" href="#__codelineno-6-86"></a><span class="w">            </span><span class="p">.</span><span class="na">withAdvertise</span><span class="p">(</span><span class="n">Advertise</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
</span><span id="__spanz-6-87"><a id="__codelineno-6-87" name="__codelineno-6-87" href="#__codelineno-6-87"></a><span class="w">                </span><span class="p">.</span><span class="na">withClient</span><span class="p">(</span><span class="n">firstRouterUri</span><span class="p">)</span>
</span><span id="__spanz-6-88"><a id="__codelineno-6-88" name="__codelineno-6-88" href="#__codelineno-6-88"></a><span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">())</span>
</span><span id="__spanz-6-89"><a id="__codelineno-6-89" name="__codelineno-6-89" href="#__codelineno-6-89"></a><span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">())</span>
</span><span id="__spanz-6-90"><a id="__codelineno-6-90" name="__codelineno-6-90" href="#__codelineno-6-90"></a><span class="w">        </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
</span><span id="__spanz-6-91"><a id="__codelineno-6-91" name="__codelineno-6-91" href="#__codelineno-6-91"></a>
</span><span id="__spanz-6-92"><a id="__codelineno-6-92" name="__codelineno-6-92" href="#__codelineno-6-92"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">ReplicasetsProperty</span><span class="w"> </span><span class="n">firstRouterRs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ReplicasetsProperty</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
</span><span id="__spanz-6-93"><a id="__codelineno-6-93" name="__codelineno-6-93" href="#__codelineno-6-93"></a><span class="w">        </span><span class="p">.</span><span class="na">withLeader</span><span class="p">(</span><span class="n">firstRouterInstanceName</span><span class="p">)</span>
</span><span id="__spanz-6-94"><a id="__codelineno-6-94" name="__codelineno-6-94" href="#__codelineno-6-94"></a><span class="w">        </span><span class="p">.</span><span class="na">withInstances</span><span class="p">(</span><span class="n">Instances</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
</span><span id="__spanz-6-95"><a id="__codelineno-6-95" name="__codelineno-6-95" href="#__codelineno-6-95"></a><span class="w">            </span><span class="p">.</span><span class="na">withAdditionalProperty</span><span class="p">(</span><span class="n">firstRouterInstanceName</span><span class="p">,</span><span class="w"> </span><span class="n">firstRouter</span><span class="p">)</span>
</span><span id="__spanz-6-96"><a id="__codelineno-6-96" name="__codelineno-6-96" href="#__codelineno-6-96"></a><span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">())</span>
</span><span id="__spanz-6-97"><a id="__codelineno-6-97" name="__codelineno-6-97" href="#__codelineno-6-97"></a><span class="w">        </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
</span><span id="__spanz-6-98"><a id="__codelineno-6-98" name="__codelineno-6-98" href="#__codelineno-6-98"></a>
</span><span id="__spanz-6-99"><a id="__codelineno-6-99" name="__codelineno-6-99" href="#__codelineno-6-99"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">InstancesProperty</span><span class="w"> </span><span class="n">secondRouter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">InstancesProperty</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
</span><span id="__spanz-6-100"><a id="__codelineno-6-100" name="__codelineno-6-100" href="#__codelineno-6-100"></a><span class="w">        </span><span class="p">.</span><span class="na">withIproto</span><span class="p">(</span><span class="n">Iproto</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
</span><span id="__spanz-6-101"><a id="__codelineno-6-101" name="__codelineno-6-101" href="#__codelineno-6-101"></a><span class="w">            </span><span class="p">.</span><span class="na">withListen</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">Listen</span><span class="p">.</span><span class="na">builder</span><span class="p">().</span><span class="na">withUri</span><span class="p">(</span><span class="n">secondRouterUri</span><span class="p">).</span><span class="na">build</span><span class="p">()))</span>
</span><span id="__spanz-6-102"><a id="__codelineno-6-102" name="__codelineno-6-102" href="#__codelineno-6-102"></a><span class="w">            </span><span class="p">.</span><span class="na">withAdvertise</span><span class="p">(</span><span class="n">Advertise</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
</span><span id="__spanz-6-103"><a id="__codelineno-6-103" name="__codelineno-6-103" href="#__codelineno-6-103"></a><span class="w">                </span><span class="p">.</span><span class="na">withClient</span><span class="p">(</span><span class="n">secondRouterUri</span><span class="p">)</span>
</span><span id="__spanz-6-104"><a id="__codelineno-6-104" name="__codelineno-6-104" href="#__codelineno-6-104"></a><span class="w">                </span><span class="p">.</span><span class="na">build</span><span class="p">())</span>
</span><span id="__spanz-6-105"><a id="__codelineno-6-105" name="__codelineno-6-105" href="#__codelineno-6-105"></a><span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">())</span>
</span><span id="__spanz-6-106"><a id="__codelineno-6-106" name="__codelineno-6-106" href="#__codelineno-6-106"></a><span class="w">        </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
</span><span id="__spanz-6-107"><a id="__codelineno-6-107" name="__codelineno-6-107" href="#__codelineno-6-107"></a>
</span><span id="__spanz-6-108"><a id="__codelineno-6-108" name="__codelineno-6-108" href="#__codelineno-6-108"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">ReplicasetsProperty</span><span class="w"> </span><span class="n">secondRouterRs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ReplicasetsProperty</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
</span><span id="__spanz-6-109"><a id="__codelineno-6-109" name="__codelineno-6-109" href="#__codelineno-6-109"></a><span class="w">        </span><span class="p">.</span><span class="na">withLeader</span><span class="p">(</span><span class="n">secondRouterInstanceName</span><span class="p">)</span>
</span><span id="__spanz-6-110"><a id="__codelineno-6-110" name="__codelineno-6-110" href="#__codelineno-6-110"></a><span class="w">        </span><span class="p">.</span><span class="na">withInstances</span><span class="p">(</span><span class="n">Instances</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
</span><span id="__spanz-6-111"><a id="__codelineno-6-111" name="__codelineno-6-111" href="#__codelineno-6-111"></a><span class="w">            </span><span class="p">.</span><span class="na">withAdditionalProperty</span><span class="p">(</span><span class="n">secondRouterInstanceName</span><span class="p">,</span><span class="w"> </span><span class="n">secondRouter</span><span class="p">)</span>
</span><span id="__spanz-6-112"><a id="__codelineno-6-112" name="__codelineno-6-112" href="#__codelineno-6-112"></a><span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">())</span>
</span><span id="__spanz-6-113"><a id="__codelineno-6-113" name="__codelineno-6-113" href="#__codelineno-6-113"></a><span class="w">        </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
</span><span id="__spanz-6-114"><a id="__codelineno-6-114" name="__codelineno-6-114" href="#__codelineno-6-114"></a>
</span><span id="__spanz-6-115"><a id="__codelineno-6-115" name="__codelineno-6-115" href="#__codelineno-6-115"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">GroupsProperty</span><span class="w"> </span><span class="n">routersGroup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GroupsProperty</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
</span><span id="__spanz-6-116"><a id="__codelineno-6-116" name="__codelineno-6-116" href="#__codelineno-6-116"></a><span class="w">        </span><span class="p">.</span><span class="na">withReplicasets</span><span class="p">(</span><span class="n">Replicasets</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
</span><span id="__spanz-6-117"><a id="__codelineno-6-117" name="__codelineno-6-117" href="#__codelineno-6-117"></a><span class="w">            </span><span class="p">.</span><span class="na">withAdditionalProperty</span><span class="p">(</span><span class="n">firstRouterInstanceName</span><span class="p">,</span><span class="w"> </span><span class="n">firstRouterRs</span><span class="p">)</span>
</span><span id="__spanz-6-118"><a id="__codelineno-6-118" name="__codelineno-6-118" href="#__codelineno-6-118"></a><span class="w">            </span><span class="p">.</span><span class="na">withAdditionalProperty</span><span class="p">(</span><span class="n">secondRouterInstanceName</span><span class="p">,</span><span class="w"> </span><span class="n">secondRouterRs</span><span class="p">)</span>
</span><span id="__spanz-6-119"><a id="__codelineno-6-119" name="__codelineno-6-119" href="#__codelineno-6-119"></a><span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">())</span>
</span><span id="__spanz-6-120"><a id="__codelineno-6-120" name="__codelineno-6-120" href="#__codelineno-6-120"></a><span class="w">        </span><span class="p">.</span><span class="na">withReplication</span><span class="p">(</span><span class="n">Replication</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
</span><span id="__spanz-6-121"><a id="__codelineno-6-121" name="__codelineno-6-121" href="#__codelineno-6-121"></a><span class="w">            </span><span class="p">.</span><span class="na">withFailover</span><span class="p">(</span><span class="n">Failover</span><span class="p">.</span><span class="na">MANUAL</span><span class="p">)</span>
</span><span id="__spanz-6-122"><a id="__codelineno-6-122" name="__codelineno-6-122" href="#__codelineno-6-122"></a><span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">())</span>
</span><span id="__spanz-6-123"><a id="__codelineno-6-123" name="__codelineno-6-123" href="#__codelineno-6-123"></a><span class="w">        </span><span class="p">.</span><span class="na">withRoles</span><span class="p">(</span><span class="n">Collections</span><span class="p">.</span><span class="na">singletonList</span><span class="p">(</span><span class="s">&quot;roles.crud-router&quot;</span><span class="p">))</span>
</span><span id="__spanz-6-124"><a id="__codelineno-6-124" name="__codelineno-6-124" href="#__codelineno-6-124"></a><span class="w">        </span><span class="p">.</span><span class="na">withSharding</span><span class="p">(</span><span class="n">Sharding</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
</span><span id="__spanz-6-125"><a id="__codelineno-6-125" name="__codelineno-6-125" href="#__codelineno-6-125"></a><span class="w">            </span><span class="p">.</span><span class="na">withRoles</span><span class="p">(</span><span class="n">Collections</span><span class="p">.</span><span class="na">singleton</span><span class="p">(</span><span class="n">Role</span><span class="p">.</span><span class="na">ROUTER</span><span class="p">))</span>
</span><span id="__spanz-6-126"><a id="__codelineno-6-126" name="__codelineno-6-126" href="#__codelineno-6-126"></a><span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">())</span>
</span><span id="__spanz-6-127"><a id="__codelineno-6-127" name="__codelineno-6-127" href="#__codelineno-6-127"></a><span class="w">        </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
</span><span id="__spanz-6-128"><a id="__codelineno-6-128" name="__codelineno-6-128" href="#__codelineno-6-128"></a>
</span><span id="__spanz-6-129"><a id="__codelineno-6-129" name="__codelineno-6-129" href="#__codelineno-6-129"></a><span class="w">    </span><span class="c1">// introduce r1 replicaset</span>
</span><span id="__spanz-6-130"><a id="__codelineno-6-130" name="__codelineno-6-130" href="#__codelineno-6-130"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">r1s1InstanceName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;r1-s1&quot;</span><span class="p">;</span>
</span><span id="__spanz-6-131"><a id="__codelineno-6-131" name="__codelineno-6-131" href="#__codelineno-6-131"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">r1s2InstanceName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;r1-s2&quot;</span><span class="p">;</span>
</span><span id="__spanz-6-132"><a id="__codelineno-6-132" name="__codelineno-6-132" href="#__codelineno-6-132"></a>
</span><span id="__spanz-6-133"><a id="__codelineno-6-133" name="__codelineno-6-133" href="#__codelineno-6-133"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">r1s1Uri</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="n">URI_FORMAT</span><span class="p">,</span><span class="w"> </span><span class="n">r1s1InstanceName</span><span class="p">);</span>
</span><span id="__spanz-6-134"><a id="__codelineno-6-134" name="__codelineno-6-134" href="#__codelineno-6-134"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">r1s2Uri</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="n">URI_FORMAT</span><span class="p">,</span><span class="w"> </span><span class="n">r1s2InstanceName</span><span class="p">);</span>
</span><span id="__spanz-6-135"><a id="__codelineno-6-135" name="__codelineno-6-135" href="#__codelineno-6-135"></a>
</span><span id="__spanz-6-136"><a id="__codelineno-6-136" name="__codelineno-6-136" href="#__codelineno-6-136"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">InstancesProperty</span><span class="w"> </span><span class="n">r1s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">InstancesProperty</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
</span><span id="__spanz-6-137"><a id="__codelineno-6-137" name="__codelineno-6-137" href="#__codelineno-6-137"></a><span class="w">        </span><span class="p">.</span><span class="na">withIproto</span><span class="p">(</span><span class="n">Iproto</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
</span><span id="__spanz-6-138"><a id="__codelineno-6-138" name="__codelineno-6-138" href="#__codelineno-6-138"></a><span class="w">            </span><span class="p">.</span><span class="na">withListen</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">Listen</span><span class="p">.</span><span class="na">builder</span><span class="p">().</span><span class="na">withUri</span><span class="p">(</span><span class="n">r1s1Uri</span><span class="p">).</span><span class="na">build</span><span class="p">()))</span>
</span><span id="__spanz-6-139"><a id="__codelineno-6-139" name="__codelineno-6-139" href="#__codelineno-6-139"></a><span class="w">            </span><span class="p">.</span><span class="na">withAdvertise</span><span class="p">(</span><span class="n">Advertise</span><span class="p">.</span><span class="na">builder</span><span class="p">().</span><span class="na">withClient</span><span class="p">(</span><span class="n">r1s1Uri</span><span class="p">).</span><span class="na">build</span><span class="p">())</span>
</span><span id="__spanz-6-140"><a id="__codelineno-6-140" name="__codelineno-6-140" href="#__codelineno-6-140"></a><span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">())</span>
</span><span id="__spanz-6-141"><a id="__codelineno-6-141" name="__codelineno-6-141" href="#__codelineno-6-141"></a><span class="w">        </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
</span><span id="__spanz-6-142"><a id="__codelineno-6-142" name="__codelineno-6-142" href="#__codelineno-6-142"></a>
</span><span id="__spanz-6-143"><a id="__codelineno-6-143" name="__codelineno-6-143" href="#__codelineno-6-143"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">InstancesProperty</span><span class="w"> </span><span class="n">r1s2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">InstancesProperty</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
</span><span id="__spanz-6-144"><a id="__codelineno-6-144" name="__codelineno-6-144" href="#__codelineno-6-144"></a><span class="w">        </span><span class="p">.</span><span class="na">withIproto</span><span class="p">(</span><span class="n">Iproto</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
</span><span id="__spanz-6-145"><a id="__codelineno-6-145" name="__codelineno-6-145" href="#__codelineno-6-145"></a><span class="w">            </span><span class="p">.</span><span class="na">withListen</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">Listen</span><span class="p">.</span><span class="na">builder</span><span class="p">().</span><span class="na">withUri</span><span class="p">(</span><span class="n">r1s2Uri</span><span class="p">).</span><span class="na">build</span><span class="p">()))</span>
</span><span id="__spanz-6-146"><a id="__codelineno-6-146" name="__codelineno-6-146" href="#__codelineno-6-146"></a><span class="w">            </span><span class="p">.</span><span class="na">withAdvertise</span><span class="p">(</span><span class="n">Advertise</span><span class="p">.</span><span class="na">builder</span><span class="p">().</span><span class="na">withClient</span><span class="p">(</span><span class="n">r1s2Uri</span><span class="p">).</span><span class="na">build</span><span class="p">())</span>
</span><span id="__spanz-6-147"><a id="__codelineno-6-147" name="__codelineno-6-147" href="#__codelineno-6-147"></a><span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">())</span>
</span><span id="__spanz-6-148"><a id="__codelineno-6-148" name="__codelineno-6-148" href="#__codelineno-6-148"></a><span class="w">        </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
</span><span id="__spanz-6-149"><a id="__codelineno-6-149" name="__codelineno-6-149" href="#__codelineno-6-149"></a>
</span><span id="__spanz-6-150"><a id="__codelineno-6-150" name="__codelineno-6-150" href="#__codelineno-6-150"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">ReplicasetsProperty</span><span class="w"> </span><span class="n">r1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ReplicasetsProperty</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
</span><span id="__spanz-6-151"><a id="__codelineno-6-151" name="__codelineno-6-151" href="#__codelineno-6-151"></a><span class="w">        </span><span class="p">.</span><span class="na">withInstances</span><span class="p">(</span><span class="n">Instances</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
</span><span id="__spanz-6-152"><a id="__codelineno-6-152" name="__codelineno-6-152" href="#__codelineno-6-152"></a><span class="w">            </span><span class="p">.</span><span class="na">withAdditionalProperty</span><span class="p">(</span><span class="n">r1s1InstanceName</span><span class="p">,</span><span class="w"> </span><span class="n">r1s1</span><span class="p">)</span>
</span><span id="__spanz-6-153"><a id="__codelineno-6-153" name="__codelineno-6-153" href="#__codelineno-6-153"></a><span class="w">            </span><span class="p">.</span><span class="na">withAdditionalProperty</span><span class="p">(</span><span class="n">r1s2InstanceName</span><span class="p">,</span><span class="w"> </span><span class="n">r1s2</span><span class="p">)</span>
</span><span id="__spanz-6-154"><a id="__codelineno-6-154" name="__codelineno-6-154" href="#__codelineno-6-154"></a><span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">())</span>
</span><span id="__spanz-6-155"><a id="__codelineno-6-155" name="__codelineno-6-155" href="#__codelineno-6-155"></a><span class="w">        </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
</span><span id="__spanz-6-156"><a id="__codelineno-6-156" name="__codelineno-6-156" href="#__codelineno-6-156"></a>
</span><span id="__spanz-6-157"><a id="__codelineno-6-157" name="__codelineno-6-157" href="#__codelineno-6-157"></a><span class="w">    </span><span class="c1">// introduce r2 replicaset</span>
</span><span id="__spanz-6-158"><a id="__codelineno-6-158" name="__codelineno-6-158" href="#__codelineno-6-158"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">r2s1InstanceName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;r2-s1&quot;</span><span class="p">;</span>
</span><span id="__spanz-6-159"><a id="__codelineno-6-159" name="__codelineno-6-159" href="#__codelineno-6-159"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">r2s2InstanceName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;r2-s2&quot;</span><span class="p">;</span>
</span><span id="__spanz-6-160"><a id="__codelineno-6-160" name="__codelineno-6-160" href="#__codelineno-6-160"></a>
</span><span id="__spanz-6-161"><a id="__codelineno-6-161" name="__codelineno-6-161" href="#__codelineno-6-161"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">r2s1Uri</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="n">URI_FORMAT</span><span class="p">,</span><span class="w"> </span><span class="n">r2s1InstanceName</span><span class="p">);</span>
</span><span id="__spanz-6-162"><a id="__codelineno-6-162" name="__codelineno-6-162" href="#__codelineno-6-162"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">r2s2Uri</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="n">URI_FORMAT</span><span class="p">,</span><span class="w"> </span><span class="n">r2s2InstanceName</span><span class="p">);</span>
</span><span id="__spanz-6-163"><a id="__codelineno-6-163" name="__codelineno-6-163" href="#__codelineno-6-163"></a>
</span><span id="__spanz-6-164"><a id="__codelineno-6-164" name="__codelineno-6-164" href="#__codelineno-6-164"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">InstancesProperty</span><span class="w"> </span><span class="n">r2s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">InstancesProperty</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
</span><span id="__spanz-6-165"><a id="__codelineno-6-165" name="__codelineno-6-165" href="#__codelineno-6-165"></a><span class="w">        </span><span class="p">.</span><span class="na">withIproto</span><span class="p">(</span><span class="n">Iproto</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
</span><span id="__spanz-6-166"><a id="__codelineno-6-166" name="__codelineno-6-166" href="#__codelineno-6-166"></a><span class="w">            </span><span class="p">.</span><span class="na">withListen</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">Listen</span><span class="p">.</span><span class="na">builder</span><span class="p">().</span><span class="na">withUri</span><span class="p">(</span><span class="n">r2s1Uri</span><span class="p">).</span><span class="na">build</span><span class="p">()))</span>
</span><span id="__spanz-6-167"><a id="__codelineno-6-167" name="__codelineno-6-167" href="#__codelineno-6-167"></a><span class="w">            </span><span class="p">.</span><span class="na">withAdvertise</span><span class="p">(</span><span class="n">Advertise</span><span class="p">.</span><span class="na">builder</span><span class="p">().</span><span class="na">withClient</span><span class="p">(</span><span class="n">r2s1Uri</span><span class="p">).</span><span class="na">build</span><span class="p">())</span>
</span><span id="__spanz-6-168"><a id="__codelineno-6-168" name="__codelineno-6-168" href="#__codelineno-6-168"></a><span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">())</span>
</span><span id="__spanz-6-169"><a id="__codelineno-6-169" name="__codelineno-6-169" href="#__codelineno-6-169"></a><span class="w">        </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
</span><span id="__spanz-6-170"><a id="__codelineno-6-170" name="__codelineno-6-170" href="#__codelineno-6-170"></a>
</span><span id="__spanz-6-171"><a id="__codelineno-6-171" name="__codelineno-6-171" href="#__codelineno-6-171"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">InstancesProperty</span><span class="w"> </span><span class="n">r2s2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">InstancesProperty</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
</span><span id="__spanz-6-172"><a id="__codelineno-6-172" name="__codelineno-6-172" href="#__codelineno-6-172"></a><span class="w">        </span><span class="p">.</span><span class="na">withIproto</span><span class="p">(</span><span class="n">Iproto</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
</span><span id="__spanz-6-173"><a id="__codelineno-6-173" name="__codelineno-6-173" href="#__codelineno-6-173"></a><span class="w">            </span><span class="p">.</span><span class="na">withListen</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">Listen</span><span class="p">.</span><span class="na">builder</span><span class="p">().</span><span class="na">withUri</span><span class="p">(</span><span class="n">r2s2Uri</span><span class="p">).</span><span class="na">build</span><span class="p">()))</span>
</span><span id="__spanz-6-174"><a id="__codelineno-6-174" name="__codelineno-6-174" href="#__codelineno-6-174"></a><span class="w">            </span><span class="p">.</span><span class="na">withAdvertise</span><span class="p">(</span><span class="n">Advertise</span><span class="p">.</span><span class="na">builder</span><span class="p">().</span><span class="na">withClient</span><span class="p">(</span><span class="n">r2s2Uri</span><span class="p">).</span><span class="na">build</span><span class="p">())</span>
</span><span id="__spanz-6-175"><a id="__codelineno-6-175" name="__codelineno-6-175" href="#__codelineno-6-175"></a><span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">())</span>
</span><span id="__spanz-6-176"><a id="__codelineno-6-176" name="__codelineno-6-176" href="#__codelineno-6-176"></a><span class="w">        </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
</span><span id="__spanz-6-177"><a id="__codelineno-6-177" name="__codelineno-6-177" href="#__codelineno-6-177"></a>
</span><span id="__spanz-6-178"><a id="__codelineno-6-178" name="__codelineno-6-178" href="#__codelineno-6-178"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">ReplicasetsProperty</span><span class="w"> </span><span class="n">r2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ReplicasetsProperty</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
</span><span id="__spanz-6-179"><a id="__codelineno-6-179" name="__codelineno-6-179" href="#__codelineno-6-179"></a><span class="w">        </span><span class="p">.</span><span class="na">withInstances</span><span class="p">(</span><span class="n">Instances</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
</span><span id="__spanz-6-180"><a id="__codelineno-6-180" name="__codelineno-6-180" href="#__codelineno-6-180"></a><span class="w">            </span><span class="p">.</span><span class="na">withAdditionalProperty</span><span class="p">(</span><span class="n">r2s1InstanceName</span><span class="p">,</span><span class="w"> </span><span class="n">r2s1</span><span class="p">)</span>
</span><span id="__spanz-6-181"><a id="__codelineno-6-181" name="__codelineno-6-181" href="#__codelineno-6-181"></a><span class="w">            </span><span class="p">.</span><span class="na">withAdditionalProperty</span><span class="p">(</span><span class="n">r2s2InstanceName</span><span class="p">,</span><span class="w"> </span><span class="n">r2s2</span><span class="p">)</span>
</span><span id="__spanz-6-182"><a id="__codelineno-6-182" name="__codelineno-6-182" href="#__codelineno-6-182"></a><span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">())</span>
</span><span id="__spanz-6-183"><a id="__codelineno-6-183" name="__codelineno-6-183" href="#__codelineno-6-183"></a><span class="w">        </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
</span><span id="__spanz-6-184"><a id="__codelineno-6-184" name="__codelineno-6-184" href="#__codelineno-6-184"></a>
</span><span id="__spanz-6-185"><a id="__codelineno-6-185" name="__codelineno-6-185" href="#__codelineno-6-185"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">GroupsProperty</span><span class="w"> </span><span class="n">storagesGroup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GroupsProperty</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
</span><span id="__spanz-6-186"><a id="__codelineno-6-186" name="__codelineno-6-186" href="#__codelineno-6-186"></a><span class="w">        </span><span class="p">.</span><span class="na">withReplicasets</span><span class="p">(</span><span class="n">Replicasets</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
</span><span id="__spanz-6-187"><a id="__codelineno-6-187" name="__codelineno-6-187" href="#__codelineno-6-187"></a><span class="w">            </span><span class="p">.</span><span class="na">withAdditionalProperty</span><span class="p">(</span><span class="s">&quot;r1&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">r1</span><span class="p">)</span>
</span><span id="__spanz-6-188"><a id="__codelineno-6-188" name="__codelineno-6-188" href="#__codelineno-6-188"></a><span class="w">            </span><span class="p">.</span><span class="na">withAdditionalProperty</span><span class="p">(</span><span class="s">&quot;r2&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">r2</span><span class="p">)</span>
</span><span id="__spanz-6-189"><a id="__codelineno-6-189" name="__codelineno-6-189" href="#__codelineno-6-189"></a><span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">())</span>
</span><span id="__spanz-6-190"><a id="__codelineno-6-190" name="__codelineno-6-190" href="#__codelineno-6-190"></a><span class="w">        </span><span class="p">.</span><span class="na">withReplication</span><span class="p">(</span><span class="n">Replication</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
</span><span id="__spanz-6-191"><a id="__codelineno-6-191" name="__codelineno-6-191" href="#__codelineno-6-191"></a><span class="w">            </span><span class="p">.</span><span class="na">withFailover</span><span class="p">(</span><span class="n">Failover</span><span class="p">.</span><span class="na">ELECTION</span><span class="p">)</span>
</span><span id="__spanz-6-192"><a id="__codelineno-6-192" name="__codelineno-6-192" href="#__codelineno-6-192"></a><span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">())</span>
</span><span id="__spanz-6-193"><a id="__codelineno-6-193" name="__codelineno-6-193" href="#__codelineno-6-193"></a><span class="w">        </span><span class="p">.</span><span class="na">withRoles</span><span class="p">(</span><span class="n">Collections</span><span class="p">.</span><span class="na">singletonList</span><span class="p">(</span><span class="s">&quot;roles.crud-storage&quot;</span><span class="p">))</span>
</span><span id="__spanz-6-194"><a id="__codelineno-6-194" name="__codelineno-6-194" href="#__codelineno-6-194"></a><span class="w">        </span><span class="p">.</span><span class="na">withSharding</span><span class="p">(</span><span class="n">Sharding</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
</span><span id="__spanz-6-195"><a id="__codelineno-6-195" name="__codelineno-6-195" href="#__codelineno-6-195"></a><span class="w">            </span><span class="p">.</span><span class="na">withRoles</span><span class="p">(</span><span class="n">Collections</span><span class="p">.</span><span class="na">singleton</span><span class="p">(</span><span class="n">Role</span><span class="p">.</span><span class="na">STORAGE</span><span class="p">))</span>
</span><span id="__spanz-6-196"><a id="__codelineno-6-196" name="__codelineno-6-196" href="#__codelineno-6-196"></a><span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">())</span>
</span><span id="__spanz-6-197"><a id="__codelineno-6-197" name="__codelineno-6-197" href="#__codelineno-6-197"></a><span class="w">        </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
</span><span id="__spanz-6-198"><a id="__codelineno-6-198" name="__codelineno-6-198" href="#__codelineno-6-198"></a>
</span><span id="__spanz-6-199"><a id="__codelineno-6-199" name="__codelineno-6-199" href="#__codelineno-6-199"></a><span class="w">    </span><span class="c1">// introduce configuration</span>
</span><span id="__spanz-6-200"><a id="__codelineno-6-200" name="__codelineno-6-200" href="#__codelineno-6-200"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">Tarantool3Configuration</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Tarantool3Configuration</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
</span><span id="__spanz-6-201"><a id="__codelineno-6-201" name="__codelineno-6-201" href="#__codelineno-6-201"></a><span class="w">        </span><span class="p">.</span><span class="na">withCredentials</span><span class="p">(</span><span class="n">gCredentials</span><span class="p">)</span>
</span><span id="__spanz-6-202"><a id="__codelineno-6-202" name="__codelineno-6-202" href="#__codelineno-6-202"></a><span class="w">        </span><span class="p">.</span><span class="na">withGroups</span><span class="p">(</span><span class="n">Groups</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
</span><span id="__spanz-6-203"><a id="__codelineno-6-203" name="__codelineno-6-203" href="#__codelineno-6-203"></a><span class="w">            </span><span class="p">.</span><span class="na">withAdditionalProperty</span><span class="p">(</span><span class="s">&quot;routers&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">routersGroup</span><span class="p">)</span>
</span><span id="__spanz-6-204"><a id="__codelineno-6-204" name="__codelineno-6-204" href="#__codelineno-6-204"></a><span class="w">            </span><span class="p">.</span><span class="na">withAdditionalProperty</span><span class="p">(</span><span class="s">&quot;storages&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">storagesGroup</span><span class="p">)</span>
</span><span id="__spanz-6-205"><a id="__codelineno-6-205" name="__codelineno-6-205" href="#__codelineno-6-205"></a><span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">())</span>
</span><span id="__spanz-6-206"><a id="__codelineno-6-206" name="__codelineno-6-206" href="#__codelineno-6-206"></a><span class="w">        </span><span class="p">.</span><span class="na">withIproto</span><span class="p">(</span><span class="n">gIproto</span><span class="p">)</span>
</span><span id="__spanz-6-207"><a id="__codelineno-6-207" name="__codelineno-6-207" href="#__codelineno-6-207"></a><span class="w">        </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
</span><span id="__spanz-6-208"><a id="__codelineno-6-208" name="__codelineno-6-208" href="#__codelineno-6-208"></a>
</span><span id="__spanz-6-209"><a id="__codelineno-6-209" name="__codelineno-6-209" href="#__codelineno-6-209"></a><span class="w">    </span><span class="c1">// check cluster</span>
</span><span id="__spanz-6-210"><a id="__codelineno-6-210" name="__codelineno-6-210" href="#__codelineno-6-210"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">TDBCluster</span><span class="w"> </span><span class="n">cluster</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TDB2ClusterImpl</span><span class="p">.</span><span class="na">builder</span><span class="p">(</span><span class="s">&quot;tarantooldb:2.2.1&quot;</span><span class="p">)</span>
</span><span id="__spanz-6-211"><a id="__codelineno-6-211" name="__codelineno-6-211" href="#__codelineno-6-211"></a><span class="w">        </span><span class="c1">// it will use configuration object for cluster configuration instead of replicaCount and etc</span>
</span><span id="__spanz-6-212"><a id="__codelineno-6-212" name="__codelineno-6-212" href="#__codelineno-6-212"></a><span class="w">        </span><span class="p">.</span><span class="na">withTDB2Configuration</span><span class="p">(</span><span class="n">configuration</span><span class="p">)</span>
</span><span id="__spanz-6-213"><a id="__codelineno-6-213" name="__codelineno-6-213" href="#__codelineno-6-213"></a><span class="w">        </span><span class="p">.</span><span class="na">build</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__spanz-6-214"><a id="__codelineno-6-214" name="__codelineno-6-214" href="#__codelineno-6-214"></a><span class="w">      </span><span class="n">cluster</span><span class="p">.</span><span class="na">start</span><span class="p">();</span>
</span><span id="__spanz-6-215"><a id="__codelineno-6-215" name="__codelineno-6-215" href="#__codelineno-6-215"></a>
</span><span id="__spanz-6-216"><a id="__codelineno-6-216" name="__codelineno-6-216" href="#__codelineno-6-216"></a><span class="w">      </span><span class="kd">final</span><span class="w"> </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">TarantoolContainer</span><span class="o">&lt;?&gt;&gt;</span><span class="w"> </span><span class="n">routers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cluster</span><span class="p">.</span><span class="na">routers</span><span class="p">();</span>
</span><span id="__spanz-6-217"><a id="__codelineno-6-217" name="__codelineno-6-217" href="#__codelineno-6-217"></a><span class="w">      </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertEquals</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">routers</span><span class="p">.</span><span class="na">size</span><span class="p">());</span>
</span><span id="__spanz-6-218"><a id="__codelineno-6-218" name="__codelineno-6-218" href="#__codelineno-6-218"></a>
</span><span id="__spanz-6-219"><a id="__codelineno-6-219" name="__codelineno-6-219" href="#__codelineno-6-219"></a><span class="w">      </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">instanceName</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Arrays</span><span class="p">.</span><span class="na">asList</span><span class="p">(</span><span class="n">firstRouterInstanceName</span><span class="p">,</span>
</span><span id="__spanz-6-220"><a id="__codelineno-6-220" name="__codelineno-6-220" href="#__codelineno-6-220"></a><span class="w">          </span><span class="n">secondRouterInstanceName</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__spanz-6-221"><a id="__codelineno-6-221" name="__codelineno-6-221" href="#__codelineno-6-221"></a><span class="w">        </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertTrue</span><span class="p">(</span><span class="n">routers</span><span class="p">.</span><span class="na">containsKey</span><span class="p">(</span><span class="n">instanceName</span><span class="p">));</span>
</span><span id="__spanz-6-222"><a id="__codelineno-6-222" name="__codelineno-6-222" href="#__codelineno-6-222"></a><span class="w">      </span><span class="p">}</span>
</span><span id="__spanz-6-223"><a id="__codelineno-6-223" name="__codelineno-6-223" href="#__codelineno-6-223"></a>
</span><span id="__spanz-6-224"><a id="__codelineno-6-224" name="__codelineno-6-224" href="#__codelineno-6-224"></a><span class="w">      </span><span class="kd">final</span><span class="w"> </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">TarantoolContainer</span><span class="o">&lt;?&gt;&gt;</span><span class="w"> </span><span class="n">storages</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cluster</span><span class="p">.</span><span class="na">storages</span><span class="p">();</span>
</span><span id="__spanz-6-225"><a id="__codelineno-6-225" name="__codelineno-6-225" href="#__codelineno-6-225"></a><span class="w">      </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertEquals</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="n">storages</span><span class="p">.</span><span class="na">size</span><span class="p">());</span>
</span><span id="__spanz-6-226"><a id="__codelineno-6-226" name="__codelineno-6-226" href="#__codelineno-6-226"></a>
</span><span id="__spanz-6-227"><a id="__codelineno-6-227" name="__codelineno-6-227" href="#__codelineno-6-227"></a><span class="w">      </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">instanceName</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Arrays</span><span class="p">.</span><span class="na">asList</span><span class="p">(</span><span class="n">r1s1InstanceName</span><span class="p">,</span><span class="w"> </span><span class="n">r2s1InstanceName</span><span class="p">,</span>
</span><span id="__spanz-6-228"><a id="__codelineno-6-228" name="__codelineno-6-228" href="#__codelineno-6-228"></a><span class="w">          </span><span class="n">r2s2InstanceName</span><span class="p">,</span><span class="w"> </span><span class="n">r1s2InstanceName</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__spanz-6-229"><a id="__codelineno-6-229" name="__codelineno-6-229" href="#__codelineno-6-229"></a><span class="w">        </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertTrue</span><span class="p">(</span><span class="n">storages</span><span class="p">.</span><span class="na">containsKey</span><span class="p">(</span><span class="n">instanceName</span><span class="p">));</span>
</span><span id="__spanz-6-230"><a id="__codelineno-6-230" name="__codelineno-6-230" href="#__codelineno-6-230"></a><span class="w">      </span><span class="p">}</span>
</span><span id="__spanz-6-231"><a id="__codelineno-6-231" name="__codelineno-6-231" href="#__codelineno-6-231"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__spanz-6-232"><a id="__codelineno-6-232" name="__codelineno-6-232" href="#__codelineno-6-232"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__spanz-6-233"><a id="__codelineno-6-233" name="__codelineno-6-233" href="#__codelineno-6-233"></a><span class="p">}</span>
</span></code></pre></div>
<h2 id="example-3-starting-a-cluster-with-custom-settings">Example 3. Starting a Cluster with Custom Settings</h2>
<p>Suppose you already have a configuration file:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__spanz-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="nn">---</span>
</span><span id="__spanz-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="nt">credentials</span><span class="p">:</span>
</span><span id="__spanz-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="w">  </span><span class="nt">users</span><span class="p">:</span>
</span><span id="__spanz-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="w">    </span><span class="nt">test-super</span><span class="p">:</span>
</span><span id="__spanz-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="w">      </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;test&quot;</span>
</span><span id="__spanz-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="w">      </span><span class="nt">roles</span><span class="p">:</span>
</span><span id="__spanz-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;super&quot;</span>
</span><span id="__spanz-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="w">    </span><span class="nt">storage</span><span class="p">:</span>
</span><span id="__spanz-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="w">      </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;secret&quot;</span>
</span><span id="__spanz-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="w">      </span><span class="nt">roles</span><span class="p">:</span>
</span><span id="__spanz-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;sharding&quot;</span>
</span><span id="__spanz-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a><span class="w">    </span><span class="nt">replicator</span><span class="p">:</span>
</span><span id="__spanz-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a><span class="w">      </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;secret&quot;</span>
</span><span id="__spanz-7-14"><a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a><span class="w">      </span><span class="nt">roles</span><span class="p">:</span>
</span><span id="__spanz-7-15"><a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;replication&quot;</span>
</span><span id="__spanz-7-16"><a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a><span class="nt">groups</span><span class="p">:</span>
</span><span id="__spanz-7-17"><a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a><span class="w">  </span><span class="nt">routers</span><span class="p">:</span>
</span><span id="__spanz-7-18"><a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a><span class="w">    </span><span class="nt">replicasets</span><span class="p">:</span>
</span><span id="__spanz-7-19"><a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a><span class="w">      </span><span class="nt">router-1</span><span class="p">:</span>
</span><span id="__spanz-7-20"><a id="__codelineno-7-20" name="__codelineno-7-20" href="#__codelineno-7-20"></a><span class="w">        </span><span class="nt">leader</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;router-1&quot;</span>
</span><span id="__spanz-7-21"><a id="__codelineno-7-21" name="__codelineno-7-21" href="#__codelineno-7-21"></a><span class="w">        </span><span class="nt">instances</span><span class="p">:</span>
</span><span id="__spanz-7-22"><a id="__codelineno-7-22" name="__codelineno-7-22" href="#__codelineno-7-22"></a><span class="w">          </span><span class="nt">router-1</span><span class="p">:</span>
</span><span id="__spanz-7-23"><a id="__codelineno-7-23" name="__codelineno-7-23" href="#__codelineno-7-23"></a><span class="w">            </span><span class="nt">iproto</span><span class="p">:</span>
</span><span id="__spanz-7-24"><a id="__codelineno-7-24" name="__codelineno-7-24" href="#__codelineno-7-24"></a><span class="w">              </span><span class="nt">listen</span><span class="p">:</span>
</span><span id="__spanz-7-25"><a id="__codelineno-7-25" name="__codelineno-7-25" href="#__codelineno-7-25"></a><span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uri</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;router-1:3301&quot;</span>
</span><span id="__spanz-7-26"><a id="__codelineno-7-26" name="__codelineno-7-26" href="#__codelineno-7-26"></a><span class="w">              </span><span class="nt">advertise</span><span class="p">:</span>
</span><span id="__spanz-7-27"><a id="__codelineno-7-27" name="__codelineno-7-27" href="#__codelineno-7-27"></a><span class="w">                </span><span class="nt">client</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;router-1:3301&quot;</span>
</span><span id="__spanz-7-28"><a id="__codelineno-7-28" name="__codelineno-7-28" href="#__codelineno-7-28"></a><span class="w">      </span><span class="nt">router-2</span><span class="p">:</span>
</span><span id="__spanz-7-29"><a id="__codelineno-7-29" name="__codelineno-7-29" href="#__codelineno-7-29"></a><span class="w">        </span><span class="nt">leader</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;router-2&quot;</span>
</span><span id="__spanz-7-30"><a id="__codelineno-7-30" name="__codelineno-7-30" href="#__codelineno-7-30"></a><span class="w">        </span><span class="nt">instances</span><span class="p">:</span>
</span><span id="__spanz-7-31"><a id="__codelineno-7-31" name="__codelineno-7-31" href="#__codelineno-7-31"></a><span class="w">          </span><span class="nt">router-2</span><span class="p">:</span>
</span><span id="__spanz-7-32"><a id="__codelineno-7-32" name="__codelineno-7-32" href="#__codelineno-7-32"></a><span class="w">            </span><span class="nt">iproto</span><span class="p">:</span>
</span><span id="__spanz-7-33"><a id="__codelineno-7-33" name="__codelineno-7-33" href="#__codelineno-7-33"></a><span class="w">              </span><span class="nt">listen</span><span class="p">:</span>
</span><span id="__spanz-7-34"><a id="__codelineno-7-34" name="__codelineno-7-34" href="#__codelineno-7-34"></a><span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uri</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;router-2:3301&quot;</span>
</span><span id="__spanz-7-35"><a id="__codelineno-7-35" name="__codelineno-7-35" href="#__codelineno-7-35"></a><span class="w">              </span><span class="nt">advertise</span><span class="p">:</span>
</span><span id="__spanz-7-36"><a id="__codelineno-7-36" name="__codelineno-7-36" href="#__codelineno-7-36"></a><span class="w">                </span><span class="nt">client</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;router-2:3301&quot;</span>
</span><span id="__spanz-7-37"><a id="__codelineno-7-37" name="__codelineno-7-37" href="#__codelineno-7-37"></a><span class="w">    </span><span class="nt">replication</span><span class="p">:</span>
</span><span id="__spanz-7-38"><a id="__codelineno-7-38" name="__codelineno-7-38" href="#__codelineno-7-38"></a><span class="w">      </span><span class="nt">failover</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;manual&quot;</span>
</span><span id="__spanz-7-39"><a id="__codelineno-7-39" name="__codelineno-7-39" href="#__codelineno-7-39"></a><span class="w">    </span><span class="nt">roles</span><span class="p">:</span>
</span><span id="__spanz-7-40"><a id="__codelineno-7-40" name="__codelineno-7-40" href="#__codelineno-7-40"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;roles.crud-router&quot;</span>
</span><span id="__spanz-7-41"><a id="__codelineno-7-41" name="__codelineno-7-41" href="#__codelineno-7-41"></a><span class="w">    </span><span class="nt">sharding</span><span class="p">:</span>
</span><span id="__spanz-7-42"><a id="__codelineno-7-42" name="__codelineno-7-42" href="#__codelineno-7-42"></a><span class="w">      </span><span class="nt">roles</span><span class="p">:</span>
</span><span id="__spanz-7-43"><a id="__codelineno-7-43" name="__codelineno-7-43" href="#__codelineno-7-43"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;router&quot;</span>
</span><span id="__spanz-7-44"><a id="__codelineno-7-44" name="__codelineno-7-44" href="#__codelineno-7-44"></a><span class="w">  </span><span class="nt">storages</span><span class="p">:</span>
</span><span id="__spanz-7-45"><a id="__codelineno-7-45" name="__codelineno-7-45" href="#__codelineno-7-45"></a><span class="w">    </span><span class="nt">replicasets</span><span class="p">:</span>
</span><span id="__spanz-7-46"><a id="__codelineno-7-46" name="__codelineno-7-46" href="#__codelineno-7-46"></a><span class="w">      </span><span class="nt">r1</span><span class="p">:</span>
</span><span id="__spanz-7-47"><a id="__codelineno-7-47" name="__codelineno-7-47" href="#__codelineno-7-47"></a><span class="w">        </span><span class="nt">instances</span><span class="p">:</span>
</span><span id="__spanz-7-48"><a id="__codelineno-7-48" name="__codelineno-7-48" href="#__codelineno-7-48"></a><span class="w">          </span><span class="nt">r1-s1</span><span class="p">:</span>
</span><span id="__spanz-7-49"><a id="__codelineno-7-49" name="__codelineno-7-49" href="#__codelineno-7-49"></a><span class="w">            </span><span class="nt">iproto</span><span class="p">:</span>
</span><span id="__spanz-7-50"><a id="__codelineno-7-50" name="__codelineno-7-50" href="#__codelineno-7-50"></a><span class="w">              </span><span class="nt">listen</span><span class="p">:</span>
</span><span id="__spanz-7-51"><a id="__codelineno-7-51" name="__codelineno-7-51" href="#__codelineno-7-51"></a><span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uri</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;r1-s1:3301&quot;</span>
</span><span id="__spanz-7-52"><a id="__codelineno-7-52" name="__codelineno-7-52" href="#__codelineno-7-52"></a><span class="w">              </span><span class="nt">advertise</span><span class="p">:</span>
</span><span id="__spanz-7-53"><a id="__codelineno-7-53" name="__codelineno-7-53" href="#__codelineno-7-53"></a><span class="w">                </span><span class="nt">client</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;r1-s1:3301&quot;</span>
</span><span id="__spanz-7-54"><a id="__codelineno-7-54" name="__codelineno-7-54" href="#__codelineno-7-54"></a><span class="w">          </span><span class="nt">r1-s2</span><span class="p">:</span>
</span><span id="__spanz-7-55"><a id="__codelineno-7-55" name="__codelineno-7-55" href="#__codelineno-7-55"></a><span class="w">            </span><span class="nt">iproto</span><span class="p">:</span>
</span><span id="__spanz-7-56"><a id="__codelineno-7-56" name="__codelineno-7-56" href="#__codelineno-7-56"></a><span class="w">              </span><span class="nt">listen</span><span class="p">:</span>
</span><span id="__spanz-7-57"><a id="__codelineno-7-57" name="__codelineno-7-57" href="#__codelineno-7-57"></a><span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uri</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;r1-s2:3301&quot;</span>
</span><span id="__spanz-7-58"><a id="__codelineno-7-58" name="__codelineno-7-58" href="#__codelineno-7-58"></a><span class="w">              </span><span class="nt">advertise</span><span class="p">:</span>
</span><span id="__spanz-7-59"><a id="__codelineno-7-59" name="__codelineno-7-59" href="#__codelineno-7-59"></a><span class="w">                </span><span class="nt">client</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;r1-s2:3301&quot;</span>
</span><span id="__spanz-7-60"><a id="__codelineno-7-60" name="__codelineno-7-60" href="#__codelineno-7-60"></a><span class="w">      </span><span class="nt">r2</span><span class="p">:</span>
</span><span id="__spanz-7-61"><a id="__codelineno-7-61" name="__codelineno-7-61" href="#__codelineno-7-61"></a><span class="w">        </span><span class="nt">instances</span><span class="p">:</span>
</span><span id="__spanz-7-62"><a id="__codelineno-7-62" name="__codelineno-7-62" href="#__codelineno-7-62"></a><span class="w">          </span><span class="nt">r2-s1</span><span class="p">:</span>
</span><span id="__spanz-7-63"><a id="__codelineno-7-63" name="__codelineno-7-63" href="#__codelineno-7-63"></a><span class="w">            </span><span class="nt">iproto</span><span class="p">:</span>
</span><span id="__spanz-7-64"><a id="__codelineno-7-64" name="__codelineno-7-64" href="#__codelineno-7-64"></a><span class="w">              </span><span class="nt">listen</span><span class="p">:</span>
</span><span id="__spanz-7-65"><a id="__codelineno-7-65" name="__codelineno-7-65" href="#__codelineno-7-65"></a><span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uri</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;r2-s1:3301&quot;</span>
</span><span id="__spanz-7-66"><a id="__codelineno-7-66" name="__codelineno-7-66" href="#__codelineno-7-66"></a><span class="w">              </span><span class="nt">advertise</span><span class="p">:</span>
</span><span id="__spanz-7-67"><a id="__codelineno-7-67" name="__codelineno-7-67" href="#__codelineno-7-67"></a><span class="w">                </span><span class="nt">client</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;r2-s1:3301&quot;</span>
</span><span id="__spanz-7-68"><a id="__codelineno-7-68" name="__codelineno-7-68" href="#__codelineno-7-68"></a><span class="w">          </span><span class="nt">r2-s2</span><span class="p">:</span>
</span><span id="__spanz-7-69"><a id="__codelineno-7-69" name="__codelineno-7-69" href="#__codelineno-7-69"></a><span class="w">            </span><span class="nt">iproto</span><span class="p">:</span>
</span><span id="__spanz-7-70"><a id="__codelineno-7-70" name="__codelineno-7-70" href="#__codelineno-7-70"></a><span class="w">              </span><span class="nt">listen</span><span class="p">:</span>
</span><span id="__spanz-7-71"><a id="__codelineno-7-71" name="__codelineno-7-71" href="#__codelineno-7-71"></a><span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uri</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;r2-s2:3301&quot;</span>
</span><span id="__spanz-7-72"><a id="__codelineno-7-72" name="__codelineno-7-72" href="#__codelineno-7-72"></a><span class="w">              </span><span class="nt">advertise</span><span class="p">:</span>
</span><span id="__spanz-7-73"><a id="__codelineno-7-73" name="__codelineno-7-73" href="#__codelineno-7-73"></a><span class="w">                </span><span class="nt">client</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;r2-s2:3301&quot;</span>
</span><span id="__spanz-7-74"><a id="__codelineno-7-74" name="__codelineno-7-74" href="#__codelineno-7-74"></a><span class="w">    </span><span class="nt">replication</span><span class="p">:</span>
</span><span id="__spanz-7-75"><a id="__codelineno-7-75" name="__codelineno-7-75" href="#__codelineno-7-75"></a><span class="w">      </span><span class="nt">failover</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;election&quot;</span>
</span><span id="__spanz-7-76"><a id="__codelineno-7-76" name="__codelineno-7-76" href="#__codelineno-7-76"></a><span class="w">    </span><span class="nt">roles</span><span class="p">:</span>
</span><span id="__spanz-7-77"><a id="__codelineno-7-77" name="__codelineno-7-77" href="#__codelineno-7-77"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;roles.crud-storage&quot;</span>
</span><span id="__spanz-7-78"><a id="__codelineno-7-78" name="__codelineno-7-78" href="#__codelineno-7-78"></a><span class="w">    </span><span class="nt">sharding</span><span class="p">:</span>
</span><span id="__spanz-7-79"><a id="__codelineno-7-79" name="__codelineno-7-79" href="#__codelineno-7-79"></a><span class="w">      </span><span class="nt">roles</span><span class="p">:</span>
</span><span id="__spanz-7-80"><a id="__codelineno-7-80" name="__codelineno-7-80" href="#__codelineno-7-80"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;storage&quot;</span>
</span><span id="__spanz-7-81"><a id="__codelineno-7-81" name="__codelineno-7-81" href="#__codelineno-7-81"></a><span class="nt">iproto</span><span class="p">:</span>
</span><span id="__spanz-7-82"><a id="__codelineno-7-82" name="__codelineno-7-82" href="#__codelineno-7-82"></a><span class="w">  </span><span class="nt">advertise</span><span class="p">:</span>
</span><span id="__spanz-7-83"><a id="__codelineno-7-83" name="__codelineno-7-83" href="#__codelineno-7-83"></a><span class="w">    </span><span class="nt">peer</span><span class="p">:</span>
</span><span id="__spanz-7-84"><a id="__codelineno-7-84" name="__codelineno-7-84" href="#__codelineno-7-84"></a><span class="w">      </span><span class="nt">login</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;replicator&quot;</span>
</span><span id="__spanz-7-85"><a id="__codelineno-7-85" name="__codelineno-7-85" href="#__codelineno-7-85"></a><span class="w">    </span><span class="nt">sharding</span><span class="p">:</span>
</span><span id="__spanz-7-86"><a id="__codelineno-7-86" name="__codelineno-7-86" href="#__codelineno-7-86"></a><span class="w">      </span><span class="nt">login</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;storage&quot;</span>
</span></code></pre></div>
<p>To use it, we'll use <code>YamlMapper</code>:</p>
<div class="language-java highlight"><pre><span></span><code><span id="__spanz-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.nio.file.Path</span><span class="p">;</span>
</span><span id="__spanz-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.nio.file.Paths</span><span class="p">;</span>
</span><span id="__spanz-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Arrays</span><span class="p">;</span>
</span><span id="__spanz-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>
</span><span id="__spanz-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Map</span><span class="p">;</span>
</span><span id="__spanz-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>
</span><span id="__spanz-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.jupiter.api.Assertions</span><span class="p">;</span>
</span><span id="__spanz-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.jupiter.api.Test</span><span class="p">;</span>
</span><span id="__spanz-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.testcontainers.containers.tarantool.TarantoolContainer</span><span class="p">;</span>
</span><span id="__spanz-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.testcontainers.containers.tarantool.config.ConfigurationUtils</span><span class="p">;</span>
</span><span id="__spanz-8-11"><a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.testcontainers.containers.tdb.TDB2ClusterImpl</span><span class="p">;</span>
</span><span id="__spanz-8-12"><a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.testcontainers.containers.tdb.TDBCluster</span><span class="p">;</span>
</span><span id="__spanz-8-13"><a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a>
</span><span id="__spanz-8-14"><a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a><span class="kn">import</span><span class="w"> </span><span class="nn">io.tarantool.autogen.Tarantool3Configuration</span><span class="p">;</span>
</span><span id="__spanz-8-15"><a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a>
</span><span id="__spanz-8-16"><a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">TestClass</span><span class="w"> </span><span class="p">{</span>
</span><span id="__spanz-8-17"><a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a>
</span><span id="__spanz-8-18"><a id="__codelineno-8-18" name="__codelineno-8-18" href="#__codelineno-8-18"></a><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Path</span><span class="w"> </span><span class="n">PATH_TO_CONFIG_FILE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Paths</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;&lt;path_to_your_config_file&gt;&quot;</span><span class="p">);</span>
</span><span id="__spanz-8-19"><a id="__codelineno-8-19" name="__codelineno-8-19" href="#__codelineno-8-19"></a>
</span><span id="__spanz-8-20"><a id="__codelineno-8-20" name="__codelineno-8-20" href="#__codelineno-8-20"></a><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ROUTER_NAMES</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Arrays</span><span class="p">.</span><span class="na">asList</span><span class="p">(</span><span class="s">&quot;router-1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;router-2&quot;</span><span class="p">);</span>
</span><span id="__spanz-8-21"><a id="__codelineno-8-21" name="__codelineno-8-21" href="#__codelineno-8-21"></a>
</span><span id="__spanz-8-22"><a id="__codelineno-8-22" name="__codelineno-8-22" href="#__codelineno-8-22"></a><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">STORAGES_NAMES</span><span class="w"> </span><span class="o">=</span>
</span><span id="__spanz-8-23"><a id="__codelineno-8-23" name="__codelineno-8-23" href="#__codelineno-8-23"></a><span class="w">          </span><span class="n">Arrays</span><span class="p">.</span><span class="na">asList</span><span class="p">(</span><span class="s">&quot;r1-s1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;r1-s2&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;r2-s1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;r2-s2&quot;</span><span class="p">);</span>
</span><span id="__spanz-8-24"><a id="__codelineno-8-24" name="__codelineno-8-24" href="#__codelineno-8-24"></a>
</span><span id="__spanz-8-25"><a id="__codelineno-8-25" name="__codelineno-8-25" href="#__codelineno-8-25"></a><span class="w">  </span><span class="nd">@Test</span>
</span><span id="__spanz-8-26"><a id="__codelineno-8-26" name="__codelineno-8-26" href="#__codelineno-8-26"></a><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">testClusterFileConfiguration</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__spanz-8-27"><a id="__codelineno-8-27" name="__codelineno-8-27" href="#__codelineno-8-27"></a><span class="w">    </span><span class="kd">final</span><span class="w"> </span><span class="n">Tarantool3Configuration</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ConfigurationUtils</span><span class="p">.</span><span class="na">readFromFile</span><span class="p">(</span><span class="n">PATH_TO_CONFIG_FILE</span><span class="p">);</span>
</span><span id="__spanz-8-28"><a id="__codelineno-8-28" name="__codelineno-8-28" href="#__codelineno-8-28"></a>
</span><span id="__spanz-8-29"><a id="__codelineno-8-29" name="__codelineno-8-29" href="#__codelineno-8-29"></a><span class="w">    </span><span class="c1">// check cluster</span>
</span><span id="__spanz-8-30"><a id="__codelineno-8-30" name="__codelineno-8-30" href="#__codelineno-8-30"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">TDBCluster</span><span class="w"> </span><span class="n">cluster</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TDB2ClusterImpl</span><span class="p">.</span><span class="na">builder</span><span class="p">(</span><span class="s">&quot;tarantooldb:2.2.1&quot;</span><span class="p">)</span>
</span><span id="__spanz-8-31"><a id="__codelineno-8-31" name="__codelineno-8-31" href="#__codelineno-8-31"></a><span class="w">            </span><span class="c1">// it will use configuration object for cluster configuration instead of replicaCount and etc</span>
</span><span id="__spanz-8-32"><a id="__codelineno-8-32" name="__codelineno-8-32" href="#__codelineno-8-32"></a><span class="w">            </span><span class="p">.</span><span class="na">withTDB2Configuration</span><span class="p">(</span><span class="n">configuration</span><span class="p">)</span>
</span><span id="__spanz-8-33"><a id="__codelineno-8-33" name="__codelineno-8-33" href="#__codelineno-8-33"></a><span class="w">            </span><span class="p">.</span><span class="na">build</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__spanz-8-34"><a id="__codelineno-8-34" name="__codelineno-8-34" href="#__codelineno-8-34"></a><span class="w">      </span><span class="n">cluster</span><span class="p">.</span><span class="na">start</span><span class="p">();</span>
</span><span id="__spanz-8-35"><a id="__codelineno-8-35" name="__codelineno-8-35" href="#__codelineno-8-35"></a>
</span><span id="__spanz-8-36"><a id="__codelineno-8-36" name="__codelineno-8-36" href="#__codelineno-8-36"></a><span class="w">      </span><span class="kd">final</span><span class="w"> </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">TarantoolContainer</span><span class="o">&lt;?&gt;&gt;</span><span class="w"> </span><span class="n">routers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cluster</span><span class="p">.</span><span class="na">routers</span><span class="p">();</span>
</span><span id="__spanz-8-37"><a id="__codelineno-8-37" name="__codelineno-8-37" href="#__codelineno-8-37"></a><span class="w">      </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertEquals</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">routers</span><span class="p">.</span><span class="na">size</span><span class="p">());</span>
</span><span id="__spanz-8-38"><a id="__codelineno-8-38" name="__codelineno-8-38" href="#__codelineno-8-38"></a>
</span><span id="__spanz-8-39"><a id="__codelineno-8-39" name="__codelineno-8-39" href="#__codelineno-8-39"></a><span class="w">      </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">instanceName</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ROUTER_NAMES</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__spanz-8-40"><a id="__codelineno-8-40" name="__codelineno-8-40" href="#__codelineno-8-40"></a><span class="w">        </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertTrue</span><span class="p">(</span><span class="n">routers</span><span class="p">.</span><span class="na">containsKey</span><span class="p">(</span><span class="n">instanceName</span><span class="p">));</span>
</span><span id="__spanz-8-41"><a id="__codelineno-8-41" name="__codelineno-8-41" href="#__codelineno-8-41"></a><span class="w">      </span><span class="p">}</span>
</span><span id="__spanz-8-42"><a id="__codelineno-8-42" name="__codelineno-8-42" href="#__codelineno-8-42"></a>
</span><span id="__spanz-8-43"><a id="__codelineno-8-43" name="__codelineno-8-43" href="#__codelineno-8-43"></a><span class="w">      </span><span class="kd">final</span><span class="w"> </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">org</span><span class="p">.</span><span class="na">testcontainers</span><span class="p">.</span><span class="na">containers</span><span class="p">.</span><span class="na">tarantool</span><span class="p">.</span><span class="na">TarantoolContainer</span><span class="o">&lt;?&gt;&gt;</span><span class="w"> </span><span class="n">storages</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cluster</span><span class="p">.</span><span class="na">storages</span><span class="p">();</span>
</span><span id="__spanz-8-44"><a id="__codelineno-8-44" name="__codelineno-8-44" href="#__codelineno-8-44"></a><span class="w">      </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertEquals</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="n">storages</span><span class="p">.</span><span class="na">size</span><span class="p">());</span>
</span><span id="__spanz-8-45"><a id="__codelineno-8-45" name="__codelineno-8-45" href="#__codelineno-8-45"></a>
</span><span id="__spanz-8-46"><a id="__codelineno-8-46" name="__codelineno-8-46" href="#__codelineno-8-46"></a><span class="w">      </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">instanceName</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">STORAGES_NAMES</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__spanz-8-47"><a id="__codelineno-8-47" name="__codelineno-8-47" href="#__codelineno-8-47"></a><span class="w">        </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertTrue</span><span class="p">(</span><span class="n">storages</span><span class="p">.</span><span class="na">containsKey</span><span class="p">(</span><span class="n">instanceName</span><span class="p">));</span>
</span><span id="__spanz-8-48"><a id="__codelineno-8-48" name="__codelineno-8-48" href="#__codelineno-8-48"></a><span class="w">      </span><span class="p">}</span>
</span><span id="__spanz-8-49"><a id="__codelineno-8-49" name="__codelineno-8-49" href="#__codelineno-8-49"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__spanz-8-50"><a id="__codelineno-8-50" name="__codelineno-8-50" href="#__codelineno-8-50"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__spanz-8-51"><a id="__codelineno-8-51" name="__codelineno-8-51" href="#__codelineno-8-51"></a><span class="p">}</span>
</span></code></pre></div>
<details class="warning" open="open">
<summary>Important</summary>
<ul>
<li>For <code>testcontainers</code> to work, the configuration must contain the user <code>test-super</code> with password
  <code>secret</code> and role <code>super</code></li>
<li><code>iproto.listen.uri</code> must have <code>hostname</code> identical to the instance name
  <code>instances.&lt;instance_name&gt;</code></li>
<li>Web UI <code>TCM</code> login and password:<ul>
<li>Login: <code>admin</code></li>
<li>Password: <code>secret</code></li>
</ul>
</li>
</ul>
</details>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../tdb2-cluster-testcontainers-standard-impl/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Standard Implementation">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Standard Implementation
              </div>
            </div>
          </a>
        
        
          
          <a href="../../tqe/" class="md-footer__link md-footer__link--next" aria-label="Next: Tarantool testcontainers">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Tarantool testcontainers
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright Â©ï¸ 2025 VK Tech
    </div>
  
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/tarantool/tarantool-java-sdk" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.tarantool.io/ru/" target="_blank" rel="noopener" title="www.tarantool.io" class="md-social__link">
      <svg width="52" height="52" viewBox="0 0 52 52" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M19.819 8.58729C22.8355 6.8491 24.3438 5.98 26 5.98C27.6562 5.98 29.1645 6.8491 32.181 8.58729L38.019 11.9512C41.0355 13.6894 42.5438 14.5585 43.3719 15.99C44.2 17.4215 44.2 19.1597 44.2 22.6361V29.3639C44.2 32.8403 44.2 34.5785 43.3719 36.01C42.5438 37.4415 41.0355 38.3106 38.019 40.0488L32.181 43.4127C29.1645 45.1509 27.6562 46.02 26 46.02C24.3438 46.02 22.8355 45.1509 19.819 43.4127L13.981 40.0488C10.9645 38.3106 9.45621 37.4415 8.6281 36.01C7.8 34.5785 7.8 32.8403 7.8 29.3639V22.6361C7.8 19.1597 7.8 17.4215 8.6281 15.99C9.45621 14.5585 10.9645 13.6894 13.981 11.9512L19.819 8.58729ZM18.46 18.98C18.0292 18.98 17.68 19.3292 17.68 19.76V22.5141C17.68 22.9449 18.0292 23.2941 18.46 23.2941H23.063C23.4937 23.2941 23.843 23.6433 23.843 24.0741V34.84C23.843 35.2708 24.1922 35.62 24.623 35.62H27.377C27.8078 35.62 28.157 35.2708 28.157 34.84V24.0741C28.157 23.6433 28.5063 23.2941 28.937 23.2941H33.54C33.9708 23.2941 34.32 22.9449 34.32 22.5141V19.76C34.32 19.3292 33.9708 18.98 33.54 18.98H18.46Z" fill="white"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M0 24.7213C0 13.0676 0 7.2407 3.62035 3.62035C7.2407 0 13.0676 0 24.7213 0H27.2787C38.9324 0 44.7593 0 48.3796 3.62035C52 7.2407 52 13.0676 52 24.7213V27.2787C52 38.9324 52 44.7593 48.3796 48.3796C44.7593 52 38.9324 52 27.2787 52H24.7213C13.0676 52 7.2407 52 3.62035 48.3796C0 44.7593 0 38.9324 0 27.2787V24.7213ZM24.7213 1.56H27.2787C33.1497 1.56 37.396 1.56331 40.6338 1.99863C43.8268 2.42792 45.8045 3.25142 47.2766 4.72344C48.7486 6.19546 49.5721 8.17319 50.0014 11.3662C50.4367 14.604 50.44 18.8503 50.44 24.7213V27.2787C50.44 33.1497 50.4367 37.396 50.0014 40.6338C49.5721 43.8268 48.7486 45.8045 47.2766 47.2766C45.8045 48.7486 43.8268 49.5721 40.6338 50.0014C37.396 50.4367 33.1497 50.44 27.2787 50.44H24.7213C18.8503 50.44 14.604 50.4367 11.3662 50.0014C8.17319 49.5721 6.19546 48.7486 4.72344 47.2766C3.25142 45.8045 2.42792 43.8268 1.99863 40.6338C1.56331 37.396 1.56 33.1497 1.56 27.2787V24.7213C1.56 18.8503 1.56331 14.604 1.99863 11.3662C2.42792 8.17319 3.25142 6.19546 4.72344 4.72344C6.19546 3.25142 8.17319 2.42792 11.3662 1.99863C14.604 1.56331 18.8503 1.56 24.7213 1.56Z" fill="white"/>
</svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../../../..", "features": ["navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.tracking", "navigation.path", "navigation.indexes", "navigation.top", "navigation.footer", "content.footnote.tooltips", "content.code.copy", "content.code.select", "content.code.annotate"], "search": "../../../../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"alias": true, "provider": "mike"}}</script>
    
    
      <script src="../../../../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
        <script src="../../../../../assets/mkdocs_puml/puml.js"></script>
      
        <script src="https://unpkg.com/@panzoom/panzoom@4.5.1/dist/panzoom.min.js"></script>
      
        <script src="../../../../../assets/mkdocs_puml/interaction.js"></script>
      
        <script src="../../../../../assets/mkdocs_puml/puml.js"></script>
      
        <script src="https://unpkg.com/@panzoom/panzoom@4.5.1/dist/panzoom.min.js"></script>
      
        <script src="../../../../../assets/mkdocs_puml/interaction.js"></script>
      
    
  </body>
</html>